(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{167:function(e,t,n){},168:function(e,t,n){},223:function(e,t,n){"use strict";n.r(t);var a=n(0),o=n(51),r=n.n(o),s=(n(167),n(10)),c=(n(168),n(286)),i=n(265),l=n(288),u=n(290),d=n(291),j=n(289),p=n(143),m=n.n(p),h=n(16),O=n.n(h),b=n(18),f=n.n(b),g=n(15),x=n(1),v=function(e){var t=Object(g.f)(),n=function(e){e.preventDefault(),t.push("/")};return Object(x.jsx)(i.a,{sx:{flexGrow:1},children:Object(x.jsx)(c.a,{position:"static",children:Object(x.jsxs)(l.a,{children:[Object(x.jsx)(j.a,{onClick:function(t){return function(t){t.preventDefault(),e.setOpen(!e.open),O.a.get("http://localhost:8000/api/user/name/"+f.a.get("userName"),{withCredentials:!0}).then((function(t){e.setUserRooms(t.data.user.rooms)})).catch((function(e){return console.log(e)}))}(t)},size:"large",edge:"start",color:"inherit","aria-label":"menu",sx:{mr:2},children:Object(x.jsx)(m.a,{})}),Object(x.jsx)(u.a,{variant:"h6",component:"div",sx:{flexGrow:1},children:e.pageHeader}),e.isLoggedIn?Object(x.jsxs)(x.Fragment,{children:[e.dashboard?"":Object(x.jsx)(d.a,{color:"inherit",onClick:function(e){return n(e)},children:"Home"}),Object(x.jsx)(d.a,{color:"inherit",onClick:function(e){return function(e){e.preventDefault(),O.a.get("http://localhost:8000/api/user/logout",{withCredentials:!0}).then((function(){return t.push("/")})).catch((function(e){return console.log(e.response)}))}(e)},children:"Logout"})]}):Object(x.jsxs)(x.Fragment,{children:[e.dashboard?"":Object(x.jsx)(d.a,{color:"inherit",onClick:function(e){return n(e)},children:"Home"}),Object(x.jsx)(d.a,{color:"inherit",onClick:function(t){return function(t){t.preventDefault(),e.setRegisterOpen(!e.registerOpen)}(t)},children:"Register"}),Object(x.jsx)(d.a,{color:"inherit",onClick:function(t){return function(t){t.preventDefault(),e.setLoginOpen(!e.loginOpen)}(t)},style:{marginLeft:"50px"},children:"Login"})]})]})})})},w=n(282),C=n(270),y=n(292),R=n(278),N=n(293),k=n(144),D=n.n(k),S=function(e){var t=Object(g.f)(),n=function(e,n){e.preventDefault(),t.push("/chatroom/"+n)};return Object(x.jsxs)(w.a,{anchor:"left",elevation:20,open:e.open,onClose:function(){e.setOpen(!1)},children:[Object(x.jsxs)("h1",{style:{margin:"30px 80px"},children:["Your Rooms",e.isLoggedIn?Object(x.jsx)(j.a,{size:"large",variant:"contained",color:"primary",onClick:function(t){return function(t){t.preventDefault(),e.setNewRoomOpen(!0)}(t)},children:Object(x.jsx)(D.a,{})}):null]}),Object(x.jsx)(C.a,{}),Object(x.jsxs)(y.a,{children:[Object(x.jsx)("h4",{style:{margin:"10px"},children:"Direct Messages"}),e.userRooms.map((function(e,t){if(e.isDm)return Object(x.jsx)(R.a,{children:Object(x.jsx)(N.a,{underline:"hover",component:"button",variant:"h6",onClick:function(t){return n(t,e._id)},children:e.host===f.a.get("userName")?e.users[1]:e.host})},t)}))]}),Object(x.jsx)(C.a,{}),Object(x.jsxs)(y.a,{children:[Object(x.jsx)("h4",{style:{margin:"10px"},children:"Chat Rooms"}),e.userRooms.map((function(e,t){if(!e.isDm)return Object(x.jsx)(R.a,{children:Object(x.jsx)(N.a,{underline:"hover",component:"button",variant:"h6",onClick:function(t){return n(t,e._id)},children:e.roomName})},t)}))]})]})},L=n(22),I=n(275),P=n(294),T=n(298),E=n(295),F=n(297),_=n(296),U=function(e){var t=Object(a.useState)({email:"",password:""}),n=Object(s.a)(t,2),o=n[0],r=n[1],c=Object(a.useState)(""),i=Object(s.a)(c,2),l=i[0],u=i[1],j=function(){r({email:"",password:""}),e.setLoginOpen(!1)};return Object(x.jsxs)(P.a,{open:e.loginOpen,onClose:j,children:[Object(x.jsxs)(E.a,{children:[Object(x.jsx)(_.a,{children:"Login"}),Object(x.jsxs)(F.a,{children:["Login with your email and password to begin.",Object(x.jsx)("br",{}),Object(x.jsx)("small",{style:{color:"red"},children:l})]}),Object(x.jsx)(I.a,{autoFocus:!0,margin:"dense",id:"email",label:"Email Address",type:"email",variant:"standard",value:o.email,onChange:function(e){return r(Object(L.a)(Object(L.a)({},o),{},{email:e.target.value}))}}),Object(x.jsx)(I.a,{margin:"dense",id:"password",label:"Password",type:"password",variant:"standard",value:o.password,onChange:function(e){return r(Object(L.a)(Object(L.a)({},o),{},{password:e.target.value}))},style:{marginLeft:"10px"}})]}),Object(x.jsxs)(T.a,{children:[Object(x.jsx)(d.a,{onClick:j,children:"Cancel"}),Object(x.jsx)(d.a,{onClick:function(t){return function(t){t.preventDefault(),O.a.post("http://localhost:8000/api/user/login",o,{withCredentials:!0}).then((function(t){e.setCount(e.count+1),e.setLoginOpen(!1),console.log(t)})).catch((function(e){u(e.response.data)}))}(t)},variant:"contained",children:"Submit"})]})]})},M=n(279),B=function(){var e=Object(a.useState)(""),t=Object(s.a)(e,2),n=t[0],o=t[1],r=Object(a.useState)(!1),c=Object(s.a)(r,2),i=c[0],l=c[1],u=Object(a.useState)(""),j=Object(s.a)(u,2),p=j[0],m=j[1],h=Object(g.f)(),b=function(){m(""),l(!1)};return Object(x.jsxs)("div",{children:[Object(x.jsx)("h1",{style:{marginTop:"150px"},children:"Sign Up Then Enter a Room Code to Get Started"}),Object(x.jsx)(I.a,{style:{minWidth:"400px"},type:"text",value:n,onChange:function(e){return o(e.target.value)}}),Object(x.jsx)(d.a,{onClick:function(e){return function(e){e.preventDefault(),O.a.get("http://localhost:8000/room/name/"+n).then((function(e){var t={room:e=e.data.room,userName:f.a.get("userName")};O.a.put("http://localhost:8000/api/user/addroom",t,{withCredentials:!0}).then((function(){return h.push("/chatroom/"+e._id)})).catch((function(e){void 0===e.response.data.error?m("You have to be logged in to do that!"):m(e.response.data.error),o(""),l(!0)}))})).catch((function(e){return console.log(e)}))}(e)},variant:"contained",style:{marginLeft:"15px",height:"53px",marginTop:"1px"},children:"Enter"}),Object(x.jsx)(M.a,{message:"You are already in this room!",open:i,onClose:b}),Object(x.jsx)(M.a,{message:p,open:i,onClose:b})]})},A=function(e){var t=Object(a.useState)({userName:"",email:"",password:"",confirmPassword:""}),n=Object(s.a)(t,2),o=n[0],r=n[1],c=Object(a.useState)({email:"",password:"",userName:"",confirmPassword:""}),i=Object(s.a)(c,2),l=i[0],u=i[1],j=function(){e.setRegisterOpen(!1),r({userName:"",email:"",password:"",confirmPassword:""})};return Object(x.jsxs)(P.a,{open:e.registerOpen,onClose:j,children:[Object(x.jsxs)(E.a,{children:[Object(x.jsx)(_.a,{children:"Get Registered"}),Object(x.jsx)(F.a,{children:"Register below to get started and create your own rooms!"}),Object(x.jsxs)("div",{style:{display:"flex",flexFlow:"row nowrap",justifyContent:"space-evenly"},children:[Object(x.jsx)(I.a,{error:""!==l.userName,helperText:""===l.userName?"":l.userName,autoFocus:!0,margin:"dense",id:"userName",label:"User Name",type:"text",variant:"standard",value:o.userName,onChange:function(e){return r(Object(L.a)(Object(L.a)({},o),{},{userName:e.target.value}))}}),Object(x.jsx)(I.a,{error:""!==l.email,helperText:""===l.email?"":l.email,margin:"dense",id:"email",label:"Email",type:"email",variant:"standard",value:o.email,onChange:function(e){return r(Object(L.a)(Object(L.a)({},o),{},{email:e.target.value}))}})]}),Object(x.jsxs)("div",{style:{display:"flex",flexFlow:"row nowrap",justifyContent:"space-evenly"},children:[Object(x.jsx)(I.a,{error:""!==l.password,helperText:""===l.password?"":l.password,margin:"dense",id:"password",label:"Password",type:"password",variant:"standard",value:o.password,onChange:function(e){return r(Object(L.a)(Object(L.a)({},o),{},{password:e.target.value}))},style:{maxWidth:"200px"}}),Object(x.jsx)(I.a,{error:""!==l.confirmPassword,helperText:""===l.confirmPassword?"":l.confirmPassword,margin:"dense",id:"confirmPassword",label:"Confirm Password",type:"password",variant:"standard",value:o.confirmPassword,onChange:function(e){return r(Object(L.a)(Object(L.a)({},o),{},{confirmPassword:e.target.value}))}})]})]}),Object(x.jsxs)(T.a,{children:[Object(x.jsx)(d.a,{onClick:function(t){return function(t){t.preventDefault(),e.setRegisterOpen(!1)}(t)},children:"Cancel"}),Object(x.jsx)(d.a,{variant:"contained",onClick:function(t){return function(t){t.preventDefault(),O.a.post("http://localhost:8000/api/user/register",o,{withCredentials:!0}).then((function(t){e.setCount(e.count+1),j()})).catch((function(e){for(var t={},n=0,a=Object.entries(e.response.data.error.errors);n<a.length;n++){var o=Object(s.a)(a[n],2),r=o[0],c=o[1];t[r]=c.message}u(Object(L.a)(Object(L.a)({},{email:"",password:"",userName:"",confirmPassword:""}),t))}))}(t)},children:"Register"})]})]})},H=function(e){var t=Object(a.useState)(""),n=Object(s.a)(t,2),o=n[0],r=n[1],c=Object(a.useState)(""),i=Object(s.a)(c,2),l=i[0],u=i[1],j=Object(g.f)(),p=function(){e.setNewRoomOpen(!1)};return Object(x.jsxs)(P.a,{open:e.newRoomOpen,onClose:p,children:[Object(x.jsxs)(E.a,{children:[Object(x.jsx)(_.a,{children:"Create a Room"}),Object(x.jsxs)(F.a,{children:["Create a new chatroom to talk with your pals!",Object(x.jsx)("br",{}),Object(x.jsx)("small",{style:{color:"red"}})]}),Object(x.jsx)(I.a,{error:""!==l,helperText:""===l?"":l,fullWidth:!0,autoFocus:!0,margin:"dense",id:"roomName",label:"Room Name",type:"text",variant:"standard",value:o,onChange:function(e){return r(e.target.value)}})]}),Object(x.jsxs)(T.a,{children:[Object(x.jsx)(d.a,{onClick:p,children:"Cancel"}),Object(x.jsx)(d.a,{variant:"contained",onClick:function(t){return function(t){t.preventDefault(),O.a.post("http://localhost:8000/room/create",{roomName:o,users:[f.a.get("userName")],isDm:!1,host:f.a.get("userName")},{withCredentials:!0}).then((function(t){O.a.put("http://localhost:8000/api/user/addroom/",{room:t.data.room,userName:f.a.get("userName")},{withCredentials:!0}).then((function(e){return console.log(e)})).catch((function(e){return console.log(e.response)})),j.push("/chatroom/"+t.data.room._id),p(),r(""),e.setOpen(!1)})).catch((function(e){u(e.response.data)}))}(t)},children:"Submit"})]})]})},Y=function(e){var t=Object(a.useState)(!1),n=Object(s.a)(t,2),o=n[0],r=n[1],c=Object(a.useState)(!1),i=Object(s.a)(c,2),l=i[0],u=i[1],d=Object(a.useState)(!1),j=Object(s.a)(d,2),p=j[0],m=j[1],h=Object(a.useState)(!1),b=Object(s.a)(h,2),f=b[0],g=b[1],w=Object(a.useState)(0),C=Object(s.a)(w,2),y=C[0],R=C[1],N=Object(a.useState)([]),k=Object(s.a)(N,2),D=k[0],L=k[1];return Object(a.useEffect)((function(){O.a.get("http://localhost:8000/api/user/isloggedin",{withCredentials:!0}).then((function(){g(!0)})).catch(g(!1))}),[y]),Object(x.jsxs)(x.Fragment,{children:[Object(x.jsx)(v,{pageHeader:"",setOpen:r,open:o,setLoginOpen:u,loginOpen:l,registerOpen:p,setRegisterOpen:m,isLoggedIn:f,count:y,setCount:R,userRooms:D,setUserRooms:L,dashboard:!0}),Object(x.jsx)(S,{open:o,setOpen:r,isLoggedIn:f,newRoomOpen:e.newRoomOpen,setNewRoomOpen:e.setNewRoomOpen,userRooms:D,setUserRooms:L}),Object(x.jsx)(H,{newRoomOpen:e.newRoomOpen,setNewRoomOpen:e.setNewRoomOpen}),Object(x.jsx)(U,{loginOpen:l,setLoginOpen:u,count:y,setCount:R,setUserName:e.setUserName}),Object(x.jsx)(A,{registerOpen:p,setRegisterOpen:m,count:y,setCount:R}),Object(x.jsx)(B,{})]})},W=n(146),G=n(3),V=n(17),z=n(299),J=n(285),q=n(274),K=n(273),Q=n(287),X=n(5),Z=n(300),$=n(79),ee=n.n($),te=n(284),ne=n(147),ae=n(281),oe=function(e){var t=Object(a.useState)(null),n=Object(s.a)(t,2),o=n[0],r=n[1],c=Object(a.useState)(!1),i=Object(s.a)(c,2),l=i[0],u=i[1],d=Boolean(o),j=Object(g.f)(),p=function(){r(null)},m=function(t){O.a.get("http://localhost:8000/room/"+f.a.get("userName")+"/"+t).then((function(n){0===n.data.room.length?(O.a.post("http://localhost:8000/room/create",{roomName:Math.random().toString(36).slice(2),users:[f.a.get("userName"),t],isDm:!0,host:f.a.get("userName")}).then((function(e){console.log(),O.a.put("http://localhost:8000/api/user/addroom/",{room:e.data.room,userName:f.a.get("userName")},{withCredentials:!0}).then((function(e){return console.log(e)})).catch((function(e){return console.log(e.response)})),O.a.put("http://localhost:8000/api/user/addroom/",{room:e.data.room,userName:t},{withCredentials:!0}).then((function(e){return console.log(e)})).catch((function(e){return console.log(e.response)})),j.push("/chatroom/"+e.data.room._id)})).catch((function(e){return console.log(e.response)})),e.socket.emit("sendDm",t)):(u(!0),p(),j.push("/chatroom/"+n.data.room[0]._id))})).catch((function(e){return console.log(e)}))};return Object(x.jsxs)("div",{children:[Object(x.jsx)(te.a,{label:e.userName,component:"a","aria-controls":"basic-menu","aria-haspopup":"true","aria-expanded":d?"true":void 0,clickable:!0,onClick:function(e){r(e.currentTarget)}}),Object(x.jsxs)(ne.a,{id:"basic-menu",anchorEl:o,open:d,onClose:p,MenuListProps:{"aria-labelledby":"basic-button"},children:[Object(x.jsx)(ae.a,{onClick:function(){return m(e.userName)},children:"Direct message"}),Object(x.jsx)(ae.a,{onClick:function(){return t=e.userName,m(t),void O.a.get("http://localhost:8000/api/user/name/"+t,{withCredentials:!0}).then((function(t){var n=t.data.user;e.socket.emit("start_call",{userInfo:n,caller:f.a.get("userName")})})).catch((function(e){return console.log(e)}));var t},children:"Call"})]}),Object(x.jsx)(M.a,{message:"You already have a DM with this person!",open:l,onClose:function(){u(!1)}})]})},re=n(31),se=n.n(re),ce=n(53),ie=function(e){var t={video:{width:480,height:320},audio:!0},n={iceServers:[{urls:"stun:stun.l.google.com:19302"},{urls:"stun:stun1.l.google.com:19302"}]},o=Object(a.useState)(e.roomInfo._id),r=Object(s.a)(o,2),c=r[0],i=r[1],l=function(){var n=Object(ce.a)(se.a.mark((function n(a){var o,r;return se.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return a.preventDefault(),o=document.getElementById("localVid"),n.prev=2,n.next=5,navigator.mediaDevices.getUserMedia(t);case 5:r=n.sent,r,o.srcObject=r,n.next=13;break;case 10:n.prev=10,n.t0=n.catch(2),console.log("Error getting local media.",n.t0);case 13:e.socket.emit("call",c);case 15:case"end":return n.stop()}}),n,null,[[2,10]])})));return function(e){return n.apply(this,arguments)}}();return Object(a.useEffect)((function(){var a,o=new RTCPeerConnection(n),r=document.getElementById("remoteVid");function s(e){return l.apply(this,arguments)}function l(){return l=Object(ce.a)(se.a.mark((function e(t){var n,r;return se.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=document.getElementById("localVid"),e.prev=1,e.next=4,navigator.mediaDevices.getUserMedia(t);case 4:n=e.sent,a=n,r.srcObject=n,e.next=12;break;case 9:e.prev=9,e.t0=e.catch(1),console.log("Error getting local media.",e.t0);case 12:u(o),r.srcObject=n;case 15:case"end":return e.stop()}}),e,null,[[1,9]])}))),l.apply(this,arguments)}function u(e){console.log(a),a.getTracks().forEach((function(t){e.addTrack(t,a)}))}function d(e){return j.apply(this,arguments)}function j(){return j=Object(ce.a)(se.a.mark((function t(n){var a;return se.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,n.createOffer();case 3:a=t.sent,n.setLocalDescription(a),t.next=10;break;case 7:t.prev=7,t.t0=t.catch(0),console.error(t.t0);case 10:e.socket.emit("offer",{type:"offer",sdp:a,roomId:c});case 12:case"end":return t.stop()}}),t,null,[[0,7]])}))),j.apply(this,arguments)}function p(e){return m.apply(this,arguments)}function m(){return m=Object(ce.a)(se.a.mark((function t(n){var a;return se.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,n.createAnswer();case 3:a=t.sent,n.setLocalDescription(a),t.next=10;break;case 7:t.prev=7,t.t0=t.catch(0),console.error(t.t0);case 10:e.socket.emit("answer",{type:"answer",sdp:a,roomId:c});case 12:case"end":return t.stop()}}),t,null,[[0,7]])}))),m.apply(this,arguments)}function h(e){r.srcObject=e.streams[0],console.log(e)}function O(t){t.candidate&&e.socket.emit("ice_candidate",{roomId:c,label:t.candidate.sdpMLineIndex,candidate:t.candidate.candidate})}i(e.roomInfo._id),e.socket.on("call",Object(ce.a)(se.a.mark((function e(){return se.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,s(t);case 2:return console.log("client call"),o.ontrack=h,o.onicecandidate=O,e.next=7,d(o);case 7:console.log("Client call event end.");case 8:case"end":return e.stop()}}),e)})))),e.socket.on("offer",function(){var e=Object(ce.a)(se.a.mark((function e(n){return se.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("Client offer event start."),e.next=3,s(t);case 3:return o.ontrack=h,e.next=6,o.setRemoteDescription(new RTCSessionDescription(n));case 6:return o.onicecandidate=O,e.next=9,p(o);case 9:console.log("Client offer event end.");case 10:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),e.socket.on("answer",(function(e){console.log("Client answer event start."),o.setRemoteDescription(new RTCSessionDescription(e)),console.log("Client answer event end.")})),e.socket.on("ice_candidate",(function(e){console.log("Client ice candidate event start.");var t=new RTCIceCandidate({sdpMLineIndex:e.label,candidate:e.candidate});console.log(t),o.addIceCandidate(t)}))}),[]),Object(x.jsxs)(K.a,{style:{minHeight:"500px",minWidth:"300px",backgroundColor:"#dce7e8",maxHeight:"600px",marginTop:"40px",overflowY:"none",alignItems:"space-evenly",borderRadius:"10px",padding:"30px",display:"flex",justifyContent:"space-evenly",flexDirection:"column"},children:[Object(x.jsx)("video",{id:"remoteVid",autoPlay:!0,preload:"auto",controls:!0,style:{margin:"10px 0",borderRadius:"15px"}}),Object(x.jsx)("video",{id:"localVid",autoPlay:!0,preload:"auto",controls:!0,style:{margin:"10px 0",borderRadius:"15px"}}),Object(x.jsx)(d.a,{onClick:function(e){return l(e)},variant:"contained",color:"secondary",children:"Call"})]})},le=function(e){var t=Object(g.f)(),n=Object(a.useState)((function(){return ee()(":8000")})),o=Object(s.a)(n,1)[0],r=function(t){t.preventDefault(),e.setCallOpen(!1)};return Object(x.jsxs)(P.a,{open:e.open,onClose:function(e){return r(e)},children:[Object(x.jsxs)(_.a,{children:["You're recieving a call from ",e.caller,"!"]}),Object(x.jsx)(E.a,{children:Object(x.jsx)(F.a,{children:"Answer it or decline it, the choice is yours."})}),Object(x.jsxs)(T.a,{style:{margin:"0 auto"},children:[Object(x.jsx)(d.a,{onClick:function(e){return r(e)},style:{marginRight:"15px"},children:"Decline"}),Object(x.jsx)(d.a,{variant:"contained",onClick:function(n){return function(n){n.preventDefault(),O.a.get("http://localhost:8000/room/"+e.caller+"/"+f.a.get("userName"),{withCredentials:!0}).then((function(e){t.push("/chatroom/"+e.data.room[0]._id),o.emit("call",e.data.room[0]._id)})).catch((function(e){return console.log(e)})),e.setCallOpen(!1)}(n)},children:"Accept"})]})]})},ue=function(e){var t,n=Object(X.a)(Q.a)((function(e){var t=e.theme;return Object(L.a)(Object(L.a)({},t.typography.body2),{},{padding:t.spacing(1),textAlign:"left",color:t.palette.text.secondary})})),o=Object(a.useState)((function(){return ee()("http://localhost:8000")})),r=Object(s.a)(o,1)[0],c=Object(a.useState)([]),i=Object(s.a)(c,2),l=i[0],u=i[1],j=Object(a.useState)(!1),p=Object(s.a)(j,2),m=p[0],h=p[1],b=Object(a.useState)(!1),w=Object(s.a)(b,2),C=w[0],y=w[1],R=Object(a.useState)(!1),N=Object(s.a)(R,2),k=N[0],D=N[1],P=Object(a.useState)(!0),T=Object(s.a)(P,2),E=T[0],F=(T[1],Object(a.useState)(0)),_=Object(s.a)(F,2),U=_[0],M=_[1],B=Object(a.useState)([]),A=Object(s.a)(B,2),Y=A[0],W=A[1],$=Object(a.useState)(""),te=Object(s.a)($,2),ne=te[0],ae=te[1],re=Object(a.useState)(""),se=Object(s.a)(re,2),ce=se[0],ue=se[1],de=Object(a.useState)(!1),je=Object(s.a)(de,2),pe=je[0],me=je[1],he=Object(g.g)().id;return Object(a.useEffect)((function(){return r.disconnect(!0),r.connect(),O.a.get("http://localhost:8000/room/"+he,{withCredentials:!0}).then((function(e){ae(e.data.room)})).catch((function(e){return console.log(e)})),O.a.get("http://localhost:8000/message/getmessages/"+he,{withCredentials:!0}).then((function(e){u(e.data.messages.reverse())})).catch((function(e){return console.log(e.response)})),r.on("connect",(function(){console.log(r.id),O.a.put("http://localhost:8000/api/user/updatesocket",{userName:f.a.get("userName"),socket:r.id},{withCredentials:!0}).then((function(e){return e})).catch((function(e){return console.log(e)}))})),r.on("recieveMessage",(function(e){O.a.get("http://localhost:8000/message/getmessages/"+e,{withCredentials:!0}).then((function(e){u(Object(V.a)(e.data.messages.reverse()))})).catch((function(e){return console.log(e.response)}))})),r.on("recieving_call",(function(e){ue(e),me(!0)})),r.emit("join",he),function(){return r.disconnect(!0)}}),[he,r]),Object(x.jsxs)(x.Fragment,{children:[Object(x.jsx)(v,Object(G.a)({pageHeader:"",setOpen:h,open:m,setLoginOpen:y,loginOpen:C,registerOpen:k,setRegisterOpen:D,isLoggedIn:E,count:U,setCount:M,userRooms:Y,setUserRooms:W},"pageHeader",ne.isDm?ne.host===f.a.get("userName")?ne.users[1]:ne.host:ne.roomName)),Object(x.jsx)(H,{newRoomOpen:e.newRoomOpen,setNewRoomOpen:e.setNewRoomOpen,setOpen:h}),Object(x.jsx)(S,{open:m,setOpen:h,userRooms:Y,setUserRooms:W,isLoggedIn:E,newRoomOpen:e.newRoomOpen,setNewRoomOpen:e.setNewRoomOpen}),Object(x.jsx)(z.a,{maxWidth:"xlg",children:Object(x.jsxs)(J.a,{container:!0,spacing:3,alignItems:"stretch",children:[ne.isDm?Object(x.jsx)(J.a,{item:!0,xlg:2,lg:4,md:6,sm:12,xs:12,children:Object(x.jsx)(ie,{socket:r,style:{marginRight:"30px"},roomInfo:ne})}):"",Object(x.jsxs)(J.a,{item:!0,xlg:ne.isDm?12:10,lg:ne.isDm?8:12,md:ne.isDm?6:12,sm:(ne.isDm,12),xs:(ne.isDm,12),children:[Object(x.jsx)(K.a,{style:{backgroundColor:"#dce7e8",maxHeight:"500px",marginTop:"40px",overflowY:"auto",borderRadius:"10px",padding:"30px",display:"flex",flexDirection:"column-reverse"},children:Object(x.jsx)(q.a,{direction:"column-reverse",justifyContent:"space-evenly",alignItems:"stretch",spacing:2,children:l.slice(0,40).map((function(e,t){return Object(x.jsxs)(n,{children:[Object(x.jsxs)("h4",{style:{marginLeft:"5px",display:"flex",flexFlow:"row nowrap",alignItems:"center"},children:[Object(x.jsx)(oe,{userName:e.userName,socket:r}),Object(x.jsxs)("small",{children:[" - ",e.createdAt?new Date(e.createdAt).toLocaleString():(new Date).toLocaleString()]})]}),Object(x.jsx)("p",{style:{marginLeft:"15px",color:"black"},children:e.message})]},t)}))})}),Object(x.jsx)(I.a,(t={focused:!0,fullWidth:!0,id:"outlined-multiline-flexible",multiline:!0},Object(G.a)(t,"id","messageBox"),Object(G.a)(t,"maxRows",4),Object(G.a)(t,"InputProps",{endAdornment:Object(x.jsx)(Z.a,{position:"end",children:Object(x.jsx)(d.a,{variant:"contained",onClick:function(e){return function(e){var t=document.getElementById("messageBox"),n={userName:f.a.get("userName"),message:t.value,roomId:he};e.preventDefault(),r.emit("sendMessage",n),u([n].concat(Object(V.a)(l))),t.value="",O.a.post("http://localhost:8000/message/create",n,{withCredentials:!0}).then((function(e){return e})).catch((function(e){return console.log(e.response)}))}(e)},children:"Submit"})})}),Object(G.a)(t,"style",{marginBottom:"40px"}),t))]})]})}),Object(x.jsx)(le,{open:pe,caller:ce,setCallOpen:me})]})};var de=function(){var e=Object(a.useState)("Guest-"+Math.random().toString(36).slice(2)),t=Object(s.a)(e,2),n=(t[0],t[1]),o=Object(a.useState)(!1),r=Object(s.a)(o,2),c=r[0],i=r[1];return Object(x.jsx)("div",{className:"App",children:Object(x.jsx)(W.a,{children:Object(x.jsxs)(g.c,{children:[Object(x.jsx)(g.a,{path:"/chatroom/:id",children:Object(x.jsx)(ue,{newRoomOpen:c,setNewRoomOpen:i})}),Object(x.jsx)(g.a,{path:"/",children:Object(x.jsx)(Y,{setUserName:n,newRoomOpen:c,setNewRoomOpen:i})})]})})})},je=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,301)).then((function(t){var n=t.getCLS,a=t.getFID,o=t.getFCP,r=t.getLCP,s=t.getTTFB;n(e),a(e),o(e),r(e),s(e)}))};r.a.render(Object(x.jsx)(de,{}),document.getElementById("root")),je()}},[[223,1,2]]]);
//# sourceMappingURL=main.f9d7f132.chunk.js.map