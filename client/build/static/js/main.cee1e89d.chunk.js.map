{"version":3,"sources":["components/NavBar.jsx","components/NavDrawer.jsx","components/LoginDialog.jsx","components/TitleText.jsx","components/Greeting.jsx","components/RegisterDialog.jsx","components/CreateRoom.jsx","views/Dashboard.jsx","components/NameMenu.jsx","components/VideoSquare.jsx","components/CallDialog.jsx","views/Chatroom.jsx","App.js","reportWebVitals.js","index.js"],"names":["NavBar","props","history","useHistory","goHome","e","preventDefault","push","Box","sx","flexGrow","AppBar","position","Toolbar","IconButton","onClick","setOpen","open","axios","get","Cookies","withCredentials","then","user","setUserRooms","data","rooms","catch","err","console","log","handleDrawerClick","size","edge","color","mr","Typography","variant","component","pageHeader","FormGroup","FormControlLabel","style","fontFamily","paddingTop","marginRight","control","Switch","defaultChecked","checked","darkMode","onChange","setDarkMode","label","isLoggedIn","dashboard","Button","setLoggedIn","response","handleLogoutClick","setRegisterOpen","registerOpen","handleRegisterClick","setLoginOpen","loginOpen","handleLoginClick","marginLeft","NavDrawer","close","handleRoomLink","roomId","Drawer","anchor","elevation","onClose","margin","setNewRoomOpen","handleAddOpen","Divider","List","userRooms","map","room","idx","isDm","roomName","ListItem","Link","underline","_id","host","users","LoginDialog","useState","email","password","info","setInfo","error","setError","Dialog","DialogContent","DialogTitle","DialogContentText","TextField","autoFocus","id","type","value","target","DialogActions","post","res","setCount","count","handleSubmit","TitleText","height","steps","loop","wrapper","Greeting","roomCode","setRoomCode","noRoom","setNoRoom","handleSnackClose","Paper","padding","minWidth","backgroundColor","borderRadius","disabled","placeholder","payload","userName","put","undefined","onSubmit","marginTop","Snackbar","message","RegisterDialog","confirmPassword","setUser","errors","setErrors","display","flexFlow","justifyContent","helperText","maxWidth","handleClose","errorObj","Object","entries","handleRegister","CreateRoom","setRoomName","newRoomOpen","fullWidth","Dashboard","setIsLoggedIn","useEffect","setUserName","NameMenu","anchorEl","setAnchorEl","snack","setSnack","Boolean","handleDm","targetUser","length","Math","random","toString","slice","socket","emit","Chip","clickable","event","currentTarget","MenuListProps","MenuItem","userInfo","caller","VideoSquare","constraints","video","width","audio","configuration","iceServers","urls","url","credential","username","roomInfo","setRoomId","effect","setEffect","effectValue","setEffectValue","remoteEffect","setRemoteEffect","remoteEffectValue","setRemoteEffectValue","handleCall","a","localVid","document","getElementById","navigator","mediaDevices","getUserMedia","stream","srcObject","localStream","rtcPeerConnection","RTCPeerConnection","remoteStream","setLocalStream","addLocalTracks","getTracks","forEach","track","addTrack","createOffer","sessionDescription","setLocalDescription","sdp","createAnswer","setRemoteStream","streams","sendIceCandidate","candidate","sdpMLineIndex","on","ontrack","onicecandidate","setRemoteDescription","RTCSessionDescription","RTCIceCandidate","addIceCandidate","minHeight","maxHeight","overflowY","alignItems","flexDirection","autoPlay","preload","WebkitFilter","muted","Grid","container","spacing","item","xs","Select","inputProps","min","max","step","InputLabelProps","shrink","CallDialog","io","setCallOpen","setTimeout","handleAccept","Chatroom","Item","styled","theme","typography","body2","textAlign","palette","text","secondary","allMessages","setAllMessages","setRoomInfo","setCaller","callOpen","useParams","messageBox","messageObj","disconnect","connect","messages","reverse","Container","xlg","lg","md","sm","Stack","direction","index","createdAt","Date","toLocaleString","focused","multiline","onKeyPress","key","maxRows","InputProps","endAdornment","InputAdornment","marginBottom","App","themeOptions","createTheme","primary","main","background","default","paper","warning","h6","h1","button","fontSize","darkThemeOptions","success","ThemeProvider","className","CssBaseline","path","reportWebVitals","onPerfEntry","Function","getCLS","getFID","getFCP","getLCP","getTTFB","ReactDOM","render"],"mappings":"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","file":"static/js/main.cee1e89d.chunk.js","sourcesContent":["import React from 'react';\r\nimport AppBar from '@mui/material/AppBar';\r\nimport Box from '@mui/material/Box';\r\nimport Toolbar from '@mui/material/Toolbar';\r\nimport Typography from '@mui/material/Typography';\r\nimport Button from '@mui/material/Button';\r\nimport IconButton from '@mui/material/IconButton';\r\nimport MenuIcon from '@mui/icons-material/Menu';\r\nimport axios from 'axios';\r\nimport Cookies from 'js-cookie';\r\nimport { useHistory } from 'react-router';\r\nimport { Switch, FormGroup, FormControlLabel } from '@mui/material';\r\n\r\nconst NavBar = (props) => {\r\n\r\n    const history = useHistory();\r\n\r\n    const handleDrawerClick = (e) => {\r\n        e.preventDefault();\r\n        props.setOpen(props.open ? false : true);\r\n        axios.get('http://localhost:8000/api/user/name/' + Cookies.get('userName'), { withCredentials: true })\r\n            .then(user => {\r\n                props.setUserRooms(user.data.user.rooms);\r\n            })\r\n            .catch(err => console.log(err));\r\n    }\r\n\r\n    const handleLoginClick = (e) => {\r\n        e.preventDefault();\r\n        props.setLoginOpen(props.loginOpen ? false : true);\r\n    };\r\n\r\n    const handleRegisterClick = (e) => {\r\n        e.preventDefault();\r\n        props.setRegisterOpen(props.registerOpen ? false : true);\r\n    };\r\n\r\n    const handleLogoutClick = (e) => {\r\n        e.preventDefault();\r\n        axios.get('http://localhost:8000/api/user/logout', { withCredentials: true })\r\n            .then(() => {\r\n                props.setLoggedIn(false);\r\n                history.push('/');\r\n            })\r\n            .catch(err => console.log(err.response));\r\n    };\r\n\r\n    const goHome = (e) => {\r\n        e.preventDefault();\r\n        history.push('/');\r\n    };\r\n\r\n    const handleSwitch = (e) => {\r\n        if (props.darkMode) {\r\n            props.setDarkMode(false);\r\n        } else {\r\n            props.setDarkMode(true);\r\n        }\r\n    }\r\n\r\n    return (\r\n        <Box sx={{ flexGrow: 1 }}>\r\n            <AppBar position=\"static\">\r\n                <Toolbar>\r\n                    <IconButton\r\n                        onClick={e => handleDrawerClick(e)}\r\n                        size=\"large\"\r\n                        edge=\"start\"\r\n                        color=\"inherit\"\r\n                        aria-label=\"menu\"\r\n                        sx={{ mr: 2 }}\r\n                    >\r\n                        <MenuIcon />\r\n                    </IconButton>\r\n                    <Typography variant=\"h6\" component=\"div\" sx={{ flexGrow: 1 }}>\r\n                        {props.pageHeader}\r\n                    </Typography>\r\n                    <FormGroup>\r\n                        <FormControlLabel style={{fontFamily: 'Open Sans', paddingTop: '1px', marginRight: '30px'}} \r\n                        control={<Switch color='secondary' defaultChecked={false}\r\n                        checked={props.darkMode} onChange={e => handleSwitch(e)} />} label=\"DARKMODE\" />\r\n                    </FormGroup>\r\n                    {props.isLoggedIn ? (\r\n                        <>\r\n                            {props.dashboard ? '' : <Button color='inherit' onClick={e => goHome(e)} style={{marginRight: '30px'}}>Home</Button>}\r\n                            <Button color=\"inherit\" onClick={e => handleLogoutClick(e)}>Logout</Button>\r\n                        </>\r\n                    ) : (\r\n                        <>\r\n                            {props.dashboard ? '' : <Button color='inherit' onClick={e => goHome(e)}>Home</Button>}\r\n                            <Button color=\"inherit\" onClick={e => handleRegisterClick(e)}>Register</Button>\r\n                            <Button color=\"inherit\" onClick={e => handleLoginClick(e)} style={{marginLeft: '50px'}}>Login</Button>\r\n                        </>)}\r\n                  \r\n                </Toolbar>\r\n            </AppBar>\r\n        </Box>\r\n    );\r\n};\r\n\r\nexport default NavBar;","import React from 'react';\r\nimport { Divider, Drawer, List, ListItem, Link } from '@mui/material';\r\nimport { IconButton } from '@mui/material'; \r\nimport AddCircleOutlineIcon from '@mui/icons-material/AddCircleOutline';\r\nimport { useHistory } from 'react-router';\r\nimport Cookies from 'js-cookie';\r\n\r\nconst NavDrawer = (props) => {\r\n\r\n    const history = useHistory();\r\n\r\n    const close = () => {\r\n        props.setOpen(false);\r\n    };\r\n\r\n    const handleAddOpen = (e) => {\r\n        e.preventDefault();\r\n        props.setNewRoomOpen(true);\r\n    };\r\n\r\n    const handleRoomLink = (e, roomId) => {\r\n        e.preventDefault();\r\n        close();\r\n        history.push('/chatroom/' + roomId);\r\n    };\r\n\r\n    return (\r\n        <Drawer \r\n            anchor='left'\r\n            elevation={20}\r\n            open={props.open}\r\n            onClose={close}\r\n        >\r\n            <h1 style={{margin: '30px 80px'}}>Your Rooms\r\n                {props.isLoggedIn ? \r\n                     (\r\n                    <IconButton size='large' variant='contained' color='primary'\r\n                        onClick={e => handleAddOpen(e)}>\r\n                        <AddCircleOutlineIcon />\r\n                    </IconButton>\r\n                    ) : null}\r\n            </h1>\r\n            <Divider />\r\n            <List>\r\n                <h4 style={{margin: '10px'}}>Direct Messages</h4>\r\n                {props.userRooms.map((room, idx) => {\r\n                    if (room === null) {\r\n                        return;\r\n                    } else if (room.isDm) {\r\n                        if (room.roomName === 'Looks lonely!') {\r\n                            return (\r\n                                <ListItem key={idx}>\r\n                                    <small>Looks lonely!</small>\r\n                                </ListItem>\r\n                            )\r\n                        }\r\n                        return (\r\n                            <ListItem key={idx}>\r\n                                <Link underline='hover' component='button' variant='h6'\r\n                                onClick={e => handleRoomLink(e, room._id)}>{room.host === Cookies.get('userName') ? room.users[1] : room.host}</Link>\r\n                            </ListItem>\r\n                        )\r\n                    } else {\r\n                        return '';\r\n                    }\r\n                })}\r\n            </List>\r\n            <Divider />\r\n            <List>\r\n                <h4 style={{margin: '10px'}}>Chat Rooms</h4>\r\n                {props.userRooms.map((room, idx) => {\r\n                    if (room === null) {\r\n                        return;\r\n                    } else if (!room.isDm) {\r\n                        if (room.roomName === 'No friends?') {\r\n                            return (\r\n                                <ListItem key={idx}>\r\n                                    <small>No friends?</small>\r\n                                </ListItem>\r\n                            )\r\n                        }\r\n                        return (\r\n                            <ListItem key={idx}>\r\n                                <Link underline='hover' component='button' variant='h6'\r\n                                onClick={e => handleRoomLink(e, room._id)}>{room.roomName}</Link>\r\n                            </ListItem>\r\n                        )\r\n                    } else {\r\n                        return '';\r\n                    }\r\n                })}\r\n            </List>\r\n        </Drawer>\r\n    );\r\n};\r\n\r\nexport default NavDrawer;","import React, { useState } from 'react';\r\nimport Button from '@mui/material/Button';\r\nimport TextField from '@mui/material/TextField';\r\nimport Dialog from '@mui/material/Dialog';\r\nimport DialogActions from '@mui/material/DialogActions';\r\nimport DialogContent from '@mui/material/DialogContent';\r\nimport DialogContentText from '@mui/material/DialogContentText';\r\nimport DialogTitle from '@mui/material/DialogTitle';\r\nimport axios from 'axios';\r\n\r\nconst LoginDialog = (props) => {\r\n\r\n    const [info, setInfo] = useState({ email: '', password: '' });\r\n    const [error, setError] = useState('');\r\n\r\n    const close = () => {\r\n        setInfo({ email: '', password: '' });\r\n        props.setLoginOpen(false);\r\n    };\r\n\r\n    const handleSubmit = (e) => {\r\n        e.preventDefault();\r\n        axios.post('http://localhost:8000/api/user/login', info, { withCredentials: true })\r\n            .then(res => {\r\n                props.setCount(props.count + 1);\r\n                props.setLoginOpen(false);\r\n            })\r\n            .catch(err => {\r\n                setError(err.response.data);\r\n            })\r\n    }\r\n\r\n    return (\r\n        <Dialog open={props.loginOpen} onClose={close}>\r\n            <DialogContent>\r\n                <DialogTitle>Login</DialogTitle>\r\n                <DialogContentText>\r\n                    Login with your email and password to begin.<br></br>\r\n                    <small style={{color: 'red'}}>{error}</small>\r\n                </DialogContentText>\r\n                <TextField\r\n                    autoFocus\r\n                    margin='dense'\r\n                    id='email'\r\n                    label='Email Address'\r\n                    type='email'\r\n                    variant='standard'\r\n                    value={info.email}\r\n                    onChange={e => setInfo({ ...info, email: e.target.value })}\r\n                />\r\n                <TextField\r\n                    margin='dense'\r\n                    id='password'\r\n                    label='Password'\r\n                    type='password'\r\n                    variant='standard'\r\n                    value={info.password}\r\n                    onChange={e => setInfo({ ...info, password: e.target.value })}\r\n                    style={{marginLeft: '10px'}}\r\n                />\r\n            </DialogContent>\r\n            <DialogActions>\r\n                <Button onClick={close}>Cancel</Button>\r\n                <Button onClick={e => handleSubmit(e)} variant='contained'>Submit</Button>\r\n            </DialogActions>\r\n        </Dialog>\r\n    );\r\n};\r\n\r\nexport default LoginDialog;","import { Typography } from '@mui/material';\r\nimport React, { useEffect } from 'react'\r\nimport Typical from 'react-typical'\r\n\r\nconst TitleText = () => {\r\n\r\n    return (\r\n        <Typography variant='h1' style={{height: '150px', margin: '50px 0'}}>\r\n            <Typical \r\n                steps={['Hi', 1000, 'Welcome to viddy chat', 2000]}\r\n                loop={1}\r\n                wrapper='p'\r\n            />\r\n        </Typography>);\r\n};\r\n\r\nexport default TitleText;","import React, { useState } from 'react';\r\nimport TextField from '@mui/material/TextField';\r\nimport { Button, Paper } from '@mui/material';\r\nimport { useHistory } from 'react-router';\r\nimport axios from 'axios';\r\nimport Cookies from 'js-cookie';\r\nimport { Snackbar } from '@mui/material';\r\nimport TitleText from './TitleText';\r\n\r\nconst Greeting = (props) => {\r\n\r\n    const [roomCode, setRoomCode] = useState('');\r\n    const [noRoom, setNoRoom] = useState(false);\r\n    const [error, setError] = useState('');\r\n    const history = useHistory();\r\n\r\n    const onSubmit = (e) => {\r\n        e.preventDefault();\r\n        console.log(roomCode);\r\n        axios.get('http://localhost:8000/room/name/' + roomCode, { withCredentials: true })\r\n            .then(room => {\r\n                room = room.data.room;\r\n                const payload = { room: room, userName: Cookies.get('userName') };\r\n                console.log(payload);\r\n                axios.put('http://localhost:8000/api/user/addroom', payload, { withCredentials: true })\r\n                    .then(() => history.push('/chatroom/' + room._id))\r\n                    .catch(err => {\r\n                        if (err.response.data.error === undefined) {\r\n                            setError('You have to be logged in to do that!');\r\n                        } else {\r\n                            setError(err.response.data.error);\r\n                        }\r\n                        setRoomCode('');\r\n                        setNoRoom(true);\r\n                    });\r\n            })\r\n            .catch(error => console.log(error));\r\n    };\r\n\r\n    const handleSnackClose = () => {\r\n        setError('');\r\n        setNoRoom(false);\r\n    }\r\n\r\n    return (\r\n        <Paper elevation={4} style={{margin: '50px', padding: '100px 0'}}>\r\n            <TitleText />\r\n            <TextField \r\n                style={{minWidth: '400px', backgroundColor: 'rgba(166, 212, 250, 0.2)', borderRadius: '4px'}}\r\n                type='text'\r\n                value={roomCode}\r\n                onChange={e => setRoomCode(e.target.value)}\r\n                disabled={props.isLoggedIn ? false : true}\r\n                placeholder={props.isLoggedIn ? 'Enter a Room Name' : 'Login or Signup!'}\r\n            />\r\n            <Button\r\n                onClick={e => onSubmit(e)}\r\n                variant='contained'\r\n                style={{marginLeft: '15px', height: '53px', marginTop: '1px'}}\r\n                disabled={props.isLoggedIn ? false : true}\r\n            >Enter</Button>\r\n            <Snackbar message='You are already in this room!' \r\n                open={noRoom}\r\n                onClose={handleSnackClose} />\r\n            <Snackbar message={error}\r\n                open={noRoom}\r\n                onClose={handleSnackClose} />\r\n        </Paper>\r\n    );\r\n};\r\n\r\nexport default Greeting;","import React, { useState } from 'react';\r\nimport Button from '@mui/material/Button';\r\nimport TextField from '@mui/material/TextField';\r\nimport Dialog from '@mui/material/Dialog';\r\nimport DialogActions from '@mui/material/DialogActions';\r\nimport DialogContent from '@mui/material/DialogContent';\r\nimport DialogContentText from '@mui/material/DialogContentText';\r\nimport DialogTitle from '@mui/material/DialogTitle';\r\nimport axios from 'axios';\r\n\r\nconst RegisterDialog = (props) => {\r\n\r\n    const [user, setUser] = useState({\r\n        userName: '',\r\n        email: '', \r\n        password: '',\r\n        confirmPassword: '',\r\n        rooms: [],\r\n    });\r\n    const [errors, setErrors] = useState({\r\n        email: '',\r\n        password: '',\r\n        userName: '',\r\n        confirmPassword: '',\r\n    });\r\n\r\n    const close = () => {\r\n        props.setRegisterOpen(false);\r\n        setUser({\r\n            userName: '',\r\n            email: '', \r\n            password: '',\r\n            confirmPassword: '',\r\n        });\r\n    }\r\n\r\n    const handleClose = (e) => {\r\n        e.preventDefault();\r\n        props.setRegisterOpen(false);\r\n    };\r\n\r\n    const handleRegister = (e) => {\r\n        e.preventDefault();\r\n        axios.post('http://localhost:8000/api/user/register', user, { withCredentials: true })\r\n            .then(res => {\r\n                props.setCount(props.count + 1);\r\n                close();\r\n            })\r\n            .catch(err => {\r\n                var errorObj = {};\r\n                var defaultErrors = {\r\n                    email: '',\r\n                    password: '',\r\n                    userName: '',\r\n                    confirmPassword: '',\r\n                };\r\n                for (const [error, message] of Object.entries(err.response.data.error.errors)) {\r\n                    errorObj[error] = message.message;\r\n                };\r\n                setErrors({...defaultErrors, ...errorObj});\r\n            });\r\n    };\r\n\r\n    return (\r\n        <Dialog open={props.registerOpen} onClose={close}>\r\n            <DialogContent>\r\n                <DialogTitle>Get Registered</DialogTitle>\r\n                    <DialogContentText>\r\n                        Register below to get started and create your own rooms!\r\n                    </DialogContentText>\r\n                    <div style={{display: 'flex', flexFlow: 'row nowrap', justifyContent: 'space-evenly'}}>\r\n                        <TextField\r\n                            error={errors.userName === '' ? false : true}\r\n                            helperText={errors.userName === '' ? '' : errors.userName}\r\n                            autoFocus\r\n                            margin='dense'\r\n                            id='userName'\r\n                            label='User Name'\r\n                            type='text'\r\n                            variant='standard'\r\n                            value={user.userName}\r\n                            onChange={e => setUser({ ...user, userName: e.target.value })}\r\n                        />\r\n                        <TextField\r\n                            error={errors.email === '' ? false : true}\r\n                            helperText={errors.email === '' ? '' : errors.email}\r\n                            margin='dense'\r\n                            id='email'\r\n                            label='Email'\r\n                            type='email'\r\n                            variant='standard'\r\n                            value={user.email}\r\n                            onChange={e => setUser({...user, email: e.target.value})}\r\n                        />\r\n                    </div>\r\n                    <div style={{display: 'flex', flexFlow: 'row nowrap', justifyContent: 'space-evenly'}}>\r\n                        <TextField\r\n                            error={errors.password === '' ? false : true}\r\n                            helperText={errors.password === '' ? '' : errors.password}\r\n                            margin='dense'\r\n                            id='password'\r\n                            label='Password'\r\n                            type='password'\r\n                            variant='standard'\r\n                            value={user.password}\r\n                            onChange={e => setUser({...user, password: e.target.value})}\r\n                            style={{maxWidth: '200px'}}\r\n                        />\r\n                        <TextField\r\n                            error={errors.confirmPassword === '' ? false : true}\r\n                            helperText={errors.confirmPassword === '' ? '' : errors.confirmPassword}\r\n                            margin='dense'\r\n                            id='confirmPassword'\r\n                            label='Confirm Password'\r\n                            type='password'\r\n                            variant='standard'\r\n                            value={user.confirmPassword}\r\n                            onChange={e => setUser({...user, confirmPassword: e.target.value})}\r\n                        />\r\n                    </div>\r\n            </DialogContent>\r\n            <DialogActions>\r\n                <Button onClick={e => handleClose(e)}>Cancel</Button>\r\n                <Button variant='contained' onClick={e => handleRegister(e)}>Register</Button>\r\n            </DialogActions>\r\n        </Dialog>\r\n    );\r\n};\r\n\r\nexport default RegisterDialog;","import React, { useState } from 'react';\r\nimport Button from '@mui/material/Button';\r\nimport TextField from '@mui/material/TextField';\r\nimport Dialog from '@mui/material/Dialog';\r\nimport DialogActions from '@mui/material/DialogActions';\r\nimport DialogContent from '@mui/material/DialogContent';\r\nimport DialogContentText from '@mui/material/DialogContentText';\r\nimport DialogTitle from '@mui/material/DialogTitle';\r\nimport axios from 'axios';\r\nimport Cookies from 'js-cookie';\r\nimport { useHistory } from 'react-router';\r\n\r\nconst CreateRoom = (props) => {\r\n\r\n    const [roomName, setRoomName] = useState('');\r\n    const [error, setError] = useState('');\r\n    const history = useHistory();\r\n\r\n    const close = () => {\r\n        props.setNewRoomOpen(false);\r\n    };\r\n\r\n    const handleSubmit = (e) => {\r\n        e.preventDefault();\r\n        axios.get('http://localhost:8000/api/user/name/' + Cookies.get('userName'))\r\n            .then(user => {\r\n                axios.post('http://localhost:8000/room/create', { \r\n                    roomName: roomName, \r\n                    users: [user.data.user._id], \r\n                    isDm: false, \r\n                    host: user.data.user}, \r\n                    { withCredentials: true })\r\n                .then(room => {\r\n                    axios.put('http://localhost:8000/api/user/addroom', { room: room.data.room, userName: Cookies.get('userName') }, { withCredentials: true })\r\n                        .then(rooms => console.log(rooms))\r\n                        .catch(err => console.log(err.response));\r\n                    history.push('/chatroom/'+room.data.room._id);\r\n                    close();\r\n                    setRoomName('');\r\n                    props.setOpen(false);\r\n                })\r\n                .catch(err => setError(err.response))\r\n            })\r\n            .catch(err => console.log(err));\r\n    };\r\n\r\n    return (\r\n        <Dialog open={props.newRoomOpen} onClose={close}>\r\n            <DialogContent>\r\n                <DialogTitle>Create a Room</DialogTitle>\r\n                <DialogContentText>\r\n                    Create a new chatroom to talk with your pals!<br></br>\r\n                    <small style={{color: 'red'}}></small>\r\n                </DialogContentText>\r\n                <TextField\r\n                    error={error === '' ? false : true}\r\n                    helperText={error === '' ? '' : error.data}\r\n                    fullWidth\r\n                    autoFocus\r\n                    margin='dense'\r\n                    id='roomName'\r\n                    label='Room Name'\r\n                    type='text'\r\n                    variant='standard'\r\n                    value={roomName}\r\n                    onChange={e => setRoomName(e.target.value)}\r\n                />\r\n            </DialogContent>\r\n            <DialogActions>\r\n                <Button onClick={close}>Cancel</Button>\r\n                <Button variant='contained' onClick={e => handleSubmit(e)}>Submit</Button>\r\n            </DialogActions>\r\n        </Dialog>\r\n    );\r\n};\r\n\r\nexport default CreateRoom;","import React, { useState, useEffect } from 'react';\r\nimport NavBar from '../components/NavBar';\r\nimport NavDrawer from '../components/NavDrawer';\r\nimport LoginDialog from '../components/LoginDialog';\r\nimport Greeting from '../components/Greeting';\r\nimport RegisterDialog from '../components/RegisterDialog';\r\nimport axios from 'axios';\r\nimport CreateRoom from '../components/CreateRoom';\r\n\r\nconst Dashboard = (props) => {\r\n\r\n    const [open, setOpen] = useState(false);\r\n    const [loginOpen, setLoginOpen] = useState(false);\r\n    const [registerOpen, setRegisterOpen] = useState(false);\r\n    const [isLoggedIn, setIsLoggedIn] = useState(false);\r\n    const [count, setCount] = useState(0);\r\n    const [userRooms, setUserRooms] = useState([{\r\n        roomName: 'Looks lonely!', isDm: true, host: 'Looks lonely!',\r\n    }, {\r\n        roomName: 'No friends?', isDm: false, host: 'NaN',\r\n    }]);\r\n\r\n    const whatLinks = () => {\r\n        axios.get('http://localhost:8000/api/user/isloggedin', { withCredentials : true })\r\n            .then(() => {\r\n                setIsLoggedIn(true);\r\n            })\r\n            .catch(setIsLoggedIn(false));\r\n    }\r\n\r\n    useEffect(() => {\r\n        whatLinks();\r\n    }, [count]);\r\n\r\n    return (\r\n        <>\r\n            <NavBar pageHeader={''} setOpen={setOpen} open={open} setLoginOpen={setLoginOpen} loginOpen={loginOpen} \r\n                registerOpen={registerOpen} setRegisterOpen={setRegisterOpen} isLoggedIn={isLoggedIn}\r\n                count={count} setCount={setCount} userRooms={userRooms} setUserRooms={setUserRooms}  setLoggedIn={setIsLoggedIn}\r\n                dashboard={true} darkMode={props.darkMode} setDarkMode={props.setDarkMode} />\r\n            <NavDrawer open={open} setOpen={setOpen} isLoggedIn={isLoggedIn} \r\n                newRoomOpen={props.newRoomOpen} setNewRoomOpen={props.setNewRoomOpen}\r\n                userRooms={userRooms} setUserRooms={setUserRooms} />\r\n            <CreateRoom newRoomOpen={props.newRoomOpen} setNewRoomOpen={props.setNewRoomOpen} />\r\n            <LoginDialog loginOpen={loginOpen} setLoginOpen={setLoginOpen} count={count} setCount={setCount}\r\n                setUserName={props.setUserName} />\r\n            <RegisterDialog registerOpen={registerOpen} setRegisterOpen={setRegisterOpen}\r\n                count={count} setCount={setCount} />\r\n            <Greeting isLoggedIn={isLoggedIn} />\r\n        </>\r\n        \r\n    );\r\n};\r\n\r\nexport default Dashboard;","import React, { useState } from 'react';\r\nimport Chip from '@mui/material/Chip';\r\nimport Menu from '@mui/material/Menu';\r\nimport MenuItem from '@mui/material/MenuItem';\r\nimport axios from 'axios';\r\nimport Cookies from 'js-cookie';\r\nimport { useHistory } from 'react-router';\r\nimport { Snackbar } from '@mui/material';\r\n\r\nconst NameMenu = (props) => {\r\n\r\n    const [anchorEl, setAnchorEl] = useState(null);\r\n    const [snack, setSnack] = useState(false);\r\n    const open = Boolean(anchorEl);\r\n    const history = useHistory();\r\n\r\n    const handleClick = (event) => {\r\n      setAnchorEl(event.currentTarget);\r\n    };\r\n\r\n    const handleClose = () => {\r\n      setAnchorEl(null);\r\n    };\r\n\r\n    const handleSnackClose = () => {\r\n        setSnack(false);\r\n    };\r\n\r\n    const handleDm = (targetUser) => {\r\n        axios.get('http://localhost:8000/room/dmroom/' + Cookies.get('userName') + '/' + targetUser)\r\n            .then(rooms => {\r\n                if (rooms.data.room.length === 0) {\r\n                axios.post('http://localhost:8000/room/create', { \r\n                    roomName: Math.random().toString(36).slice(2), \r\n                    users: [Cookies.get('userName'), targetUser], \r\n                    isDm: true,\r\n                    host: Cookies.get('userName'),\r\n                    })\r\n                    .then(room => {\r\n                        console.log();\r\n                        axios.put('http://localhost:8000/api/user/addroom/', { room: room.data.room, userName: Cookies.get('userName') }, { withCredentials: true })\r\n                            .then(rooms => console.log(rooms))\r\n                            .catch(err => console.log(err.response));\r\n\r\n                        axios.put('http://localhost:8000/api/user/addroom/', { room: room.data.room, userName: targetUser }, { withCredentials: true })\r\n                            .then(rooms => console.log(rooms))\r\n                            .catch(err => console.log(err.response));\r\n\r\n                        history.push('/chatroom/' + room.data.room._id);\r\n                    })\r\n                    .catch(err => console.log(err.response));\r\n\r\n                props.socket.emit('sendDm', targetUser)\r\n                } else {\r\n                    setSnack(true);\r\n                    handleClose();\r\n                    history.push('/chatroom/' + rooms.data.room[0]._id);\r\n                }\r\n            })\r\n            .catch(err => console.log(err));\r\n    };\r\n\r\n    const handleCall = (targetUser) => {\r\n        handleDm(targetUser);\r\n        axios.get('http://localhost:8000/api/user/name/' + targetUser, { withCredentials: true })\r\n            .then(user => {\r\n                const userInfo = user.data.user;\r\n                props.socket.emit('start_call', { userInfo: userInfo, caller: Cookies.get('userName') });\r\n\r\n            })\r\n            .catch(err => console.log(err));\r\n    }\r\n\r\n    return (\r\n        <div>\r\n            <Chip label={props.userName} \r\n                component=\"a\" \r\n                aria-controls=\"basic-menu\"\r\n                aria-haspopup=\"true\"\r\n                aria-expanded={open ? 'true' : undefined}\r\n                clickable \r\n                onClick={handleClick} />\r\n            <Menu\r\n                id=\"basic-menu\"\r\n                anchorEl={anchorEl}\r\n                open={open}\r\n                onClose={handleClose}\r\n                MenuListProps={{\r\n                'aria-labelledby': 'basic-button',\r\n                }}\r\n            >\r\n                <MenuItem onClick={() => handleDm(props.userName)}>Direct message</MenuItem>\r\n                <MenuItem onClick={() => handleCall(props.userName)}>Call</MenuItem>\r\n            </Menu>\r\n            <Snackbar message='You already have a DM with this person!' \r\n                open={snack}\r\n                onClose={handleSnackClose} />\r\n        </div>\r\n    );\r\n};\r\n\r\nexport default NameMenu;","import { Button, Grid, MenuItem, Paper, Select } from '@mui/material';\r\nimport React, { useState, useEffect } from 'react';\r\nimport { TextField } from '@mui/material';\r\nimport { Box } from '@mui/system';\r\n\r\nconst VideoSquare = (props) => {\r\n\r\n    const constraints = {\r\n        video: { width: 480, height: 320},\r\n        audio: true,\r\n    };\r\n    const configuration = { iceServers: [\r\n        { urls: 'stun:stun.l.google.com:19302' },\r\n        { urls: 'stun:stun1.l.google.com:19302' },\r\n        {\r\n            url: 'turn:numb.viagenie.ca',\r\n            credential: 'muazkh',\r\n            username: 'webrtc@live.com'\r\n        },\r\n        {\r\n            url: 'turn:192.158.29.39:3478?transport=udp',\r\n            credential: 'JZEOEt2V3Qb0y27GRntt2u2PAYA=',\r\n            username: '28224511:1379330808'\r\n        },\r\n        {\r\n            url: 'turn:192.158.29.39:3478?transport=tcp',\r\n            credential: 'JZEOEt2V3Qb0y27GRntt2u2PAYA=',\r\n            username: '28224511:1379330808'\r\n        },\r\n        {\r\n            url: 'turn:turn.bistri.com:80',\r\n            credential: 'homeo',\r\n            username: 'homeo'\r\n         },\r\n         {\r\n            url: 'turn:turn.anyfirewall.com:443?transport=tcp',\r\n            credential: 'webrtc',\r\n            username: 'webrtc'\r\n        },\r\n    ]};\r\n    const [roomId, setRoomId] = useState(props.roomInfo._id);\r\n    const [effect, setEffect] = useState('');\r\n    const [effectValue, setEffectValue] = useState(1);\r\n    const [remoteEffect, setRemoteEffect] = useState('');\r\n    const [remoteEffectValue, setRemoteEffectValue] = useState(1);\r\n\r\n    const handleChange = (event) => {\r\n        setEffectValue(1);\r\n        setEffect(event.target.value);\r\n        props.socket.emit('effectChange', {\r\n            roomId: roomId,\r\n            effect: event.target.value,\r\n        });\r\n    };\r\n\r\n    const handleValueChange = (event) => {\r\n        setEffectValue(event.target.value);\r\n        props.socket.emit('effectValueChange', { \r\n            roomId: roomId, \r\n            effectValue: effectValue \r\n        });\r\n    };\r\n\r\n    const handleCall = async (e) => {\r\n        e.preventDefault();\r\n        var localVid = document.getElementById('localVid');\r\n        try {\r\n            var stream = await navigator.mediaDevices.getUserMedia(constraints)\r\n            localVid.srcObject = stream;\r\n        } catch (err) {\r\n            console.log('Error getting local media.', err);\r\n        };\r\n        props.socket.emit('call', roomId);\r\n    }\r\n\r\n    useEffect(() => {\r\n        var rtcPeerConnection = new RTCPeerConnection(configuration);\r\n        var localStream;\r\n        const remoteStream = document.getElementById('remoteVid');\r\n        setRoomId(props.roomInfo._id);\r\n\r\n        props.socket.on('call', async () => {\r\n            await setLocalStream(constraints);\r\n            console.log('client call');\r\n            rtcPeerConnection.ontrack = setRemoteStream;\r\n            rtcPeerConnection.onicecandidate = sendIceCandidate;\r\n            await createOffer(rtcPeerConnection);\r\n            console.log('Client call event end.');\r\n        });\r\n\r\n        props.socket.on('offer', async (event) => {\r\n            console.log('Client offer event start.');\r\n            await setLocalStream(constraints);\r\n            rtcPeerConnection.ontrack = setRemoteStream;\r\n            await rtcPeerConnection.setRemoteDescription(new RTCSessionDescription(event));\r\n            rtcPeerConnection.onicecandidate = sendIceCandidate;                \r\n            await createAnswer(rtcPeerConnection);\r\n            console.log('Client offer event end.');\r\n            \r\n        });\r\n\r\n        props.socket.on('answer', (event) => {\r\n            console.log('Client answer event start.');\r\n            rtcPeerConnection.setRemoteDescription(new RTCSessionDescription(event));\r\n            console.log('Client answer event end.');\r\n        });\r\n\r\n        props.socket.on('ice_candidate', (event) => {\r\n            console.log('Client ice candidate event start.');\r\n            var candidate = new RTCIceCandidate({\r\n                sdpMLineIndex: event.label,\r\n                candidate: event.candidate,\r\n            });\r\n            console.log(candidate);\r\n            rtcPeerConnection.addIceCandidate(candidate);\r\n        });\r\n\r\n        props.socket.on('effectChange', (effect) => {\r\n            setRemoteEffect(effect);\r\n            setRemoteEffectValue(1);\r\n        });\r\n\r\n        props.socket.on('effectValueChange', (effectValue) => {\r\n            setRemoteEffectValue(effectValue);\r\n        })\r\n\r\n        // FUNCTIONS BELOW\r\n\r\n        async function setLocalStream(constraints) {\r\n            let stream;\r\n            let localVid = document.getElementById('localVid');\r\n            try {\r\n                stream = await navigator.mediaDevices.getUserMedia(constraints)\r\n                localStream = stream;\r\n                localVid.srcObject = stream;\r\n            } catch (err) {\r\n                console.log('Error getting local media.', err);\r\n            };\r\n            addLocalTracks(rtcPeerConnection);\r\n            localVid.srcObject = stream;\r\n        };\r\n\r\n        function addLocalTracks(rtcPeerConnection) {\r\n            console.log(localStream);\r\n            localStream.getTracks().forEach((track) => {\r\n                rtcPeerConnection.addTrack(track, localStream);\r\n            });\r\n        };\r\n          \r\n        async function createOffer(rtcPeerConnection) {\r\n            let sessionDescription;\r\n            try {\r\n                sessionDescription = await rtcPeerConnection.createOffer();\r\n                rtcPeerConnection.setLocalDescription(sessionDescription);\r\n            } catch (error) {\r\n                console.error(error);\r\n            };\r\n          \r\n            props.socket.emit('offer', {\r\n                type: 'offer',\r\n                sdp: sessionDescription,\r\n                roomId,\r\n            });\r\n        };\r\n          \r\n        async function createAnswer(rtcPeerConnection) {\r\n            let sessionDescription;\r\n            try {\r\n                sessionDescription = await rtcPeerConnection.createAnswer();\r\n                rtcPeerConnection.setLocalDescription(sessionDescription);\r\n            } catch (error) {\r\n                console.error(error);\r\n            };\r\n          \r\n            props.socket.emit('answer', {\r\n                type: 'answer',\r\n                sdp: sessionDescription,\r\n                roomId,\r\n            });\r\n        };\r\n          \r\n        function setRemoteStream(event) {\r\n            remoteStream.srcObject = event.streams[0];\r\n            console.log(event);\r\n        };\r\n          \r\n        function sendIceCandidate(event) {\r\n            if (event.candidate) {\r\n                props.socket.emit('ice_candidate', {\r\n                    roomId,\r\n                    label: event.candidate.sdpMLineIndex,\r\n                    candidate: event.candidate.candidate,\r\n              });\r\n            };\r\n        };\r\n\r\n    }, []);\r\n\r\n    return (\r\n        <Paper \r\n            style={{minHeight: '65vh', minWidth: '300px',\r\n            maxHeight: '600px',\r\n            marginTop: '40px', overflowY: 'none', alignItems: 'space-around',\r\n            borderRadius: '10px', padding: '30px', display: 'flex', justifyContent: 'space-around',\r\n            flexDirection: 'column'}}\r\n        >\r\n            <video id='remoteVid' autoPlay preload='auto' style={{margin: '10px 0', borderRadius: '15px', \r\n                WebkitFilter: remoteEffect === 'blur' ? 'blur('+remoteEffectValue+'px)' :  \r\n                remoteEffect === 'grayscale' ? 'grayscale('+remoteEffectValue+')' : \r\n                remoteEffect === 'saturate' ? 'saturate('+remoteEffectValue+')' :\r\n                remoteEffect === 'negative' ? 'invert('+remoteEffectValue+')' : \r\n                remoteEffect === 'sepia' ? 'sepia('+remoteEffectValue+')' :\r\n                remoteEffect === 'contrast' ? 'contrast('+remoteEffectValue+')' : ''}}>\r\n            </video>\r\n\r\n            <video id='localVid' autoPlay preload='auto' muted\r\n                style={{margin: '10px 0', borderRadius: '15px', \r\n                WebkitFilter: effect === 'blur' ? 'blur('+effectValue+'px)' :  \r\n                effect === 'grayscale' ? 'grayscale('+effectValue+')' : \r\n                effect === 'saturate' ? 'saturate('+effectValue+')' :\r\n                effect === 'negative' ? 'invert('+effectValue+')' : \r\n                effect === 'sepia' ? 'sepia('+effectValue+')' :\r\n                effect === 'contrast' ? 'contrast('+effectValue+')' : ''}}\r\n            >\r\n            </video>\r\n            <Grid container spacing={3}>\r\n                <Grid item xs={9}>\r\n                    <Select\r\n                        style={{width: '100%'}}\r\n                        value={effect}\r\n                        onChange={handleChange}\r\n                        label='Effects'\r\n                        id='select-effects'\r\n                        variant='filled'\r\n                    >\r\n                        <MenuItem value='' defaultChecked>None</MenuItem>\r\n                        <MenuItem value='blur'>Blur</MenuItem>\r\n                        <MenuItem value='grayscale'>Black & White</MenuItem>\r\n                        <MenuItem value='saturate'>Saturate</MenuItem>\r\n                        <MenuItem value='negative'>Negative</MenuItem>\r\n                        <MenuItem value='contrast'>Contrast</MenuItem>\r\n                    </Select>\r\n                </Grid>\r\n                <Grid item xs={3}>\r\n                    <TextField\r\n                        id=\"standard-number\"\r\n                        value={effectValue}\r\n                        onChange={handleValueChange}\r\n                        label=\"Value\"\r\n                        type=\"number\"\r\n                        inputProps={{min: '0', max: '50', step: '0.1'}}\r\n                        InputLabelProps={{\r\n                            shrink: true,\r\n                        }}\r\n                        style={{width: '90%'}}\r\n                        variant=\"filled\"\r\n                    />\r\n                </Grid>\r\n            </Grid>\r\n            <Button onClick={e => handleCall(e)} variant='contained' color='secondary'>Call</Button>\r\n        </Paper>\r\n    );\r\n};\r\n\r\nexport default VideoSquare;","import React, { useState } from 'react';\r\nimport Button from '@mui/material/Button';\r\nimport Dialog from '@mui/material/Dialog';\r\nimport DialogActions from '@mui/material/DialogActions';\r\nimport DialogContent from '@mui/material/DialogContent';\r\nimport DialogContentText from '@mui/material/DialogContentText';\r\nimport DialogTitle from '@mui/material/DialogTitle';\r\nimport axios from 'axios';\r\nimport { useHistory } from 'react-router';\r\nimport Cookies from 'js-cookie';\r\nimport io from 'socket.io-client';\r\n\r\nconst CallDialog = (props) => {\r\n\r\n    const history = useHistory();\r\n    const [socket] = useState(() => io(':8000'));\r\n\r\n    const handleClose = (e) => {\r\n        e.preventDefault();\r\n        props.setCallOpen(false);\r\n    };\r\n\r\n    const handleAccept = (e) => {\r\n        e.preventDefault();\r\n        axios.get('http://localhost:8000/room/dmroom/' + props.caller + '/' + Cookies.get('userName'), { withCredentials: true })\r\n            .then(room => {\r\n                history.push('/chatroom/' + room.data.room[0]._id)\r\n                setTimeout(() => {\r\n                    socket.emit('call', room.data.room[0]._id);\r\n                }, 1000);\r\n            })\r\n            .catch(err => console.log(err));\r\n        props.setCallOpen(false);\r\n    };\r\n    \r\n    return (\r\n        <Dialog open={props.open} onClose={e => handleClose(e)}>\r\n            <DialogTitle>You're recieving a call from {props.caller}!</DialogTitle>\r\n            <DialogContent>\r\n                <DialogContentText>\r\n                    Answer it or decline it, the choice is yours.\r\n                </DialogContentText>\r\n            </DialogContent>\r\n            <DialogActions style={{margin: '0 auto'}}>\r\n                <Button onClick={e => handleClose(e)} style={{marginRight: '15px'}}>Decline</Button>\r\n                <Button variant='contained' onClick={e => handleAccept(e)}>Accept</Button>\r\n            </DialogActions>\r\n        </Dialog>\r\n    );\r\n};\r\n\r\nexport default CallDialog;","import { Button, Container, Grid, Stack } from '@mui/material';\r\nimport { Box } from '@mui/system';\r\nimport { TextField } from '@mui/material';\r\nimport { Paper } from '@mui/material';\r\nimport { styled } from '@mui/material/styles';\r\nimport { InputAdornment } from '@mui/material';\r\nimport React, { useState, useEffect } from 'react';\r\nimport NavBar from '../components/NavBar';\r\nimport NavDrawer from '../components/NavDrawer';\r\nimport axios from 'axios';\r\nimport io from 'socket.io-client';\r\nimport CreateRoom from '../components/CreateRoom';\r\nimport Cookies from 'js-cookie';\r\nimport { useParams } from 'react-router';\r\nimport NameMenu from '../components/NameMenu';\r\nimport VideoSquare from '../components/VideoSquare';\r\nimport CallDialog from '../components/CallDialog';\r\n\r\nconst Chatroom = (props) => {\r\n\r\n    const Item = styled(Paper)(({ theme }) => ({\r\n        ...theme.typography.body2,\r\n        padding: theme.spacing(1),\r\n        textAlign: 'left',\r\n        color: theme.palette.text.secondary,\r\n    }));\r\n\r\n    const [socket] = useState(() => io('http://localhost:8000'));\r\n    const [allMessages, setAllMessages] = useState([]);\r\n    const [open, setOpen] = useState(false);\r\n    const [loginOpen, setLoginOpen] = useState(false);\r\n    const [registerOpen, setRegisterOpen] = useState(false);\r\n    const [isLoggedIn, setIsLoggedIn] = useState(true);\r\n    const [count, setCount] = useState(0);\r\n    const [userRooms, setUserRooms] = useState([]);\r\n    const [roomInfo, setRoomInfo] = useState('');\r\n    const [caller, setCaller] = useState('');\r\n    const [callOpen, setCallOpen] = useState(false);\r\n    const { id } = useParams();\r\n\r\n    const handleSubmit = (e) => {\r\n        var messageBox = document.getElementById('messageBox');\r\n        if (messageBox.value === '') {\r\n            e.preventDefault();\r\n            return;\r\n        }\r\n        const messageObj = { userName: Cookies.get('userName'), message: messageBox.value, roomId: id };\r\n        e.preventDefault();\r\n        socket.emit('sendMessage', messageObj);\r\n        setAllMessages([messageObj, ...allMessages]);\r\n        messageBox.value = '';\r\n        axios.post('http://localhost:8000/message/create', messageObj, { withCredentials: true })\r\n            .then(res => res)\r\n            .catch(err => console.log(err.response));\r\n    };\r\n\r\n    useEffect(() => {\r\n\r\n        socket.disconnect(true);\r\n        socket.connect();\r\n\r\n        axios.get('http://localhost:8000/room/' + id, { withCredentials: true })\r\n            .then(room => {\r\n                setRoomInfo(room.data.room);\r\n            })\r\n            .catch(err => console.log(err));\r\n\r\n        axios.post('http://localhost:8000/message/getmessages/' + id, { withCredentials: true })\r\n            .then(messages => {\r\n                setAllMessages(messages.data.messages.reverse())\r\n            })\r\n            .catch(err => console.log(err.response));\r\n        \r\n        socket.on('connect', () => {\r\n            console.log(socket.id);\r\n            axios.put('http://localhost:8000/api/user/updatesocket', { userName: Cookies.get('userName'), socket: socket.id }, { withCredentials: true })\r\n                .then(user => user)\r\n                .catch(err => console.log(err));\r\n        })\r\n\r\n        socket.on('recieveMessage', (data) => {\r\n            axios.post('http://localhost:8000/message/getmessages/' + data, { withCredentials: true })\r\n                .then(messages => setAllMessages([...messages.data.messages.reverse()]))\r\n                .catch(err => console.log(err.response));\r\n        });\r\n\r\n        socket.on('recieving_call', (caller) => {\r\n            setCaller(caller);\r\n            setCallOpen(true);\r\n        })\r\n\r\n        socket.emit('join', id);\r\n\r\n        return () => socket.disconnect(true);\r\n    }, [id, socket]);\r\n\r\n    return (\r\n        <>\r\n            <NavBar setOpen={setOpen} open={open} setLoginOpen={setLoginOpen} loginOpen={loginOpen} \r\n                registerOpen={registerOpen} setRegisterOpen={setRegisterOpen} isLoggedIn={isLoggedIn}\r\n                count={count} setCount={setCount} userRooms={userRooms} setUserRooms={setUserRooms} setLoggedIn={setIsLoggedIn}\r\n                pageHeader={roomInfo.isDm ? (roomInfo.host === Cookies.get('userName') ? roomInfo.users[1] : roomInfo.host) : roomInfo.roomName}\r\n                darkMode={props.darkMode} setDarkMode={props.setDarkMode} \r\n            />\r\n            <CreateRoom newRoomOpen={props.newRoomOpen} setNewRoomOpen={props.setNewRoomOpen} setOpen={setOpen} />\r\n            <NavDrawer open={open} setOpen={setOpen} userRooms={userRooms} setUserRooms={setUserRooms}\r\n                isLoggedIn={isLoggedIn} newRoomOpen={props.newRoomOpen} setNewRoomOpen={props.setNewRoomOpen} />\r\n            <Container maxWidth='xlg'>\r\n                <Grid container spacing={3} alignItems='stretch'>\r\n                    {roomInfo.isDm ? (<Grid item xlg={2} lg={4} md={6} sm={12} xs={12}><VideoSquare socket={socket} style={{marginRight: '30px'}} roomInfo={roomInfo} /></Grid>) : ''}\r\n                    <Grid item xlg={roomInfo.isDm ? 12 : 10} lg={roomInfo.isDm ? 8 : 12} md={roomInfo.isDm ? 6 : 12} sm={roomInfo.isDm ? 12 : 12} xs={roomInfo.isDm ? 12 : 12}>\r\n                    <Paper \r\n                        style={{maxHeight: '500px',\r\n                        marginTop: '40px', overflowY: 'auto', minHeight: '60vh',\r\n                        borderRadius: '10px', padding: '30px', display: 'flex',\r\n                        flexDirection: 'column-reverse'}}>\r\n                            <Stack\r\n                                direction='column-reverse'\r\n                                justifyContent='space-evenly'\r\n                                alignItems='stretch'\r\n                                spacing={2}\r\n                            >\r\n                                    {allMessages.slice(0,40).map((message, index) => {\r\n                                        return (<Item key={index} style={{backgroundColor: message.userName === Cookies.get('userName') ? 'rgba(166, 212, 250, 0.5)' : 'rgba(255, 214, 153, 0.5)' }}>\r\n                                            <h4 style={{marginLeft: '5px', display: 'flex', flexFlow: 'row nowrap', alignItems: 'center',}}>\r\n                                                <NameMenu userName={message.userName} socket={socket} />  \r\n                                                <small> - {message.createdAt ? new Date(message.createdAt).toLocaleString() : new Date().toLocaleString()}</small>\r\n                                            </h4>\r\n                                            <p style={{marginLeft: '15px', color: 'black'}}>{message.message}</p>\r\n                                        </Item>)\r\n                                    })}\r\n\r\n                            </Stack>\r\n                        </Paper>\r\n                        <TextField\r\n                            focused\r\n                            fullWidth\r\n                            multiline\r\n                            variant='outlined'\r\n                            id='messageBox'\r\n                            onKeyPress={e => e.key === 'Enter' ? handleSubmit(e) : null}\r\n                            maxRows={4}\r\n                            InputProps={{\r\n                                endAdornment: <InputAdornment position=\"end\">\r\n                                    <Button variant='contained' onClick={e => handleSubmit(e)}>Submit</Button>\r\n                                    </InputAdornment>,\r\n                            }}\r\n                            style={{marginBottom: '40px', width: '99%', marginTop: '5px', backgroundColor: 'rgba(166, 212, 250, 0.2)', borderRadius: '4px'}}\r\n                        />   \r\n                        </Grid>        \r\n                </Grid>\r\n            </Container>\r\n            <CallDialog\r\n                open={callOpen}\r\n                caller={caller}\r\n                setCallOpen={setCallOpen}\r\n            />\r\n        </>\r\n    );\r\n};\r\n\r\nexport default Chatroom;","import './App.css';\nimport Dashboard from './views/Dashboard';\nimport { BrowserRouter as Router, Route, Switch } from 'react-router-dom';\nimport Chatroom from './views/Chatroom';\nimport React, { useState } from 'react';\nimport { ThemeProvider, createTheme } from '@mui/material/styles';\nimport { CssBaseline } from '@mui/material';\n\nfunction App() {\n\n  const [newRoomOpen, setNewRoomOpen] = useState(false);\n  const [darkMode, setDarkMode] = useState(false);\n\n  const themeOptions = createTheme({ \n    palette: {\n      type: 'light',\n      primary: {\n        main: '#607d8b',\n      },\n      secondary: {\n        main: '#fafafa',\n      },\n      background: {\n        default: '#cfd8dc',\n        paper: '#f5f5f5',\n      },\n      error: {\n        main: '#d50000',\n      },\n      warning: {\n        main: '#ffcc80',\n      },\n      info: {\n        main: '#90caf9',\n      },\n    },\n    typography: {\n      h6: {\n        fontFamily: 'Open Sans',\n      },\n      fontFamily: 'Roboto',\n      h1: {\n        fontFamily: 'Oswald',\n      },\n      button: {\n        fontFamily: 'Open Sans',\n      },\n      fontSize: 16,\n    },\n  });\n  \n  const darkThemeOptions = createTheme({\n    palette: {\n      type: 'dark',\n      primary: {\n        main: '#90a4ae',\n      },\n      secondary: {\n        main: '#eceff1',\n      },\n      background: {\n        default: '#15171a',\n        paper: '#424242',\n      },\n      error: {\n        main: '#b71c1c',\n      },\n      warning: {\n        main: '#e65100',\n      },\n      info: {\n        main: '#1976d2',\n      },\n      text: {\n        primary: '#f1f8e9',\n      },\n      success: {\n        main: '#2e7d32',\n      },\n    },\n    typography: {\n      h6: {\n        fontFamily: 'Open Sans',\n      },\n      fontFamily: 'Roboto',\n      h1: {\n        fontFamily: 'Oswald',\n      },\n      button: {\n        fontFamily: 'Open Sans',\n      },\n      fontSize: 16,\n    },\n  })\n\n  return (\n      <ThemeProvider theme={darkMode ? darkThemeOptions : themeOptions}>\n        <div className='App'>\n          <CssBaseline />\n          <Router>\n            <Switch>\n              <Route path='/chatroom/:id'>\n                <Chatroom newRoomOpen={newRoomOpen} setNewRoomOpen={setNewRoomOpen} darkMode={darkMode} setDarkMode={setDarkMode} />\n              </Route>\n              <Route path='/'>\n                <Dashboard newRoomOpen={newRoomOpen} setNewRoomOpen={setNewRoomOpen} darkMode={darkMode} setDarkMode={setDarkMode} />\n              </Route>\n            </Switch>\n          </Router>\n        </div>\n      </ThemeProvider>\n  );\n};\n\nexport default App;\n","const reportWebVitals = onPerfEntry => {\n  if (onPerfEntry && onPerfEntry instanceof Function) {\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\n      getCLS(onPerfEntry);\n      getFID(onPerfEntry);\n      getFCP(onPerfEntry);\n      getLCP(onPerfEntry);\n      getTTFB(onPerfEntry);\n    });\n  }\n};\n\nexport default reportWebVitals;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\nimport reportWebVitals from './reportWebVitals';\n\nReactDOM.render(\n    <App />,\n  document.getElementById('root')\n);\n\n// If you want to start measuring performance in your app, pass a function\n// to log results (for example: reportWebVitals(console.log))\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\nreportWebVitals();\n"],"sourceRoot":""}