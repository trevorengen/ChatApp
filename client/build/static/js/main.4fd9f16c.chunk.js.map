{"version":3,"sources":["components/NavBar.jsx","components/NavDrawer.jsx","components/LoginDialog.jsx","components/Greeting.jsx","components/RegisterDialog.jsx","components/CreateRoom.jsx","views/Dashboard.jsx","components/NameMenu.jsx","components/VideoSquare.jsx","components/CallDialog.jsx","views/Chatroom.jsx","App.js","reportWebVitals.js","index.js"],"names":["NavBar","props","history","useHistory","goHome","e","preventDefault","push","Box","sx","flexGrow","AppBar","position","Toolbar","IconButton","onClick","setOpen","open","axios","get","Cookies","withCredentials","then","user","setUserRooms","data","rooms","catch","err","console","log","handleDrawerClick","size","edge","color","mr","Typography","variant","component","pageHeader","isLoggedIn","dashboard","Button","setLoggedIn","response","handleLogoutClick","setRegisterOpen","registerOpen","handleRegisterClick","setLoginOpen","loginOpen","handleLoginClick","style","marginLeft","NavDrawer","handleRoomLink","roomId","Drawer","anchor","elevation","onClose","margin","setNewRoomOpen","handleAddOpen","Divider","List","userRooms","map","room","idx","isDm","roomName","ListItem","Link","underline","_id","host","users","LoginDialog","useState","email","password","info","setInfo","error","setError","close","Dialog","DialogContent","DialogTitle","DialogContentText","TextField","autoFocus","id","label","type","value","onChange","target","DialogActions","post","res","setCount","count","handleSubmit","Greeting","roomCode","setRoomCode","noRoom","setNoRoom","handleSnackClose","marginTop","minWidth","payload","userName","put","undefined","onSubmit","height","Snackbar","message","RegisterDialog","confirmPassword","setUser","errors","setErrors","display","flexFlow","justifyContent","helperText","maxWidth","handleClose","errorObj","Object","entries","handleRegister","CreateRoom","setRoomName","newRoomOpen","fullWidth","Dashboard","setIsLoggedIn","useEffect","setUserName","NameMenu","anchorEl","setAnchorEl","snack","setSnack","Boolean","handleDm","targetUser","length","Math","random","toString","slice","socket","emit","Chip","clickable","event","currentTarget","MenuListProps","MenuItem","userInfo","caller","VideoSquare","constraints","video","width","audio","configuration","iceServers","urls","roomInfo","setRoomId","effect","setEffect","effectValue","setEffectValue","handleCall","a","localVid","document","getElementById","navigator","mediaDevices","getUserMedia","stream","srcObject","localStream","rtcPeerConnection","RTCPeerConnection","remoteStream","setLocalStream","addLocalTracks","getTracks","forEach","track","addTrack","createOffer","sessionDescription","setLocalDescription","sdp","createAnswer","setRemoteStream","streams","sendIceCandidate","candidate","sdpMLineIndex","on","ontrack","onicecandidate","setRemoteDescription","RTCSessionDescription","RTCIceCandidate","addIceCandidate","minHeight","backgroundColor","maxHeight","overflowY","alignItems","borderRadius","padding","flexDirection","autoPlay","preload","controls","WebkitFilter","Grid","container","spacing","item","xs","Select","defaultChecked","inputProps","min","max","step","InputLabelProps","shrink","CallDialog","io","setCallOpen","marginRight","handleAccept","Chatroom","Item","styled","Paper","theme","typography","body2","textAlign","palette","text","secondary","allMessages","setAllMessages","setRoomInfo","setCaller","callOpen","useParams","messageBox","messageObj","disconnect","connect","messages","reverse","Container","xlg","lg","md","sm","Stack","direction","index","createdAt","Date","toLocaleString","focused","multiline","key","endAdornment","InputAdornment","marginBottom","App","className","path","reportWebVitals","onPerfEntry","Function","getCLS","getFID","getFCP","getLCP","getTTFB","ReactDOM","render"],"mappings":"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","file":"static/js/main.4fd9f16c.chunk.js","sourcesContent":["import React from 'react';\r\nimport AppBar from '@mui/material/AppBar';\r\nimport Box from '@mui/material/Box';\r\nimport Toolbar from '@mui/material/Toolbar';\r\nimport Typography from '@mui/material/Typography';\r\nimport Button from '@mui/material/Button';\r\nimport IconButton from '@mui/material/IconButton';\r\nimport MenuIcon from '@mui/icons-material/Menu';\r\nimport axios from 'axios';\r\nimport Cookies from 'js-cookie';\r\nimport { useHistory } from 'react-router';\r\n\r\nconst NavBar = (props) => {\r\n\r\n    const history = useHistory();\r\n\r\n    const handleDrawerClick = (e) => {\r\n        e.preventDefault();\r\n        props.setOpen(props.open ? false : true);\r\n        axios.get('http://localhost:8000/api/user/name/' + Cookies.get('userName'), { withCredentials: true })\r\n            .then(user => {\r\n                props.setUserRooms(user.data.user.rooms);\r\n            })\r\n            .catch(err => console.log(err));\r\n    }\r\n\r\n    const handleLoginClick = (e) => {\r\n        e.preventDefault();\r\n        props.setLoginOpen(props.loginOpen ? false : true);\r\n    };\r\n\r\n    const handleRegisterClick = (e) => {\r\n        e.preventDefault();\r\n        props.setRegisterOpen(props.registerOpen ? false : true);\r\n    };\r\n\r\n    const handleLogoutClick = (e) => {\r\n        e.preventDefault();\r\n        axios.get('http://localhost:8000/api/user/logout', { withCredentials: true })\r\n            .then(() => {\r\n                props.setLoggedIn(false);\r\n                history.push('/');\r\n            })\r\n            .catch(err => console.log(err.response));\r\n    };\r\n\r\n    const goHome = (e) => {\r\n        e.preventDefault();\r\n        history.push('/');\r\n    };\r\n\r\n    return (\r\n        <Box sx={{ flexGrow: 1 }}>\r\n            <AppBar position=\"static\">\r\n                <Toolbar>\r\n                    <IconButton\r\n                        onClick={e => handleDrawerClick(e)}\r\n                        size=\"large\"\r\n                        edge=\"start\"\r\n                        color=\"inherit\"\r\n                        aria-label=\"menu\"\r\n                        sx={{ mr: 2 }}\r\n                    >\r\n                        <MenuIcon />\r\n                    </IconButton>\r\n                    <Typography variant=\"h6\" component=\"div\" sx={{ flexGrow: 1 }}>\r\n                        {props.pageHeader}\r\n                    </Typography>\r\n                    {props.isLoggedIn ? (\r\n                        <>\r\n                            {props.dashboard ? '' : <Button color='inherit' onClick={e => goHome(e)}>Home</Button>}\r\n                            <Button color=\"inherit\" onClick={e => handleLogoutClick(e)}>Logout</Button>\r\n                        </>\r\n                    ) : (\r\n                        <>\r\n                            {props.dashboard ? '' : <Button color='inherit' onClick={e => goHome(e)}>Home</Button>}\r\n                            <Button color=\"inherit\" onClick={e => handleRegisterClick(e)}>Register</Button>\r\n                            <Button color=\"inherit\" onClick={e => handleLoginClick(e)} style={{marginLeft: '50px'}}>Login</Button>\r\n                        </>)}\r\n                  \r\n                </Toolbar>\r\n            </AppBar>\r\n        </Box>\r\n    );\r\n};\r\n\r\nexport default NavBar;","import React from 'react';\r\nimport { Divider, Drawer, List, ListItem, Link } from '@mui/material';\r\nimport { IconButton } from '@mui/material'; \r\nimport AddCircleOutlineIcon from '@mui/icons-material/AddCircleOutline';\r\nimport { useHistory } from 'react-router';\r\nimport Cookies from 'js-cookie';\r\n\r\nconst NavDrawer = (props) => {\r\n\r\n    const history = useHistory();\r\n\r\n    const close = () => {\r\n        props.setOpen(false);\r\n    };\r\n\r\n    const handleAddOpen = (e) => {\r\n        e.preventDefault();\r\n        props.setNewRoomOpen(true);\r\n    };\r\n\r\n    const handleRoomLink = (e, roomId) => {\r\n        e.preventDefault();\r\n        history.push('/chatroom/' + roomId);\r\n    };\r\n\r\n    return (\r\n        <Drawer \r\n            anchor='left'\r\n            elevation={20}\r\n            open={props.open}\r\n            onClose={close}\r\n        >\r\n            <h1 style={{margin: '30px 80px'}}>Your Rooms\r\n                {props.isLoggedIn ? \r\n                     (\r\n                    <IconButton size='large' variant='contained' color='primary'\r\n                        onClick={e => handleAddOpen(e)}>\r\n                        <AddCircleOutlineIcon />\r\n                    </IconButton>\r\n                    ) : null}\r\n            </h1>\r\n            <Divider />\r\n            <List>\r\n                <h4 style={{margin: '10px'}}>Direct Messages</h4>\r\n                {props.userRooms.map((room, idx) => {\r\n                    if (room.isDm) {\r\n                        if (room.roomName === 'Looks lonely!') {\r\n                            return (\r\n                                <ListItem key={idx}>\r\n                                    <small>Looks lonely!</small>\r\n                                </ListItem>\r\n                            )\r\n                        }\r\n                        return (\r\n                            <ListItem key={idx}>\r\n                                <Link underline='hover' component='button' variant='h6'\r\n                                onClick={e => handleRoomLink(e, room._id)}>{room.host === Cookies.get('userName') ? room.users[1] : room.host}</Link>\r\n                            </ListItem>\r\n                        )\r\n                    }\r\n                })}\r\n            </List>\r\n            <Divider />\r\n            <List>\r\n                <h4 style={{margin: '10px'}}>Chat Rooms</h4>\r\n                {props.userRooms.map((room, idx) => {\r\n                    if (!room.isDm) {\r\n                        if (room.roomName === 'No friends?') {\r\n                            return (\r\n                                <ListItem key={idx}>\r\n                                    <small>No friends?</small>\r\n                                </ListItem>\r\n                            )\r\n                        }\r\n                        return (\r\n                            <ListItem key={idx}>\r\n                                <Link underline='hover' component='button' variant='h6'\r\n                                onClick={e => handleRoomLink(e, room._id)}>{room.roomName}</Link>\r\n                            </ListItem>\r\n                        )\r\n                    }\r\n                })}\r\n            </List>\r\n        </Drawer>\r\n    );\r\n};\r\n\r\nexport default NavDrawer;","import React, { useState } from 'react';\r\nimport Button from '@mui/material/Button';\r\nimport TextField from '@mui/material/TextField';\r\nimport Dialog from '@mui/material/Dialog';\r\nimport DialogActions from '@mui/material/DialogActions';\r\nimport DialogContent from '@mui/material/DialogContent';\r\nimport DialogContentText from '@mui/material/DialogContentText';\r\nimport DialogTitle from '@mui/material/DialogTitle';\r\nimport axios from 'axios';\r\n\r\nconst LoginDialog = (props) => {\r\n\r\n    const [info, setInfo] = useState({ email: '', password: '' });\r\n    const [error, setError] = useState('');\r\n\r\n    const close = () => {\r\n        setInfo({ email: '', password: '' });\r\n        props.setLoginOpen(false);\r\n    };\r\n\r\n    const handleSubmit = (e) => {\r\n        e.preventDefault();\r\n        axios.post('http://localhost:8000/api/user/login', info, { withCredentials: true })\r\n            .then(res => {\r\n                props.setCount(props.count + 1);\r\n                props.setLoginOpen(false);\r\n            })\r\n            .catch(err => {\r\n                setError(err.response.data);\r\n            })\r\n    }\r\n\r\n    return (\r\n        <Dialog open={props.loginOpen} onClose={close}>\r\n            <DialogContent>\r\n                <DialogTitle>Login</DialogTitle>\r\n                <DialogContentText>\r\n                    Login with your email and password to begin.<br></br>\r\n                    <small style={{color: 'red'}}>{error}</small>\r\n                </DialogContentText>\r\n                <TextField\r\n                    autoFocus\r\n                    margin='dense'\r\n                    id='email'\r\n                    label='Email Address'\r\n                    type='email'\r\n                    variant='standard'\r\n                    value={info.email}\r\n                    onChange={e => setInfo({ ...info, email: e.target.value })}\r\n                />\r\n                <TextField\r\n                    margin='dense'\r\n                    id='password'\r\n                    label='Password'\r\n                    type='password'\r\n                    variant='standard'\r\n                    value={info.password}\r\n                    onChange={e => setInfo({ ...info, password: e.target.value })}\r\n                    style={{marginLeft: '10px'}}\r\n                />\r\n            </DialogContent>\r\n            <DialogActions>\r\n                <Button onClick={close}>Cancel</Button>\r\n                <Button onClick={e => handleSubmit(e)} variant='contained'>Submit</Button>\r\n            </DialogActions>\r\n        </Dialog>\r\n    );\r\n};\r\n\r\nexport default LoginDialog;","import React, { useState } from 'react';\r\nimport TextField from '@mui/material/TextField';\r\nimport { Button } from '@mui/material';\r\nimport { useHistory } from 'react-router';\r\nimport axios from 'axios';\r\nimport Cookies from 'js-cookie';\r\nimport { Snackbar } from '@mui/material';\r\n\r\nconst Greeting = () => {\r\n\r\n    const [roomCode, setRoomCode] = useState('');\r\n    const [noRoom, setNoRoom] = useState(false);\r\n    const [error, setError] = useState('');\r\n    const history = useHistory();\r\n\r\n    const onSubmit = (e) => {\r\n        e.preventDefault();\r\n        axios.get('http://localhost:8000/room/name/' + roomCode)\r\n            .then(room => {\r\n                room = room.data.room;\r\n                const payload = { room: room, userName: Cookies.get('userName') };\r\n                console.log(payload);\r\n                axios.put('http://localhost:8000/api/user/addroom', payload, { withCredentials: true })\r\n                    .then(() => history.push('/chatroom/' + room._id))\r\n                    .catch(err => {\r\n                        if (err.response.data.error === undefined) {\r\n                            setError('You have to be logged in to do that!');\r\n                        } else {\r\n                            console.log(err.response);\r\n                        }\r\n                        setRoomCode('');\r\n                        setNoRoom(true);\r\n                    });\r\n            })\r\n            .catch(error => console.log(error));\r\n    };\r\n\r\n    const handleSnackClose = () => {\r\n        setError('');\r\n        setNoRoom(false);\r\n    }\r\n\r\n    return (\r\n        <div>\r\n            <h1 style={{marginTop: '150px'}}>Sign Up Then Enter a Room Code to Get Started</h1>\r\n            <TextField \r\n                style={{minWidth: '400px'}}\r\n                type='text'\r\n                value={roomCode}\r\n                onChange={e => setRoomCode(e.target.value)}\r\n            />\r\n            <Button\r\n                onClick={e => onSubmit(e)}\r\n                variant='contained'\r\n                style={{marginLeft: '15px', height: '53px', marginTop: '1px'}}\r\n            >Enter</Button>\r\n            <Snackbar message='You are already in this room!' \r\n                open={noRoom}\r\n                onClose={handleSnackClose} />\r\n            <Snackbar message={error}\r\n                open={noRoom}\r\n                onClose={handleSnackClose} />\r\n        </div>\r\n    );\r\n};\r\n\r\nexport default Greeting;","import React, { useState } from 'react';\r\nimport Button from '@mui/material/Button';\r\nimport TextField from '@mui/material/TextField';\r\nimport Dialog from '@mui/material/Dialog';\r\nimport DialogActions from '@mui/material/DialogActions';\r\nimport DialogContent from '@mui/material/DialogContent';\r\nimport DialogContentText from '@mui/material/DialogContentText';\r\nimport DialogTitle from '@mui/material/DialogTitle';\r\nimport axios from 'axios';\r\n\r\nconst RegisterDialog = (props) => {\r\n\r\n    const [user, setUser] = useState({\r\n        userName: '',\r\n        email: '', \r\n        password: '',\r\n        confirmPassword: '',\r\n    });\r\n    const [errors, setErrors] = useState({\r\n        email: '',\r\n        password: '',\r\n        userName: '',\r\n        confirmPassword: '',\r\n    });\r\n\r\n    const close = () => {\r\n        props.setRegisterOpen(false);\r\n        setUser({\r\n            userName: '',\r\n            email: '', \r\n            password: '',\r\n            confirmPassword: '',\r\n        });\r\n    }\r\n\r\n    const handleClose = (e) => {\r\n        e.preventDefault();\r\n        props.setRegisterOpen(false);\r\n    };\r\n\r\n    const handleRegister = (e) => {\r\n        e.preventDefault();\r\n        axios.post('http://localhost:8000/api/user/register', user, { withCredentials: true })\r\n            .then(res => {\r\n                props.setCount(props.count + 1);\r\n                close();\r\n            })\r\n            .catch(err => {\r\n                var errorObj = {};\r\n                var defaultErrors = {\r\n                    email: '',\r\n                    password: '',\r\n                    userName: '',\r\n                    confirmPassword: '',\r\n                };\r\n                for (const [error, message] of Object.entries(err.response.data.error.errors)) {\r\n                    errorObj[error] = message.message;\r\n                };\r\n                setErrors({...defaultErrors, ...errorObj});\r\n            });\r\n    };\r\n\r\n    return (\r\n        <Dialog open={props.registerOpen} onClose={close}>\r\n            <DialogContent>\r\n                <DialogTitle>Get Registered</DialogTitle>\r\n                    <DialogContentText>\r\n                        Register below to get started and create your own rooms!\r\n                    </DialogContentText>\r\n                    <div style={{display: 'flex', flexFlow: 'row nowrap', justifyContent: 'space-evenly'}}>\r\n                        <TextField\r\n                            error={errors.userName === '' ? false : true}\r\n                            helperText={errors.userName === '' ? '' : errors.userName}\r\n                            autoFocus\r\n                            margin='dense'\r\n                            id='userName'\r\n                            label='User Name'\r\n                            type='text'\r\n                            variant='standard'\r\n                            value={user.userName}\r\n                            onChange={e => setUser({ ...user, userName: e.target.value })}\r\n                        />\r\n                        <TextField\r\n                            error={errors.email === '' ? false : true}\r\n                            helperText={errors.email === '' ? '' : errors.email}\r\n                            margin='dense'\r\n                            id='email'\r\n                            label='Email'\r\n                            type='email'\r\n                            variant='standard'\r\n                            value={user.email}\r\n                            onChange={e => setUser({...user, email: e.target.value})}\r\n                        />\r\n                    </div>\r\n                    <div style={{display: 'flex', flexFlow: 'row nowrap', justifyContent: 'space-evenly'}}>\r\n                        <TextField\r\n                            error={errors.password === '' ? false : true}\r\n                            helperText={errors.password === '' ? '' : errors.password}\r\n                            margin='dense'\r\n                            id='password'\r\n                            label='Password'\r\n                            type='password'\r\n                            variant='standard'\r\n                            value={user.password}\r\n                            onChange={e => setUser({...user, password: e.target.value})}\r\n                            style={{maxWidth: '200px'}}\r\n                        />\r\n                        <TextField\r\n                            error={errors.confirmPassword === '' ? false : true}\r\n                            helperText={errors.confirmPassword === '' ? '' : errors.confirmPassword}\r\n                            margin='dense'\r\n                            id='confirmPassword'\r\n                            label='Confirm Password'\r\n                            type='password'\r\n                            variant='standard'\r\n                            value={user.confirmPassword}\r\n                            onChange={e => setUser({...user, confirmPassword: e.target.value})}\r\n                        />\r\n                    </div>\r\n            </DialogContent>\r\n            <DialogActions>\r\n                <Button onClick={e => handleClose(e)}>Cancel</Button>\r\n                <Button variant='contained' onClick={e => handleRegister(e)}>Register</Button>\r\n            </DialogActions>\r\n        </Dialog>\r\n    );\r\n};\r\n\r\nexport default RegisterDialog;","import React, { useState } from 'react';\r\nimport Button from '@mui/material/Button';\r\nimport TextField from '@mui/material/TextField';\r\nimport Dialog from '@mui/material/Dialog';\r\nimport DialogActions from '@mui/material/DialogActions';\r\nimport DialogContent from '@mui/material/DialogContent';\r\nimport DialogContentText from '@mui/material/DialogContentText';\r\nimport DialogTitle from '@mui/material/DialogTitle';\r\nimport axios from 'axios';\r\nimport Cookies from 'js-cookie';\r\nimport { useHistory } from 'react-router';\r\n\r\nconst CreateRoom = (props) => {\r\n\r\n    const [roomName, setRoomName] = useState('');\r\n    const [error, setError] = useState('');\r\n    const history = useHistory();\r\n\r\n    const close = () => {\r\n        props.setNewRoomOpen(false);\r\n    };\r\n\r\n    const handleSubmit = (e) => {\r\n        e.preventDefault();\r\n        axios.post('http://localhost:8000/room/create', { roomName: roomName, users: [Cookies.get('userName')], isDm: false, host: Cookies.get('userName')}, { withCredentials: true })\r\n            .then(room => {\r\n                axios.put('http://localhost:8000/api/user/addroom', { room: room.data.room, userName: Cookies.get('userName') }, { withCredentials: true })\r\n                    .then(rooms => console.log(rooms))\r\n                    .catch(err => console.log(err.response));\r\n                history.push('/chatroom/'+room.data.room._id);\r\n                close();\r\n                setRoomName('');\r\n                props.setOpen(false);\r\n            })\r\n            .catch(err => setError(err.response))\r\n    };\r\n\r\n    return (\r\n        <Dialog open={props.newRoomOpen} onClose={close}>\r\n            <DialogContent>\r\n                <DialogTitle>Create a Room</DialogTitle>\r\n                <DialogContentText>\r\n                    Create a new chatroom to talk with your pals!<br></br>\r\n                    <small style={{color: 'red'}}></small>\r\n                </DialogContentText>\r\n                <TextField\r\n                    error={error === '' ? false : true}\r\n                    helperText={error === '' ? '' : error.data}\r\n                    fullWidth\r\n                    autoFocus\r\n                    margin='dense'\r\n                    id='roomName'\r\n                    label='Room Name'\r\n                    type='text'\r\n                    variant='standard'\r\n                    value={roomName}\r\n                    onChange={e => setRoomName(e.target.value)}\r\n                />\r\n            </DialogContent>\r\n            <DialogActions>\r\n                <Button onClick={close}>Cancel</Button>\r\n                <Button variant='contained' onClick={e => handleSubmit(e)}>Submit</Button>\r\n            </DialogActions>\r\n        </Dialog>\r\n    );\r\n};\r\n\r\nexport default CreateRoom;","import React, { useState, useEffect } from 'react';\r\nimport NavBar from '../components/NavBar';\r\nimport NavDrawer from '../components/NavDrawer';\r\nimport LoginDialog from '../components/LoginDialog';\r\nimport Greeting from '../components/Greeting';\r\nimport RegisterDialog from '../components/RegisterDialog';\r\nimport axios from 'axios';\r\nimport CreateRoom from '../components/CreateRoom';\r\n\r\nconst Dashboard = (props) => {\r\n\r\n    const [open, setOpen] = useState(false);\r\n    const [loginOpen, setLoginOpen] = useState(false);\r\n    const [registerOpen, setRegisterOpen] = useState(false);\r\n    const [isLoggedIn, setIsLoggedIn] = useState(false);\r\n    const [count, setCount] = useState(0);\r\n    const [userRooms, setUserRooms] = useState([{\r\n        roomName: 'Looks lonely!', isDm: true, host: 'Looks lonely!',\r\n    }, {\r\n        roomName: 'No friends?', isDm: false, host: 'NaN',\r\n    }]);\r\n\r\n    const whatLinks = () => {\r\n        axios.get('http://localhost:8000/api/user/isloggedin', { withCredentials : true })\r\n            .then(() => {\r\n                setIsLoggedIn(true);\r\n            })\r\n            .catch(setIsLoggedIn(false));\r\n    }\r\n\r\n    useEffect(() => {\r\n        whatLinks();\r\n    }, [count]);\r\n\r\n    return (\r\n        <>\r\n            <NavBar pageHeader={''} setOpen={setOpen} open={open} setLoginOpen={setLoginOpen} loginOpen={loginOpen} \r\n                registerOpen={registerOpen} setRegisterOpen={setRegisterOpen} isLoggedIn={isLoggedIn}\r\n                count={count} setCount={setCount} userRooms={userRooms} setUserRooms={setUserRooms}  setLoggedIn={setIsLoggedIn}\r\n                dashboard={true} />\r\n            <NavDrawer open={open} setOpen={setOpen} isLoggedIn={isLoggedIn} \r\n                newRoomOpen={props.newRoomOpen} setNewRoomOpen={props.setNewRoomOpen}\r\n                userRooms={userRooms} setUserRooms={setUserRooms} />\r\n            <CreateRoom newRoomOpen={props.newRoomOpen} setNewRoomOpen={props.setNewRoomOpen} />\r\n            <LoginDialog loginOpen={loginOpen} setLoginOpen={setLoginOpen} count={count} setCount={setCount}\r\n                setUserName={props.setUserName} />\r\n            <RegisterDialog registerOpen={registerOpen} setRegisterOpen={setRegisterOpen}\r\n                count={count} setCount={setCount} />\r\n            <Greeting />\r\n        </>\r\n        \r\n    );\r\n};\r\n\r\nexport default Dashboard;","import React, { useState } from 'react';\r\nimport Chip from '@mui/material/Chip';\r\nimport Menu from '@mui/material/Menu';\r\nimport MenuItem from '@mui/material/MenuItem';\r\nimport axios from 'axios';\r\nimport Cookies from 'js-cookie';\r\nimport { useHistory } from 'react-router';\r\nimport { Snackbar } from '@mui/material';\r\n\r\nconst NameMenu = (props) => {\r\n\r\n    const [anchorEl, setAnchorEl] = useState(null);\r\n    const [snack, setSnack] = useState(false);\r\n    const open = Boolean(anchorEl);\r\n    const history = useHistory();\r\n\r\n    const handleClick = (event) => {\r\n      setAnchorEl(event.currentTarget);\r\n    };\r\n\r\n    const handleClose = () => {\r\n      setAnchorEl(null);\r\n    };\r\n\r\n    const handleSnackClose = () => {\r\n        setSnack(false);\r\n    };\r\n\r\n    const handleDm = (targetUser) => {\r\n        axios.get('http://localhost:8000/room/' + Cookies.get('userName') + '/' + targetUser)\r\n            .then(rooms => {\r\n                if (rooms.data.room.length === 0) {\r\n                axios.post('http://localhost:8000/room/create', { \r\n                    roomName: Math.random().toString(36).slice(2), \r\n                    users: [Cookies.get('userName'), targetUser], \r\n                    isDm: true,\r\n                    host: Cookies.get('userName'),\r\n                    })\r\n                    .then(room => {\r\n                        console.log();\r\n                        axios.put('http://localhost:8000/api/user/addroom/', { room: room.data.room, userName: Cookies.get('userName') }, { withCredentials: true })\r\n                            .then(rooms => console.log(rooms))\r\n                            .catch(err => console.log(err.response));\r\n\r\n                        axios.put('http://localhost:8000/api/user/addroom/', { room: room.data.room, userName: targetUser }, { withCredentials: true })\r\n                            .then(rooms => console.log(rooms))\r\n                            .catch(err => console.log(err.response));\r\n\r\n                        history.push('/chatroom/' + room.data.room._id);\r\n                    })\r\n                    .catch(err => console.log(err.response));\r\n\r\n                props.socket.emit('sendDm', targetUser)\r\n                } else {\r\n                    setSnack(true);\r\n                    handleClose();\r\n                    history.push('/chatroom/' + rooms.data.room[0]._id);\r\n                }\r\n            })\r\n            .catch(err => console.log(err));\r\n    };\r\n\r\n    const handleCall = (targetUser) => {\r\n        handleDm(targetUser);\r\n        axios.get('http://localhost:8000/api/user/name/' + targetUser, { withCredentials: true })\r\n            .then(user => {\r\n                const userInfo = user.data.user;\r\n                props.socket.emit('start_call', { userInfo: userInfo, caller: Cookies.get('userName') });\r\n\r\n            })\r\n            .catch(err => console.log(err));\r\n    }\r\n\r\n    return (\r\n        <div>\r\n            <Chip label={props.userName} \r\n                component=\"a\" \r\n                aria-controls=\"basic-menu\"\r\n                aria-haspopup=\"true\"\r\n                aria-expanded={open ? 'true' : undefined}\r\n                clickable \r\n                onClick={handleClick} />\r\n            <Menu\r\n                id=\"basic-menu\"\r\n                anchorEl={anchorEl}\r\n                open={open}\r\n                onClose={handleClose}\r\n                MenuListProps={{\r\n                'aria-labelledby': 'basic-button',\r\n                }}\r\n            >\r\n                <MenuItem onClick={() => handleDm(props.userName)}>Direct message</MenuItem>\r\n                <MenuItem onClick={() => handleCall(props.userName)}>Call</MenuItem>\r\n            </Menu>\r\n            <Snackbar message='You already have a DM with this person!' \r\n                open={snack}\r\n                onClose={handleSnackClose} />\r\n        </div>\r\n    );\r\n};\r\n\r\nexport default NameMenu;","import { Button, Grid, MenuItem, Select } from '@mui/material';\r\nimport React, { useState, useEffect } from 'react';\r\nimport { TextField } from '@mui/material';\r\nimport { Box } from '@mui/system';\r\n\r\nconst VideoSquare = (props) => {\r\n\r\n    const constraints = {\r\n        video: { width: 480, height: 320},\r\n        audio: true,\r\n    }\r\n    const configuration = { iceServers: [\r\n        { urls: 'stun:stun.l.google.com:19302' },\r\n        { urls: 'stun:stun1.l.google.com:19302' },\r\n    ]};\r\n    const [roomId, setRoomId] = useState(props.roomInfo._id);\r\n    const [effect, setEffect] = useState('');\r\n    const [effectValue, setEffectValue] = useState(1);\r\n\r\n    const handleChange = (event) => {\r\n        setEffectValue(1);\r\n        setEffect(event.target.value);\r\n    };\r\n\r\n    const handleValueChange = (event) => {\r\n        setEffectValue(event.target.value);\r\n    }\r\n\r\n    const handleCall = async (e) => {\r\n        e.preventDefault();\r\n        var localVid = document.getElementById('localVid');\r\n        try {\r\n            var stream = await navigator.mediaDevices.getUserMedia(constraints)\r\n            localVid.srcObject = stream;\r\n        } catch (err) {\r\n            console.log('Error getting local media.', err);\r\n        };\r\n        props.socket.emit('call', roomId);\r\n    }\r\n\r\n    useEffect(() => {\r\n        var rtcPeerConnection = new RTCPeerConnection(configuration);\r\n        var localStream;\r\n        const remoteStream = document.getElementById('remoteVid');\r\n        setRoomId(props.roomInfo._id);\r\n\r\n        props.socket.on('call', async () => {\r\n            await setLocalStream(constraints);\r\n            console.log('client call');\r\n            rtcPeerConnection.ontrack = setRemoteStream;\r\n            rtcPeerConnection.onicecandidate = sendIceCandidate;\r\n            await createOffer(rtcPeerConnection);\r\n            console.log('Client call event end.');\r\n        });\r\n\r\n        props.socket.on('offer', async (event) => {\r\n            console.log('Client offer event start.');\r\n            await setLocalStream(constraints);\r\n            rtcPeerConnection.ontrack = setRemoteStream;\r\n            await rtcPeerConnection.setRemoteDescription(new RTCSessionDescription(event));\r\n            rtcPeerConnection.onicecandidate = sendIceCandidate;                \r\n            await createAnswer(rtcPeerConnection);\r\n            console.log('Client offer event end.');\r\n            \r\n        });\r\n\r\n        props.socket.on('answer', (event) => {\r\n            console.log('Client answer event start.');\r\n            rtcPeerConnection.setRemoteDescription(new RTCSessionDescription(event));\r\n            console.log('Client answer event end.');\r\n        });\r\n\r\n        props.socket.on('ice_candidate', (event) => {\r\n            console.log('Client ice candidate event start.');\r\n            var candidate = new RTCIceCandidate({\r\n                sdpMLineIndex: event.label,\r\n                candidate: event.candidate,\r\n            });\r\n            console.log(candidate);\r\n            rtcPeerConnection.addIceCandidate(candidate);\r\n        });\r\n\r\n        // FUNCTIONS BELOW\r\n\r\n        async function setLocalStream(constraints) {\r\n            let stream;\r\n            let localVid = document.getElementById('localVid');\r\n            try {\r\n                stream = await navigator.mediaDevices.getUserMedia(constraints)\r\n                localStream = stream;\r\n                localVid.srcObject = stream;\r\n            } catch (err) {\r\n                console.log('Error getting local media.', err);\r\n            };\r\n            addLocalTracks(rtcPeerConnection);\r\n            localVid.srcObject = stream;\r\n        };\r\n\r\n        function addLocalTracks(rtcPeerConnection) {\r\n            console.log(localStream);\r\n            localStream.getTracks().forEach((track) => {\r\n                rtcPeerConnection.addTrack(track, localStream);\r\n            });\r\n        };\r\n          \r\n        async function createOffer(rtcPeerConnection) {\r\n            let sessionDescription;\r\n            try {\r\n                sessionDescription = await rtcPeerConnection.createOffer();\r\n                rtcPeerConnection.setLocalDescription(sessionDescription);\r\n            } catch (error) {\r\n                console.error(error);\r\n            };\r\n          \r\n            props.socket.emit('offer', {\r\n                type: 'offer',\r\n                sdp: sessionDescription,\r\n                roomId,\r\n            });\r\n        };\r\n          \r\n        async function createAnswer(rtcPeerConnection) {\r\n            let sessionDescription;\r\n            try {\r\n                sessionDescription = await rtcPeerConnection.createAnswer();\r\n                rtcPeerConnection.setLocalDescription(sessionDescription);\r\n            } catch (error) {\r\n                console.error(error);\r\n            };\r\n          \r\n            props.socket.emit('answer', {\r\n                type: 'answer',\r\n                sdp: sessionDescription,\r\n                roomId,\r\n            });\r\n        };\r\n          \r\n        function setRemoteStream(event) {\r\n            remoteStream.srcObject = event.streams[0];\r\n            console.log(event);\r\n        };\r\n          \r\n        function sendIceCandidate(event) {\r\n            if (event.candidate) {\r\n                props.socket.emit('ice_candidate', {\r\n                    roomId,\r\n                    label: event.candidate.sdpMLineIndex,\r\n                    candidate: event.candidate.candidate,\r\n              });\r\n            };\r\n        };\r\n\r\n    }, []);\r\n\r\n    return (\r\n        <Box \r\n            style={{minHeight: '65vh', minWidth: '300px',\r\n            backgroundColor: '#dce7e8', maxHeight: '600px',\r\n            marginTop: '40px', overflowY: 'none', alignItems: 'space-evenly',\r\n            borderRadius: '10px', padding: '30px', display: 'flex', justifyContent: 'space-evenly',\r\n            flexDirection: 'column'}}\r\n        >\r\n            <video id='remoteVid' autoPlay preload='auto' controls style={{margin: '10px 0', borderRadius: '15px'}}>\r\n            </video>\r\n\r\n            <video id='localVid' autoPlay preload='auto' controls \r\n                style={{margin: '10px 0', borderRadius: '15px', \r\n                WebkitFilter: effect === 'blur' ? 'blur('+effectValue+'px)' :  \r\n                effect === 'grayscale' ? 'grayscale('+effectValue+')' : \r\n                effect === 'saturate' ? 'saturate('+effectValue+')' :\r\n                effect === 'negative' ? 'invert('+effectValue+')' : \r\n                effect === 'sepia' ? 'sepia('+effectValue+')' :\r\n                effect === 'contrast' ? 'contrast('+effectValue+')' : ''}}\r\n            >\r\n            </video>\r\n            <Grid container spacing={1}>\r\n                <Grid item xs={9}>\r\n                    <Select\r\n                        style={{width: '100%'}}\r\n                        value={effect}\r\n                        onChange={handleChange}\r\n                        label='Effects'\r\n                        id='select-effects'\r\n                        variant='filled'\r\n                    >\r\n                        <MenuItem value='' defaultChecked>None</MenuItem>\r\n                        <MenuItem value='blur'>Blur</MenuItem>\r\n                        <MenuItem value='grayscale'>Black & White</MenuItem>\r\n                        <MenuItem value='saturate'>Saturate</MenuItem>\r\n                        <MenuItem value='negative'>Negative</MenuItem>\r\n                        <MenuItem value='contrast'>Contrast</MenuItem>\r\n                    </Select>\r\n                </Grid>\r\n                <Grid item xs={3}>\r\n                    <TextField\r\n                        id=\"standard-number\"\r\n                        value={effectValue}\r\n                        onChange={handleValueChange}\r\n                        label=\"Value\"\r\n                        type=\"number\"\r\n                        inputProps={{min: '0', max: '50', step: '0.1'}}\r\n                        InputLabelProps={{\r\n                            shrink: true,\r\n                        }}\r\n                        style={{width: '90%'}}\r\n                        variant=\"filled\"\r\n                    />\r\n                </Grid>\r\n            </Grid>\r\n            <Button onClick={e => handleCall(e)} variant='contained' color='secondary'>Call</Button>\r\n        </Box>\r\n    );\r\n};\r\n\r\nexport default VideoSquare;","import React, { useState } from 'react';\r\nimport Button from '@mui/material/Button';\r\nimport Dialog from '@mui/material/Dialog';\r\nimport DialogActions from '@mui/material/DialogActions';\r\nimport DialogContent from '@mui/material/DialogContent';\r\nimport DialogContentText from '@mui/material/DialogContentText';\r\nimport DialogTitle from '@mui/material/DialogTitle';\r\nimport axios from 'axios';\r\nimport { useHistory } from 'react-router';\r\nimport Cookies from 'js-cookie';\r\nimport io from 'socket.io-client';\r\n\r\nconst CallDialog = (props) => {\r\n\r\n    const history = useHistory();\r\n    const [socket] = useState(() => io(':8000'));\r\n\r\n    const handleClose = (e) => {\r\n        e.preventDefault();\r\n        props.setCallOpen(false);\r\n    };\r\n\r\n    const handleAccept = (e) => {\r\n        e.preventDefault();\r\n        axios.get('http://localhost:8000/room/' + props.caller + '/' + Cookies.get('userName'), { withCredentials: true })\r\n            .then(room => {\r\n                history.push('/chatroom/' + room.data.room[0]._id);\r\n                socket.emit('call', room.data.room[0]._id);\r\n            })\r\n            .catch(err => console.log(err));\r\n        props.setCallOpen(false);\r\n    };\r\n    \r\n    return (\r\n        <Dialog open={props.open} onClose={e => handleClose(e)}>\r\n            <DialogTitle>You're recieving a call from {props.caller}!</DialogTitle>\r\n            <DialogContent>\r\n                <DialogContentText>\r\n                    Answer it or decline it, the choice is yours.\r\n                </DialogContentText>\r\n            </DialogContent>\r\n            <DialogActions style={{margin: '0 auto'}}>\r\n                <Button onClick={e => handleClose(e)} style={{marginRight: '15px'}}>Decline</Button>\r\n                <Button variant='contained' onClick={e => handleAccept(e)}>Accept</Button>\r\n            </DialogActions>\r\n        </Dialog>\r\n    );\r\n};\r\n\r\nexport default CallDialog;","import { Button, Container, Grid, Stack } from '@mui/material';\r\nimport { Box } from '@mui/system';\r\nimport { TextField } from '@mui/material';\r\nimport { Paper } from '@mui/material';\r\nimport { styled } from '@mui/material/styles';\r\nimport { InputAdornment } from '@mui/material';\r\nimport React, { useState, useEffect } from 'react';\r\nimport NavBar from '../components/NavBar';\r\nimport NavDrawer from '../components/NavDrawer';\r\nimport axios from 'axios';\r\nimport io from 'socket.io-client';\r\nimport CreateRoom from '../components/CreateRoom';\r\nimport Cookies from 'js-cookie';\r\nimport { useParams } from 'react-router';\r\nimport NameMenu from '../components/NameMenu';\r\nimport VideoSquare from '../components/VideoSquare';\r\nimport CallDialog from '../components/CallDialog';\r\n\r\nconst Chatroom = (props) => {\r\n\r\n    const Item = styled(Paper)(({ theme }) => ({\r\n        ...theme.typography.body2,\r\n        padding: theme.spacing(1),\r\n        textAlign: 'left',\r\n        color: theme.palette.text.secondary,\r\n    }));\r\n\r\n    const [socket] = useState(() => io('http://localhost:8000'));\r\n    const [allMessages, setAllMessages] = useState([]);\r\n    const [open, setOpen] = useState(false);\r\n    const [loginOpen, setLoginOpen] = useState(false);\r\n    const [registerOpen, setRegisterOpen] = useState(false);\r\n    const [isLoggedIn, setIsLoggedIn] = useState(true);\r\n    const [count, setCount] = useState(0);\r\n    const [userRooms, setUserRooms] = useState([]);\r\n    const [roomInfo, setRoomInfo] = useState('');\r\n    const [caller, setCaller] = useState('');\r\n    const [callOpen, setCallOpen] = useState(false);\r\n    const { id } = useParams();\r\n\r\n    const handleSubmit = (e) => {\r\n        var messageBox = document.getElementById('messageBox');\r\n        if (messageBox.value === '') {\r\n            e.preventDefault();\r\n            return;\r\n        }\r\n        const messageObj = { userName: Cookies.get('userName'), message: messageBox.value, roomId: id };\r\n        e.preventDefault();\r\n        socket.emit('sendMessage', messageObj);\r\n        setAllMessages([messageObj, ...allMessages]);\r\n        messageBox.value = '';\r\n        axios.post('http://localhost:8000/message/create', messageObj, { withCredentials: true })\r\n            .then(res => res)\r\n            .catch(err => console.log(err.response));\r\n    };\r\n\r\n    useEffect(() => {\r\n\r\n        socket.disconnect(true);\r\n        socket.connect();\r\n\r\n        axios.get('http://localhost:8000/room/' + id, { withCredentials: true })\r\n            .then(room => {\r\n                setRoomInfo(room.data.room);\r\n            })\r\n            .catch(err => console.log(err));\r\n\r\n        axios.get('http://localhost:8000/message/getmessages/' + id, { withCredentials: true })\r\n            .then(messages => {\r\n                setAllMessages(messages.data.messages.reverse())\r\n            })\r\n            .catch(err => console.log(err.response));\r\n        \r\n        socket.on('connect', () => {\r\n            console.log(socket.id);\r\n            axios.put('http://localhost:8000/api/user/updatesocket', { userName: Cookies.get('userName'), socket: socket.id }, { withCredentials: true })\r\n                .then(user => user)\r\n                .catch(err => console.log(err));\r\n        })\r\n\r\n        socket.on('recieveMessage', (data) => {\r\n            axios.get('http://localhost:8000/message/getmessages/' + data, { withCredentials: true })\r\n                .then(messages => {\r\n                    setAllMessages([...messages.data.messages.reverse()])\r\n                })\r\n                .catch(err => console.log(err.response));\r\n        });\r\n\r\n        socket.on('recieving_call', (caller) => {\r\n            setCaller(caller);\r\n            setCallOpen(true);\r\n        })\r\n\r\n        socket.emit('join', id);\r\n\r\n        return () => socket.disconnect(true);\r\n    }, [id, socket]);\r\n\r\n    return (\r\n        <>\r\n            <NavBar pageHeader={''} setOpen={setOpen} open={open} setLoginOpen={setLoginOpen} loginOpen={loginOpen} \r\n            registerOpen={registerOpen} setRegisterOpen={setRegisterOpen} isLoggedIn={isLoggedIn}\r\n            count={count} setCount={setCount} userRooms={userRooms} setUserRooms={setUserRooms} setLoggedIn={setIsLoggedIn}\r\n            pageHeader={roomInfo.isDm ? (roomInfo.host === Cookies.get('userName') ? roomInfo.users[1] : roomInfo.host) : roomInfo.roomName} />\r\n            <CreateRoom newRoomOpen={props.newRoomOpen} setNewRoomOpen={props.setNewRoomOpen} setOpen={setOpen} />\r\n            <NavDrawer open={open} setOpen={setOpen} userRooms={userRooms} setUserRooms={setUserRooms}\r\n                isLoggedIn={isLoggedIn} newRoomOpen={props.newRoomOpen} setNewRoomOpen={props.setNewRoomOpen} />\r\n            <Container maxWidth='xlg'>\r\n                <Grid container spacing={3} alignItems='stretch'>\r\n                    {roomInfo.isDm ? (<Grid item xlg={2} lg={4} md={6} sm={12} xs={12}><VideoSquare socket={socket} style={{marginRight: '30px'}} roomInfo={roomInfo} /></Grid>) : ''}\r\n                    <Grid item xlg={roomInfo.isDm ? 12 : 10} lg={roomInfo.isDm ? 8 : 12} md={roomInfo.isDm ? 6 : 12} sm={roomInfo.isDm ? 12 : 12} xs={roomInfo.isDm ? 12 : 12}>\r\n                    <Box \r\n                        style={{backgroundColor: '#dce7e8', maxHeight: '500px',\r\n                        marginTop: '40px', overflowY: 'auto', minHeight: '60vh',\r\n                        borderRadius: '10px', padding: '30px', display: 'flex',\r\n                        flexDirection: 'column-reverse'}}>\r\n                            <Stack\r\n                                direction='column-reverse'\r\n                                justifyContent='space-evenly'\r\n                                alignItems='stretch'\r\n                                spacing={2}\r\n                            >\r\n                                    {allMessages.slice(0,40).map((message, index) => {\r\n                                        return (<Item key={index}>\r\n                                            <h4 style={{marginLeft: '5px', display: 'flex', flexFlow: 'row nowrap', alignItems: 'center'}}>\r\n                                                <NameMenu userName={message.userName} socket={socket} />  \r\n                                                <small> - {message.createdAt ? new Date(message.createdAt).toLocaleString() : new Date().toLocaleString()}</small>\r\n                                            </h4>\r\n                                            <p style={{marginLeft: '15px', color: 'black'}}>{message.message}</p>\r\n                                        </Item>)\r\n                                    })}\r\n\r\n                            </Stack>\r\n                        </Box>\r\n                        <TextField\r\n                            focused\r\n                            fullWidth\r\n                            id=\"outlined-multiline-flexible\"\r\n                            multiline\r\n                            id='messageBox'\r\n                            onKeyPress={e => e.key === 'Enter' ? handleSubmit(e) : null}\r\n                            maxRows={4}\r\n                            InputProps={{\r\n                                endAdornment: <InputAdornment position=\"end\">\r\n                                    <Button variant='contained' onClick={e => handleSubmit(e)}>Submit</Button>\r\n                                    </InputAdornment>,\r\n                            }}\r\n                            style={{marginBottom: '40px'}}\r\n                        />   \r\n                        </Grid>        \r\n                </Grid>\r\n            </Container>\r\n            <CallDialog\r\n                open={callOpen}\r\n                caller={caller}\r\n                setCallOpen={setCallOpen}\r\n            />\r\n        </>\r\n    );\r\n};\r\n\r\nexport default Chatroom;","import './App.css';\nimport Dashboard from './views/Dashboard';\nimport { BrowserRouter as Router, Route, Switch } from 'react-router-dom';\nimport Chatroom from './views/Chatroom';\nimport React, { useState } from 'react';\n\nfunction App() {\n\n  const [userName, setUserName] = useState('Guest-' + Math.random().toString(36).slice(2));\n  const [newRoomOpen, setNewRoomOpen] = useState(false);\n\n  return (\n    <div className=\"App\">\n      <Router>\n        <Switch>\n          <Route path='/chatroom/:id'>\n            <Chatroom newRoomOpen={newRoomOpen} setNewRoomOpen={setNewRoomOpen} />\n          </Route>\n          <Route path='/'>\n            <Dashboard setUserName={setUserName} newRoomOpen={newRoomOpen} setNewRoomOpen={setNewRoomOpen} />\n          </Route>\n        </Switch>\n      </Router>\n    </div>\n  );\n};\n\nexport default App;\n","const reportWebVitals = onPerfEntry => {\n  if (onPerfEntry && onPerfEntry instanceof Function) {\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\n      getCLS(onPerfEntry);\n      getFID(onPerfEntry);\n      getFCP(onPerfEntry);\n      getLCP(onPerfEntry);\n      getTTFB(onPerfEntry);\n    });\n  }\n};\n\nexport default reportWebVitals;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\nimport reportWebVitals from './reportWebVitals';\n\nReactDOM.render(\n    <App />,\n  document.getElementById('root')\n);\n\n// If you want to start measuring performance in your app, pass a function\n// to log results (for example: reportWebVitals(console.log))\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\nreportWebVitals();\n"],"sourceRoot":""}