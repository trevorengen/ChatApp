{"version":3,"sources":["components/NavBar.jsx","components/NavDrawer.jsx","components/LoginDialog.jsx","components/Greeting.jsx","components/RegisterDialog.jsx","components/CreateRoom.jsx","views/Dashboard.jsx","components/NameMenu.jsx","components/VideoSquare.jsx","components/CallDialog.jsx","views/Chatroom.jsx","App.js","reportWebVitals.js","index.js"],"names":["NavBar","props","history","useHistory","goHome","e","preventDefault","push","Box","sx","flexGrow","AppBar","position","Toolbar","IconButton","onClick","setOpen","open","axios","get","Cookies","withCredentials","then","user","setUserRooms","data","rooms","catch","err","console","log","handleDrawerClick","size","edge","color","mr","Typography","variant","component","pageHeader","isLoggedIn","dashboard","Button","response","handleLogoutClick","setRegisterOpen","registerOpen","handleRegisterClick","setLoginOpen","loginOpen","handleLoginClick","style","marginLeft","NavDrawer","handleRoomLink","roomId","Drawer","anchor","elevation","onClose","margin","setNewRoomOpen","handleAddOpen","Divider","List","userRooms","map","room","idx","isDm","ListItem","Link","underline","_id","host","users","roomName","LoginDialog","useState","email","password","info","setInfo","error","setError","close","Dialog","DialogContent","DialogTitle","DialogContentText","TextField","autoFocus","id","label","type","value","onChange","target","DialogActions","post","res","setCount","count","handleSubmit","Greeting","roomCode","setRoomCode","noRoom","setNoRoom","handleSnackClose","marginTop","minWidth","payload","userName","put","undefined","onSubmit","height","Snackbar","message","RegisterDialog","confirmPassword","setUser","errors","setErrors","display","flexFlow","justifyContent","helperText","maxWidth","handleClose","errorObj","Object","entries","handleRegister","CreateRoom","setRoomName","newRoomOpen","fullWidth","Dashboard","setIsLoggedIn","useEffect","setUserName","NameMenu","anchorEl","setAnchorEl","snack","setSnack","io","socket","Boolean","handleDm","targetUser","length","Math","random","toString","slice","emit","Chip","clickable","event","currentTarget","MenuListProps","MenuItem","userInfo","caller","VideoSquare","constraints","video","width","exact","audio","configuration","iceServers","urls","rtcPeerConnection","localStream","callHost","roomInfo","a","navigator","mediaDevices","getUserMedia","stream","document","getElementById","srcObject","addLocalTracks","getTracks","forEach","track","addTrack","createOffer","sessionDescription","setLocalDescription","sdp","createAnswer","setRemoteStream","streams","sendIceCandidate","candidate","sdpMLineIndex","setLocalStream","on","RTCPeerConnection","ontrack","onicecandidate","setRemoteDescription","RTCSessionDescription","RTCIceCandidate","autoPlay","CallDialog","setCallOpen","marginRight","handleAccept","Chatroom","Item","styled","Paper","theme","typography","body2","padding","spacing","textAlign","palette","text","secondary","setMessage","allMessages","setAllMessages","setRoomInfo","setCaller","callOpen","useParams","messages","reverse","disconnect","connect","Container","Grid","container","item","xlg","lg","md","sm","xs","minHeight","backgroundColor","maxHeight","overflowY","borderRadius","flexDirection","Stack","direction","alignItems","index","createdAt","Date","toLocaleString","focused","multiline","maxRows","InputProps","endAdornment","InputAdornment","messageObj","App","className","path","reportWebVitals","onPerfEntry","Function","getCLS","getFID","getFCP","getLCP","getTTFB","ReactDOM","render"],"mappings":"oUAmFeA,EAvEA,SAACC,GAEZ,IAAMC,EAAUC,cA6BVC,EAAS,SAACC,GACZA,EAAEC,iBACFJ,EAAQK,KAAK,MAGjB,OACI,cAACC,EAAA,EAAD,CAAKC,GAAI,CAAEC,SAAU,GAArB,SACI,cAACC,EAAA,EAAD,CAAQC,SAAS,SAAjB,SACI,eAACC,EAAA,EAAD,WACI,cAACC,EAAA,EAAD,CACIC,QAAS,SAAAV,GAAC,OArCJ,SAACA,GACvBA,EAAEC,iBACFL,EAAMe,SAAQf,EAAMgB,MACpBC,IAAMC,IAAI,uCAAyCC,IAAQD,IAAI,YAAa,CAAEE,iBAAiB,IAC1FC,MAAK,SAAAC,GACFtB,EAAMuB,aAAaD,EAAKE,KAAKF,KAAKG,UAErCC,OAAM,SAAAC,GAAG,OAAIC,QAAQC,IAAIF,MA8BAG,CAAkB1B,IAChC2B,KAAK,QACLC,KAAK,QACLC,MAAM,UACN,aAAW,OACXzB,GAAI,CAAE0B,GAAI,GANd,SAQI,cAAC,IAAD,MAEJ,cAACC,EAAA,EAAD,CAAYC,QAAQ,KAAKC,UAAU,MAAM7B,GAAI,CAAEC,SAAU,GAAzD,SACKT,EAAMsC,aAEVtC,EAAMuC,WACH,qCACKvC,EAAMwC,UAAY,GAAK,cAACC,EAAA,EAAD,CAAQR,MAAM,UAAUnB,QAAS,SAAAV,GAAC,OAAID,EAAOC,IAA7C,kBACxB,cAACqC,EAAA,EAAD,CAAQR,MAAM,UAAUnB,QAAS,SAAAV,GAAC,OAhChC,SAACA,GACvBA,EAAEC,iBACFY,IAAMC,IAAI,wCAAyC,CAAEE,iBAAiB,IACjEC,MAAK,kBAAMpB,EAAQK,KAAK,QACxBoB,OAAM,SAAAC,GAAG,OAAIC,QAAQC,IAAIF,EAAIe,aA4BwBC,CAAkBvC,IAAxD,uBAGJ,qCACKJ,EAAMwC,UAAY,GAAK,cAACC,EAAA,EAAD,CAAQR,MAAM,UAAUnB,QAAS,SAAAV,GAAC,OAAID,EAAOC,IAA7C,kBACxB,cAACqC,EAAA,EAAD,CAAQR,MAAM,UAAUnB,QAAS,SAAAV,GAAC,OA1C9B,SAACA,GACzBA,EAAEC,iBACFL,EAAM4C,iBAAgB5C,EAAM6C,cAwC8BC,CAAoB1C,IAA1D,sBACA,cAACqC,EAAA,EAAD,CAAQR,MAAM,UAAUnB,QAAS,SAAAV,GAAC,OAhDjC,SAACA,GACtBA,EAAEC,iBACFL,EAAM+C,cAAa/C,EAAMgD,WA8CiCC,CAAiB7C,IAAI8C,MAAO,CAACC,WAAY,QAA/E,8B,+DCDbC,EAlEG,SAACpD,GAEf,IAAMC,EAAUC,cAWVmD,EAAiB,SAACjD,EAAGkD,GACvBlD,EAAEC,iBACFJ,EAAQK,KAAK,aAAegD,IAGhC,OACI,eAACC,EAAA,EAAD,CACIC,OAAO,OACPC,UAAW,GACXzC,KAAMhB,EAAMgB,KACZ0C,QAnBM,WACV1D,EAAMe,SAAQ,IAcd,UAMI,qBAAImC,MAAO,CAACS,OAAQ,aAApB,uBACK3D,EAAMuC,WAEH,cAAC1B,EAAA,EAAD,CAAYkB,KAAK,QAAQK,QAAQ,YAAYH,MAAM,UAC/CnB,QAAS,SAAAV,GAAC,OArBR,SAACA,GACnBA,EAAEC,iBACFL,EAAM4D,gBAAe,GAmBSC,CAAczD,IADhC,SAEI,cAAC,IAAD,MAEA,QAEZ,cAAC0D,EAAA,EAAD,IACA,eAACC,EAAA,EAAD,WACI,oBAAIb,MAAO,CAACS,OAAQ,QAApB,6BACC3D,EAAMgE,UAAUC,KAAI,SAACC,EAAMC,GACxB,GAAID,EAAKE,KACL,OACI,cAACC,EAAA,EAAD,UACI,cAACC,EAAA,EAAD,CAAMC,UAAU,QAAQlC,UAAU,SAASD,QAAQ,KACnDtB,QAAS,SAAAV,GAAC,OAAIiD,EAAejD,EAAG8D,EAAKM,MADrC,SAC4CN,EAAKO,OAAStD,IAAQD,IAAI,YAAcgD,EAAKQ,MAAM,GAAKR,EAAKO,QAF9FN,SAQ/B,cAACL,EAAA,EAAD,IACA,eAACC,EAAA,EAAD,WACI,oBAAIb,MAAO,CAACS,OAAQ,QAApB,wBACC3D,EAAMgE,UAAUC,KAAI,SAACC,EAAMC,GACxB,IAAKD,EAAKE,KACN,OACI,cAACC,EAAA,EAAD,UACI,cAACC,EAAA,EAAD,CAAMC,UAAU,QAAQlC,UAAU,SAASD,QAAQ,KACnDtB,QAAS,SAAAV,GAAC,OAAIiD,EAAejD,EAAG8D,EAAKM,MADrC,SAC4CN,EAAKS,YAFtCR,a,8DCS5BS,EA5DK,SAAC5E,GAEjB,MAAwB6E,mBAAS,CAAEC,MAAO,GAAIC,SAAU,KAAxD,mBAAOC,EAAP,KAAaC,EAAb,KACA,EAA0BJ,mBAAS,IAAnC,mBAAOK,EAAP,KAAcC,EAAd,KAEMC,EAAQ,WACVH,EAAQ,CAAEH,MAAO,GAAIC,SAAU,KAC/B/E,EAAM+C,cAAa,IAgBvB,OACI,eAACsC,EAAA,EAAD,CAAQrE,KAAMhB,EAAMgD,UAAWU,QAAS0B,EAAxC,UACI,eAACE,EAAA,EAAD,WACI,cAACC,EAAA,EAAD,oBACA,eAACC,EAAA,EAAD,0DACgD,uBAC5C,uBAAOtC,MAAO,CAACjB,MAAO,OAAtB,SAA+BiD,OAEnC,cAACO,EAAA,EAAD,CACIC,WAAS,EACT/B,OAAO,QACPgC,GAAG,QACHC,MAAM,gBACNC,KAAK,QACLzD,QAAQ,WACR0D,MAAOd,EAAKF,MACZiB,SAAU,SAAA3F,GAAC,OAAI6E,EAAQ,2BAAKD,GAAN,IAAYF,MAAO1E,EAAE4F,OAAOF,YAEtD,cAACL,EAAA,EAAD,CACI9B,OAAO,QACPgC,GAAG,WACHC,MAAM,WACNC,KAAK,WACLzD,QAAQ,WACR0D,MAAOd,EAAKD,SACZgB,SAAU,SAAA3F,GAAC,OAAI6E,EAAQ,2BAAKD,GAAN,IAAYD,SAAU3E,EAAE4F,OAAOF,UACrD5C,MAAO,CAACC,WAAY,aAG5B,eAAC8C,EAAA,EAAD,WACI,cAACxD,EAAA,EAAD,CAAQ3B,QAASsE,EAAjB,oBACA,cAAC3C,EAAA,EAAD,CAAQ3B,QAAS,SAAAV,GAAC,OA5CT,SAACA,GAClBA,EAAEC,iBACFY,IAAMiF,KAAK,uCAAwClB,EAAM,CAAE5D,iBAAiB,IACvEC,MAAK,SAAA8E,GACFnG,EAAMoG,SAASpG,EAAMqG,MAAQ,GAC7BrG,EAAM+C,cAAa,GACnBnB,QAAQC,IAAIsE,MAEfzE,OAAM,SAAAC,GACHwD,EAASxD,EAAIe,SAASlB,SAmCA8E,CAAalG,IAAIgC,QAAQ,YAA/C,2B,SCCDmE,EAzDE,WAEb,MAAgC1B,mBAAS,IAAzC,mBAAO2B,EAAP,KAAiBC,EAAjB,KACA,EAA4B5B,oBAAS,GAArC,mBAAO6B,EAAP,KAAeC,EAAf,KACA,EAA0B9B,mBAAS,IAAnC,mBAAOK,EAAP,KAAcC,EAAd,KACMlF,EAAUC,cAuBV0G,EAAmB,WACrBzB,EAAS,IACTwB,GAAU,IAGd,OACI,gCACI,oBAAIzD,MAAO,CAAC2D,UAAW,SAAvB,2DACA,cAACpB,EAAA,EAAD,CACIvC,MAAO,CAAC4D,SAAU,SAClBjB,KAAK,OACLC,MAAOU,EACPT,SAAU,SAAA3F,GAAC,OAAIqG,EAAYrG,EAAE4F,OAAOF,UAExC,cAACrD,EAAA,EAAD,CACI3B,QAAS,SAAAV,GAAC,OApCL,SAACA,GACdA,EAAEC,iBACFY,IAAMC,IAAI,mCAAqCsF,GAC1CnF,MAAK,SAAA6C,GAEF,IAAM6C,EAAU,CAAE7C,KADlBA,EAAOA,EAAK1C,KAAK0C,KACa8C,SAAU7F,IAAQD,IAAI,aACpDD,IAAMgG,IAAI,yCAA0CF,EAAS,CAAE3F,iBAAiB,IAC3EC,MAAK,kBAAMpB,EAAQK,KAAK,aAAe4D,EAAKM,QAC5C9C,OAAM,SAAAC,QAC6BuF,IAA5BvF,EAAIe,SAASlB,KAAK0D,MAClBC,EAAS,wCAETA,EAASxD,EAAIe,SAASlB,KAAK0D,OAE/BuB,EAAY,IACZE,GAAU,SAGrBjF,OAAM,SAAAwD,GAAK,OAAItD,QAAQC,IAAIqD,MAkBViC,CAAS/G,IACvBgC,QAAQ,YACRc,MAAO,CAACC,WAAY,OAAQiE,OAAQ,OAAQP,UAAW,OAH3D,mBAKA,cAACQ,EAAA,EAAD,CAAUC,QAAQ,gCACdtG,KAAM0F,EACNhD,QAASkD,IACb,cAACS,EAAA,EAAD,CAAUC,QAASpC,EACflE,KAAM0F,EACNhD,QAASkD,QCoEVW,EAtHQ,SAACvH,GAEpB,MAAwB6E,mBAAS,CAC7BmC,SAAU,GACVlC,MAAO,GACPC,SAAU,GACVyC,gBAAiB,KAJrB,mBAAOlG,EAAP,KAAamG,EAAb,KAMA,EAA4B5C,mBAAS,CACjCC,MAAO,GACPC,SAAU,GACViC,SAAU,GACVQ,gBAAiB,KAJrB,mBAAOE,EAAP,KAAeC,EAAf,KAOMvC,EAAQ,WACVpF,EAAM4C,iBAAgB,GACtB6E,EAAQ,CACJT,SAAU,GACVlC,MAAO,GACPC,SAAU,GACVyC,gBAAiB,MA+BzB,OACI,eAACnC,EAAA,EAAD,CAAQrE,KAAMhB,EAAM6C,aAAca,QAAS0B,EAA3C,UACI,eAACE,EAAA,EAAD,WACI,cAACC,EAAA,EAAD,6BACI,cAACC,EAAA,EAAD,uEAGA,sBAAKtC,MAAO,CAAC0E,QAAS,OAAQC,SAAU,aAAcC,eAAgB,gBAAtE,UACI,cAACrC,EAAA,EAAD,CACIP,MAA2B,KAApBwC,EAAOV,SACde,WAAgC,KAApBL,EAAOV,SAAkB,GAAKU,EAAOV,SACjDtB,WAAS,EACT/B,OAAO,QACPgC,GAAG,WACHC,MAAM,YACNC,KAAK,OACLzD,QAAQ,WACR0D,MAAOxE,EAAK0F,SACZjB,SAAU,SAAA3F,GAAC,OAAIqH,EAAQ,2BAAKnG,GAAN,IAAY0F,SAAU5G,EAAE4F,OAAOF,YAEzD,cAACL,EAAA,EAAD,CACIP,MAAwB,KAAjBwC,EAAO5C,MACdiD,WAA6B,KAAjBL,EAAO5C,MAAe,GAAK4C,EAAO5C,MAC9CnB,OAAO,QACPgC,GAAG,QACHC,MAAM,QACNC,KAAK,QACLzD,QAAQ,WACR0D,MAAOxE,EAAKwD,MACZiB,SAAU,SAAA3F,GAAC,OAAIqH,EAAQ,2BAAInG,GAAL,IAAWwD,MAAO1E,EAAE4F,OAAOF,eAGzD,sBAAK5C,MAAO,CAAC0E,QAAS,OAAQC,SAAU,aAAcC,eAAgB,gBAAtE,UACI,cAACrC,EAAA,EAAD,CACIP,MAA2B,KAApBwC,EAAO3C,SACdgD,WAAgC,KAApBL,EAAO3C,SAAkB,GAAK2C,EAAO3C,SACjDpB,OAAO,QACPgC,GAAG,WACHC,MAAM,WACNC,KAAK,WACLzD,QAAQ,WACR0D,MAAOxE,EAAKyD,SACZgB,SAAU,SAAA3F,GAAC,OAAIqH,EAAQ,2BAAInG,GAAL,IAAWyD,SAAU3E,EAAE4F,OAAOF,UACpD5C,MAAO,CAAC8E,SAAU,WAEtB,cAACvC,EAAA,EAAD,CACIP,MAAkC,KAA3BwC,EAAOF,gBACdO,WAAuC,KAA3BL,EAAOF,gBAAyB,GAAKE,EAAOF,gBACxD7D,OAAO,QACPgC,GAAG,kBACHC,MAAM,mBACNC,KAAK,WACLzD,QAAQ,WACR0D,MAAOxE,EAAKkG,gBACZzB,SAAU,SAAA3F,GAAC,OAAIqH,EAAQ,2BAAInG,GAAL,IAAWkG,gBAAiBpH,EAAE4F,OAAOF,kBAI3E,eAACG,EAAA,EAAD,WACI,cAACxD,EAAA,EAAD,CAAQ3B,QAAS,SAAAV,GAAC,OAtFV,SAACA,GACjBA,EAAEC,iBACFL,EAAM4C,iBAAgB,GAoFQqF,CAAY7H,IAAlC,oBACA,cAACqC,EAAA,EAAD,CAAQL,QAAQ,YAAYtB,QAAS,SAAAV,GAAC,OAlF3B,SAACA,GACpBA,EAAEC,iBACFY,IAAMiF,KAAK,0CAA2C5E,EAAM,CAAEF,iBAAiB,IAC1EC,MAAK,SAAA8E,GACFnG,EAAMoG,SAASpG,EAAMqG,MAAQ,GAC7BjB,OAEH1D,OAAM,SAAAC,GAQH,IAPA,IAAIuG,EAAW,GAOf,MAA+BC,OAAOC,QAAQzG,EAAIe,SAASlB,KAAK0D,MAAMwC,QAAtE,eAA+E,CAA1E,0BAAOxC,EAAP,KAAcoC,EAAd,KACDY,EAAShD,GAASoC,EAAQA,QAE9BK,EAAU,2BATU,CAChB7C,MAAO,GACPC,SAAU,GACViC,SAAU,GACVQ,gBAAiB,KAKWU,OAgEUG,CAAejI,IAAzD,6BC1DDkI,EApDI,SAACtI,GAEhB,MAAgC6E,mBAAS,IAAzC,mBAAOF,EAAP,KAAiB4D,EAAjB,KACMtI,EAAUC,cAEVkF,EAAQ,WACVpF,EAAM4D,gBAAe,IAkBzB,OACI,eAACyB,EAAA,EAAD,CAAQrE,KAAMhB,EAAMwI,YAAa9E,QAAS0B,EAA1C,UACI,eAACE,EAAA,EAAD,WACI,cAACC,EAAA,EAAD,4BACA,eAACC,EAAA,EAAD,2DACiD,uBAC7C,uBAAOtC,MAAO,CAACjB,MAAO,YAE1B,cAACwD,EAAA,EAAD,CACIgD,WAAS,EACT/C,WAAS,EACT/B,OAAO,QACPgC,GAAG,WACHC,MAAM,YACNC,KAAK,OACLzD,QAAQ,WACR0D,MAAOnB,EACPoB,SAAU,SAAA3F,GAAC,OAAImI,EAAYnI,EAAE4F,OAAOF,aAG5C,eAACG,EAAA,EAAD,WACI,cAACxD,EAAA,EAAD,CAAQ3B,QAASsE,EAAjB,oBACA,cAAC3C,EAAA,EAAD,CAAQL,QAAQ,YAAYtB,QAAS,SAAAV,GAAC,OArC7B,SAACA,GAClBA,EAAEC,iBACFY,IAAMiF,KAAK,oCAAqC,CAAEvB,SAAUA,EAAUD,MAAO,CAACvD,IAAQD,IAAI,aAAckD,MAAM,EAAOK,KAAMtD,IAAQD,IAAI,aAAc,CAAEE,iBAAiB,IACnKC,MAAK,SAAA6C,GACFjD,IAAMgG,IAAI,0CAA2C,CAAE/C,KAAMA,EAAK1C,KAAK0C,KAAM8C,SAAU7F,IAAQD,IAAI,aAAe,CAAEE,iBAAiB,IAChIC,MAAK,SAAAI,GAAK,OAAIG,QAAQC,IAAIJ,MAC1BC,OAAM,SAAAC,GAAG,OAAIC,QAAQC,IAAIF,EAAIe,aAClCzC,EAAQK,KAAK,aAAa4D,EAAK1C,KAAK0C,KAAKM,KACzCY,IACAmD,EAAY,IACZvI,EAAMe,SAAQ,MAEjBW,OAAM,SAAAC,GAAG,OAAIC,QAAQC,IAAIF,EAAIe,aAyBgB4D,CAAalG,IAAvD,2BCRDsI,EAzCG,SAAC1I,GAEf,MAAwB6E,oBAAS,GAAjC,mBAAO7D,EAAP,KAAaD,EAAb,KACA,EAAkC8D,oBAAS,GAA3C,mBAAO7B,EAAP,KAAkBD,EAAlB,KACA,EAAwC8B,oBAAS,GAAjD,mBAAOhC,EAAP,KAAqBD,EAArB,KACA,EAAoCiC,oBAAS,GAA7C,mBAAOtC,EAAP,KAAmBoG,EAAnB,KACA,EAA0B9D,mBAAS,GAAnC,mBAAOwB,EAAP,KAAcD,EAAd,KACA,EAAkCvB,mBAAS,IAA3C,mBAAOb,EAAP,KAAkBzC,EAAlB,KAcA,OAJAqH,qBAAU,WAPN3H,IAAMC,IAAI,4CAA6C,CAAEE,iBAAkB,IACtEC,MAAK,WACFsH,GAAc,MAEjBjH,MAAMiH,GAAc,MAK1B,CAACtC,IAGA,qCACI,cAAC,EAAD,CAAQ/D,WAAY,GAAIvB,QAASA,EAASC,KAAMA,EAAM+B,aAAcA,EAAcC,UAAWA,EACzFH,aAAcA,EAAcD,gBAAiBA,EAAiBL,WAAYA,EAC1E8D,MAAOA,EAAOD,SAAUA,EAAUpC,UAAWA,EAAWzC,aAAcA,EACtEiB,WAAW,IACf,cAAC,EAAD,CAAWxB,KAAMA,EAAMD,QAASA,EAASwB,WAAYA,EACjDiG,YAAaxI,EAAMwI,YAAa5E,eAAgB5D,EAAM4D,eACtDI,UAAWA,EAAWzC,aAAcA,IACxC,cAAC,EAAD,CAAYiH,YAAaxI,EAAMwI,YAAa5E,eAAgB5D,EAAM4D,iBAClE,cAAC,EAAD,CAAaZ,UAAWA,EAAWD,aAAcA,EAAcsD,MAAOA,EAAOD,SAAUA,EACnFyC,YAAa7I,EAAM6I,cACvB,cAAC,EAAD,CAAgBhG,aAAcA,EAAcD,gBAAiBA,EACzDyD,MAAOA,EAAOD,SAAUA,IAC5B,cAAC,EAAD,Q,qIC4DG0C,GA9FE,SAAC9I,GAEd,MAAgC6E,mBAAS,MAAzC,mBAAOkE,EAAP,KAAiBC,EAAjB,KACA,EAA0BnE,oBAAS,GAAnC,mBAAOoE,EAAP,KAAcC,EAAd,KACA,EAAiBrE,oBAAS,kBAAMsE,KAAG,YAA5BC,EAAP,oBACMpI,EAAOqI,QAAQN,GACf9I,EAAUC,cAMV+H,EAAc,WAClBe,EAAY,OAORM,EAAW,SAACC,GACdtI,IAAMC,IAAI,8BAAgCC,IAAQD,IAAI,YAAc,IAAMqI,GACrElI,MAAK,SAAAI,GAC6B,IAA3BA,EAAMD,KAAK0C,KAAKsF,QACpBvI,IAAMiF,KAAK,oCAAqC,CAC5CvB,SAAU8E,KAAKC,SAASC,SAAS,IAAIC,MAAM,GAC3ClF,MAAO,CAACvD,IAAQD,IAAI,YAAaqI,GACjCnF,MAAM,EACNK,KAAMtD,IAAQD,IAAI,cAEjBG,MAAK,SAAA6C,GACFtC,QAAQC,MACRZ,IAAMgG,IAAI,0CAA2C,CAAE/C,KAAMA,EAAK1C,KAAK0C,KAAM8C,SAAU7F,IAAQD,IAAI,aAAe,CAAEE,iBAAiB,IAChIC,MAAK,SAAAI,GAAK,OAAIG,QAAQC,IAAIJ,MAC1BC,OAAM,SAAAC,GAAG,OAAIC,QAAQC,IAAIF,EAAIe,aAElCzB,IAAMgG,IAAI,0CAA2C,CAAE/C,KAAMA,EAAK1C,KAAK0C,KAAM8C,SAAUuC,GAAc,CAAEnI,iBAAiB,IACnHC,MAAK,SAAAI,GAAK,OAAIG,QAAQC,IAAIJ,MAC1BC,OAAM,SAAAC,GAAG,OAAIC,QAAQC,IAAIF,EAAIe,aAElCzC,EAAQK,KAAK,aAAe4D,EAAK1C,KAAK0C,KAAKM,QAE9C9C,OAAM,SAAAC,GAAG,OAAIC,QAAQC,IAAIF,EAAIe,aAElC0G,EAAOS,KAAK,SAAUN,KAElBL,GAAS,GACTjB,IACAhI,EAAQK,KAAK,aAAemB,EAAMD,KAAK0C,KAAKM,SAGnD9C,OAAM,SAAAC,GAAG,OAAIC,QAAQC,IAAIF,OAclC,OACI,gCACI,cAACmI,GAAA,EAAD,CAAMlE,MAAO5F,EAAMgH,SACf3E,UAAU,IACV,gBAAc,aACd,gBAAc,OACd,gBAAerB,EAAO,YAASkG,EAC/B6C,WAAS,EACTjJ,QAjEQ,SAACkJ,GACnBhB,EAAYgB,EAAMC,kBAiEZ,eAAC,KAAD,CACItE,GAAG,aACHoD,SAAUA,EACV/H,KAAMA,EACN0C,QAASuE,EACTiC,cAAe,CACf,kBAAmB,gBANvB,UASI,cAACC,GAAA,EAAD,CAAUrJ,QAAS,kBAAMwI,EAAStJ,EAAMgH,WAAxC,4BACA,cAACmD,GAAA,EAAD,CAAUrJ,QAAS,kBA9BXyI,EA8B4BvJ,EAAMgH,SA7BlDsC,EAASC,QACTtI,IAAMC,IAAI,uCAAyCqI,EAAY,CAAEnI,iBAAiB,IAC7EC,MAAK,SAAAC,GACF,IAAM8I,EAAW9I,EAAKE,KAAKF,KAC3B8H,EAAOS,KAAK,aAAc,CAAEO,SAAUA,EAAUC,OAAQlJ,IAAQD,IAAI,iBAGvEQ,OAAM,SAAAC,GAAG,OAAIC,QAAQC,IAAIF,MARf,IAAC4H,GA8BR,kBACA,cAACY,GAAA,EAAD,CAAUrJ,QAASmH,EAAnB,wBAEJ,cAACZ,EAAA,EAAD,CAAUC,QAAQ,0CACdtG,KAAMiI,EACNvF,QAzEa,WACrBwF,GAAS,U,6BCuHFoB,GA9IK,SAACtK,GAEjB,IAAMuK,EAAc,CAChBC,MAAO,CAACC,MAAO,CAACC,MAAO,KAAMtD,OAAQ,CAACsD,MAAO,MAC7CC,OAAO,GAELC,EAAgB,CAAEC,WAAY,CAChC,CAAEC,KAAM,gCACR,CAAEA,KAAM,iCACR,CAAEA,KAAM,iCACR,CAAEA,KAAM,iCACR,CAAEA,KAAM,mCAEZ,EAAiBjG,oBAAS,kBAAMsE,KAAG,YAA5BC,EAAP,oBAoHA,OAlHAR,qBAAU,WACN,IAAImC,EACAC,EAEAC,EAAWjL,EAAMkL,SAASzG,KAC1BnB,EAAStD,EAAMkL,SAAS1G,IALhB,8CA8CZ,WAA8B+F,GAA9B,gBAAAY,EAAA,+EAE2BC,UAAUC,aAAaC,aAAaf,GAF/D,OAEYgB,EAFZ,OAGuBC,SAASC,eAAe,YAC9BC,UAAYH,EAJ7B,gDAMQ3J,QAAQC,IAAI,6BAAZ,MANR,iEA9CY,wBAwDZ,SAAS8J,EAAeZ,GACpBC,EAAYY,YAAYC,SAAQ,SAACC,GAC7Bf,EAAkBgB,SAASD,EAAOd,MA1D9B,SA8DGgB,EA9DH,gFA8DZ,WAA2BjB,GAA3B,gBAAAI,EAAA,+EAGmCJ,EAAkBiB,cAHrD,OAGQC,EAHR,OAIQlB,EAAkBmB,oBAAoBD,GAJ9C,gDAMQrK,QAAQsD,MAAR,MANR,QASIkE,EAAOS,KAAK,QAAS,CACjBhE,KAAM,QACNsG,IAAKF,EACL3I,WAZR,yDA9DY,iCA8EG8I,EA9EH,gFA8EZ,WAA4BrB,GAA5B,gBAAAI,EAAA,+EAGmCJ,EAAkBqB,eAHrD,OAGQH,EAHR,OAIQlB,EAAkBmB,oBAAoBD,GAJ9C,gDAMQrK,QAAQsD,MAAR,MANR,QASIkE,EAAOS,KAAK,SAAU,CAClBhE,KAAM,SACNsG,IAAKF,EACL3I,WAZR,yDA9EY,wBA8FZ,SAAS+I,EAAgBrC,GACrBwB,SAASC,eAAe,aAAaC,UAAY1B,EAAMsC,QAAQ,GAChDtC,EAAMuB,OAGzB,SAASgB,EAAiBvC,GAClBA,EAAMwC,WACNpD,EAAOS,KAAK,gBAAiB,CACzBvG,SACAsC,MAAOoE,EAAMwC,UAAUC,cACvBD,UAAWxC,EAAMwC,UAAUA,aAxG3B,oCAOZE,CAAenC,GAEfnB,EAAOuD,GAAG,OAAV,wBAAkB,uBAAAxB,EAAA,yDACVF,IAAa9J,IAAQD,IAAI,YADf,uBAEVU,QAAQC,IAAI,eAEZ8J,EADAZ,EAAoB,IAAI6B,kBAAkBhC,IAE1CG,EAAkB8B,QAAUR,EAC5BtB,EAAkB+B,eAAiBP,EANzB,SAQJP,EAAYjB,GARR,mDAYlB3B,EAAOuD,GAAG,QAAV,yCAAmB,WAAO3C,GAAP,UAAAmB,EAAA,yDACZF,IAAa9J,IAAQD,IAAI,YADb,uBAGXyK,EADAZ,EAAoB,IAAI6B,kBAAkBhC,IAE1CG,EAAkB8B,QAAUR,EAC5BtB,EAAkB+B,eAAiBP,EACnCxB,EAAkBgC,qBAAqB,IAAIC,sBAAsBhD,IANtD,SAOLoC,EAAarB,GAPR,OAQXnJ,QAAQC,IAAI,gBARD,mDAAnB,uDAYAuH,EAAOuD,GAAG,UAAU,SAAC3C,GACjBe,EAAkBgC,qBAAqB,IAAIC,sBAAsBhD,OAGrEZ,EAAOuD,GAAG,iBAAiB,SAAC3C,GACR,IAAIiD,gBAAgB,CAChCR,cAAezC,EAAMpE,MACrB4G,UAAWxC,EAAMwC,eAsEzBpD,EAAOS,KAAK,OAAQvG,KAErB,IAGC,qCACI,uBAAOqC,GAAG,YAAYuH,UAAQ,IAI9B,uBAAOvH,GAAG,WAAWuH,UAAQ,QC1F1BC,GArCI,SAACnN,GAEhB,IAAMC,EAAUC,cAChB,EAAiB2E,oBAAS,kBAAMsE,KAAG,YAA5BC,EAAP,oBAEMnB,EAAc,SAAC7H,GACjBA,EAAEC,iBACFL,EAAMoN,aAAY,IActB,OACI,eAAC/H,EAAA,EAAD,CAAQrE,KAAMhB,EAAMgB,KAAM0C,QAAS,SAAAtD,GAAC,OAAI6H,EAAY7H,IAApD,UACI,eAACmF,EAAA,EAAD,2CAA2CvF,EAAMqK,OAAjD,OACA,cAAC/E,EAAA,EAAD,UACI,cAACE,EAAA,EAAD,8DAIJ,eAACS,EAAA,EAAD,CAAe/C,MAAO,CAACS,OAAQ,UAA/B,UACI,cAAClB,EAAA,EAAD,CAAQ3B,QAAS,SAAAV,GAAC,OAAI6H,EAAY7H,IAAI8C,MAAO,CAACmK,YAAa,QAA3D,qBACA,cAAC5K,EAAA,EAAD,CAAQL,QAAQ,YAAYtB,QAAS,SAAAV,GAAC,OArB7B,SAACA,GAClBA,EAAEC,iBACFY,IAAMC,IAAI,8BAAgClB,EAAMqK,OAAS,IAAMlJ,IAAQD,IAAI,YAAa,CAAEE,iBAAiB,IACtGC,MAAK,SAAA6C,GACFjE,EAAQK,KAAK,aAAe4D,EAAK1C,KAAK0C,KAAK,GAAGM,KAC9C4E,EAAOS,KAAK,OAAQ3F,EAAK1C,KAAK0C,KAAK,GAAGM,QAEzC9C,OAAM,SAAAC,GAAG,OAAIC,QAAQC,IAAIF,MAC9B3B,EAAMoN,aAAY,GAagCE,CAAalN,IAAvD,2BCqHDmN,GA9IE,SAACvN,GAEd,IAAMwN,EAAOC,YAAOC,IAAPD,EAAc,gBAAGE,EAAH,EAAGA,MAAH,mBAAC,eACrBA,EAAMC,WAAWC,OADG,IAEvBC,QAASH,EAAMI,QAAQ,GACvBC,UAAW,OACX/L,MAAO0L,EAAMM,QAAQC,KAAKC,eAG9B,EAAiBtJ,oBAAS,kBAAMsE,KAAG,YAA5BC,EAAP,oBACA,EAA8BvE,mBAAS,IAAvC,mBAAOyC,EAAP,KAAgB8G,EAAhB,KACA,EAAsCvJ,mBAAS,IAA/C,mBAAOwJ,EAAP,KAAoBC,EAApB,KACA,EAAwBzJ,oBAAS,GAAjC,mBAAO7D,EAAP,KAAaD,EAAb,KACA,EAAkC8D,oBAAS,GAA3C,mBAAO7B,EAAP,KAAkBD,EAAlB,KACA,EAAwC8B,oBAAS,GAAjD,mBAAOhC,EAAP,KAAqBD,EAArB,KACA,EAAoCiC,oBAAS,GAA7C,mBAAOtC,EAAP,KACA,GADA,KAC0BsC,mBAAS,IAAnC,mBAAOwB,EAAP,KAAcD,EAAd,KACA,EAAkCvB,mBAAS,IAA3C,mBAAOb,GAAP,KAAkBzC,GAAlB,KACA,GAAgCsD,mBAAS,IAAzC,qBAAOqG,GAAP,MAAiBqD,GAAjB,MACA,GAA4B1J,mBAAS,IAArC,qBAAOwF,GAAP,MAAemE,GAAf,MACA,GAAgC3J,oBAAS,GAAzC,qBAAO4J,GAAP,MAAiBrB,GAAjB,MACQzH,GAAO+I,cAAP/I,GA0DR,OA7CAiD,qBAAU,WA0CN,OAzCA3H,IAAMC,IAAI,8BAAgCyE,GAAI,CAAEvE,iBAAiB,IAC5DC,MAAK,SAAA6C,GACFqK,GAAYrK,EAAK1C,KAAK0C,MACtBtC,QAAQC,IAAIqC,EAAK1C,KAAK0C,SAEzBxC,OAAM,SAAAC,GAAG,OAAIC,QAAQC,IAAIF,MAE9BV,IAAMC,IAAI,6CAA+CyE,GAAI,CAAEvE,iBAAiB,IAC3EC,MAAK,SAAAsN,GACFL,EAAeK,EAASnN,KAAKmN,SAASC,cAEzClN,OAAM,SAAAC,GAAG,OAAIC,QAAQC,IAAIF,EAAIe,aAElC0G,EAAOyF,YAAW,GAClBzF,EAAO0F,UACP1F,EAAOuD,GAAG,WAAW,WACjB/K,QAAQC,IAAIuH,EAAOzD,IACnB1E,IAAMgG,IAAI,8CAA+C,CAAED,SAAU7F,IAAQD,IAAI,YAAakI,OAAQA,EAAOzD,IAAM,CAAEvE,iBAAiB,IACjIC,MAAK,SAAAC,GAAI,OAAIA,KACbI,OAAM,SAAAC,GAAG,OAAIC,QAAQC,IAAIF,SAGlCyH,EAAOuD,GAAG,kBAAkB,SAACnL,GACzBI,QAAQC,IAAIL,GACZP,IAAMC,IAAI,6CAA+CM,EAAM,CAAEJ,iBAAiB,IAC7EC,MAAK,SAAAsN,GACFL,EAAe,YAAIK,EAASnN,KAAKmN,SAASC,eAE7ClN,OAAM,SAAAC,GAAG,OAAIC,QAAQC,IAAIF,EAAIe,gBAGtC0G,EAAOuD,GAAG,kBAAkB,SAACtC,GACzBmE,GAAUnE,GACV+C,IAAY,MAGhBhE,EAAOuD,GAAG,aAAa,SAACnL,GACpBI,QAAQC,IAAIL,MAEhB4H,EAAOS,KAAK,OAAQlE,IAEb,kBAAMyD,EAAOyF,YAAW,MAChC,CAAClJ,GAAIyD,IAGJ,qCACI,cAAC,EAAD,aAAQ9G,WAAY,GAAIvB,QAASA,EAASC,KAAMA,EAAM+B,aAAcA,EAAcC,UAAWA,EAC7FH,aAAcA,EAAcD,gBAAiBA,EAAiBL,WAAYA,EAC1E8D,MAAOA,EAAOD,SAAUA,EAAUpC,UAAWA,GAAWzC,aAAcA,IAFtE,aAGY2J,GAAS9G,KAAQ8G,GAASzG,OAAStD,IAAQD,IAAI,YAAcgK,GAASxG,MAAM,GAAKwG,GAASzG,KAAQyG,GAASvG,WACvH,cAAC,EAAD,CAAY6D,YAAaxI,EAAMwI,YAAa5E,eAAgB5D,EAAM4D,eAAgB7C,QAASA,IAC3F,cAAC,EAAD,CAAWC,KAAMA,EAAMD,QAASA,EAASiD,UAAWA,GAAWzC,aAAcA,GACzEgB,WAAYA,EAAYiG,YAAaxI,EAAMwI,YAAa5E,eAAgB5D,EAAM4D,iBAClF,cAACmL,EAAA,EAAD,CAAW/G,SAAS,MAApB,SACI,eAACgH,EAAA,EAAD,CAAMC,WAAS,EAAClB,QAAS,EAAzB,UACK7C,GAAS9G,KAAQ,cAAC4K,EAAA,EAAD,CAAME,MAAI,EAACC,IAAK,EAAGC,GAAI,EAAGC,GAAI,EAAGC,GAAI,EAAGC,GAAI,EAA5C,SAA+C,cAAC,GAAD,CAAarM,MAAO,CAACmK,YAAa,QAASnC,SAAUA,OAAuB,GAC7I,eAAC8D,EAAA,EAAD,CAAME,MAAI,EAACC,IAAKjE,GAAS9G,KAAO,GAAK,GAAIgL,GAAIlE,GAAS9G,KAAO,EAAI,GAAIiL,GAAInE,GAAS9G,KAAO,EAAI,GAAIkL,GAAIpE,GAAS9G,KAAO,EAAI,GAAImL,GAAIrE,GAAS9G,KAAO,EAAI,GAArJ,UACA,cAAC,IAAD,CACIlB,MAAO,CAACsM,UAAW,QAAS1I,SAAU,QACtC2I,gBAAiB,UAAWC,UAAW,QACvC7I,UAAW,OAAQ8I,UAAW,OAC9BC,aAAc,OAAQ9B,QAAS,OAAQlG,QAAS,OAChDiI,cAAe,kBALnB,SAMQ,cAACC,EAAA,EAAD,CACIC,UAAU,iBACVjI,eAAe,eACfkI,WAAW,UACXjC,QAAS,EAJb,SAMSM,EAAYzE,MAAM,EAAE,IAAI3F,KAAI,SAACqD,EAAS2I,GACnC,OAAQ,eAACzC,EAAD,WACJ,qBAAItK,MAAO,CAACC,WAAY,MAAOyE,QAAS,OAAQC,SAAU,aAAcmI,WAAY,UAApF,UACI,cAAC,GAAD,CAAUhJ,SAAUM,EAAQN,SAAUoC,OAAQA,IAC9C,wCAAW9B,EAAQ4I,UAAY,IAAIC,KAAK7I,EAAQ4I,WAAWE,kBAAmB,IAAID,MAAOC,uBAE7F,mBAAGlN,MAAO,CAACC,WAAY,OAAQlB,MAAO,SAAtC,SAAiDqF,EAAQA,YAL1C2I,UAWnC,cAACxK,EAAA,EAAD,CACI4K,SAAO,EACP5H,WAAS,EACT9C,GAAG,8BACH2K,WAAS,EACTC,QAAS,EACTzK,MAAOwB,EACPvB,SAAU,SAAA3F,GAAC,OAAIgO,EAAWhO,EAAE4F,OAAOF,QACnC0K,WAAY,CACRC,aAAc,cAACC,EAAA,EAAD,CAAgB/P,SAAS,MAAzB,SACV,cAAC8B,EAAA,EAAD,CAAQL,QAAQ,YAAYtB,QAAS,SAAAV,GAAC,OAvGjD,SAACA,GAClB,IAAMuQ,EAAa,CAAE3J,SAAU7F,IAAQD,IAAI,YAAaoG,QAASA,EAAShE,OAAQqC,IAClFvF,EAAEC,iBACF+I,EAAOS,KAAK,cAAe8G,GAC3BrC,EAAe,CAACqC,GAAF,mBAAiBtC,KAC/BD,EAAW,IACXnN,IAAMiF,KAAK,uCAAwCyK,EAAY,CAAEvP,iBAAiB,IAC7EC,MAAK,SAAA8E,GAAG,OAAIA,KACZzE,OAAM,SAAAC,GAAG,OAAIC,QAAQC,IAAIF,EAAIe,aA+FoC4D,CAAalG,IAAvD,iCAOxB,cAAC,GAAD,CACIY,KAAMyN,GACNpE,OAAQA,GACR+C,YAAaA,SC/HdwD,OArBf,WAEE,MAAgC/L,mBAAS,SAAW4E,KAAKC,SAASC,SAAS,IAAIC,MAAM,IAArF,mBAAiBf,GAAjB,WACA,EAAsChE,oBAAS,GAA/C,mBAAO2D,EAAP,KAAoB5E,EAApB,KAEA,OACE,qBAAKiN,UAAU,MAAf,SACE,cAAC,IAAD,UACE,eAAC,IAAD,WACE,cAAC,IAAD,CAAOC,KAAK,gBAAZ,SACE,cAAC,GAAD,CAAUtI,YAAaA,EAAa5E,eAAgBA,MAEtD,cAAC,IAAD,CAAOkN,KAAK,IAAZ,SACE,cAAC,EAAD,CAAWjI,YAAaA,EAAaL,YAAaA,EAAa5E,eAAgBA,cCP5EmN,GAZS,SAAAC,GAClBA,GAAeA,aAAuBC,UACxC,8BAAqB5P,MAAK,YAAkD,IAA/C6P,EAA8C,EAA9CA,OAAQC,EAAsC,EAAtCA,OAAQC,EAA8B,EAA9BA,OAAQC,EAAsB,EAAtBA,OAAQC,EAAc,EAAdA,QAC3DJ,EAAOF,GACPG,EAAOH,GACPI,EAAOJ,GACPK,EAAOL,GACPM,EAAQN,OCDdO,IAASC,OACL,cAAC,GAAD,IACFhG,SAASC,eAAe,SAM1BsF,O","file":"static/js/main.e59f24b2.chunk.js","sourcesContent":["import React from 'react';\r\nimport AppBar from '@mui/material/AppBar';\r\nimport Box from '@mui/material/Box';\r\nimport Toolbar from '@mui/material/Toolbar';\r\nimport Typography from '@mui/material/Typography';\r\nimport Button from '@mui/material/Button';\r\nimport IconButton from '@mui/material/IconButton';\r\nimport MenuIcon from '@mui/icons-material/Menu';\r\nimport axios from 'axios';\r\nimport Cookies from 'js-cookie';\r\nimport { useHistory } from 'react-router';\r\n\r\nconst NavBar = (props) => {\r\n\r\n    const history = useHistory();\r\n\r\n    const handleDrawerClick = (e) => {\r\n        e.preventDefault();\r\n        props.setOpen(props.open ? false : true);\r\n        axios.get('http://localhost:8000/api/user/name/' + Cookies.get('userName'), { withCredentials: true })\r\n            .then(user => {\r\n                props.setUserRooms(user.data.user.rooms);\r\n            })\r\n            .catch(err => console.log(err));\r\n    }\r\n\r\n    const handleLoginClick = (e) => {\r\n        e.preventDefault();\r\n        props.setLoginOpen(props.loginOpen ? false : true);\r\n    };\r\n\r\n    const handleRegisterClick = (e) => {\r\n        e.preventDefault();\r\n        props.setRegisterOpen(props.registerOpen ? false : true);\r\n    };\r\n\r\n    const handleLogoutClick = (e) => {\r\n        e.preventDefault();\r\n        axios.get('http://localhost:8000/api/user/logout', { withCredentials: true })\r\n            .then(() => history.push('/'))\r\n            .catch(err => console.log(err.response));\r\n    };\r\n\r\n    const goHome = (e) => {\r\n        e.preventDefault();\r\n        history.push('/');\r\n    };\r\n\r\n    return (\r\n        <Box sx={{ flexGrow: 1 }}>\r\n            <AppBar position=\"static\">\r\n                <Toolbar>\r\n                    <IconButton\r\n                        onClick={e => handleDrawerClick(e)}\r\n                        size=\"large\"\r\n                        edge=\"start\"\r\n                        color=\"inherit\"\r\n                        aria-label=\"menu\"\r\n                        sx={{ mr: 2 }}\r\n                    >\r\n                        <MenuIcon />\r\n                    </IconButton>\r\n                    <Typography variant=\"h6\" component=\"div\" sx={{ flexGrow: 1 }}>\r\n                        {props.pageHeader}\r\n                    </Typography>\r\n                    {props.isLoggedIn ? (\r\n                        <>\r\n                            {props.dashboard ? '' : <Button color='inherit' onClick={e => goHome(e)}>Home</Button>}\r\n                            <Button color=\"inherit\" onClick={e => handleLogoutClick(e)}>Logout</Button>\r\n                        </>\r\n                    ) : (\r\n                        <>\r\n                            {props.dashboard ? '' : <Button color='inherit' onClick={e => goHome(e)}>Home</Button>}\r\n                            <Button color=\"inherit\" onClick={e => handleRegisterClick(e)}>Register</Button>\r\n                            <Button color=\"inherit\" onClick={e => handleLoginClick(e)} style={{marginLeft: '50px'}}>Login</Button>\r\n                        </>)}\r\n                  \r\n                </Toolbar>\r\n            </AppBar>\r\n        </Box>\r\n    );\r\n};\r\n\r\nexport default NavBar;","import React from 'react';\r\nimport { Divider, Drawer, List, ListItem, Link } from '@mui/material';\r\nimport { IconButton } from '@mui/material'; \r\nimport AddCircleOutlineIcon from '@mui/icons-material/AddCircleOutline';\r\nimport { useHistory } from 'react-router';\r\nimport Cookies from 'js-cookie';\r\n\r\nconst NavDrawer = (props) => {\r\n\r\n    const history = useHistory();\r\n\r\n    const close = () => {\r\n        props.setOpen(false);\r\n    };\r\n\r\n    const handleAddOpen = (e) => {\r\n        e.preventDefault();\r\n        props.setNewRoomOpen(true);\r\n    };\r\n\r\n    const handleRoomLink = (e, roomId) => {\r\n        e.preventDefault();\r\n        history.push('/chatroom/' + roomId);\r\n    };\r\n\r\n    return (\r\n        <Drawer \r\n            anchor='left'\r\n            elevation={20}\r\n            open={props.open}\r\n            onClose={close}\r\n        >\r\n            <h1 style={{margin: '30px 80px'}}>Your Rooms\r\n                {props.isLoggedIn ? \r\n                     (\r\n                    <IconButton size='large' variant='contained' color='primary'\r\n                        onClick={e => handleAddOpen(e)}>\r\n                        <AddCircleOutlineIcon />\r\n                    </IconButton>\r\n                    ) : null}\r\n            </h1>\r\n            <Divider />\r\n            <List>\r\n                <h4 style={{margin: '10px'}}>Direct Messages</h4>\r\n                {props.userRooms.map((room, idx) => {\r\n                    if (room.isDm) {\r\n                        return (\r\n                            <ListItem key={idx}>\r\n                                <Link underline='hover' component='button' variant='h6'\r\n                                onClick={e => handleRoomLink(e, room._id)}>{room.host === Cookies.get('userName') ? room.users[1] : room.host}</Link>\r\n                            </ListItem>\r\n                        )\r\n                    }\r\n                })}\r\n            </List>\r\n            <Divider />\r\n            <List>\r\n                <h4 style={{margin: '10px'}}>Chat Rooms</h4>\r\n                {props.userRooms.map((room, idx) => {\r\n                    if (!room.isDm) {\r\n                        return (\r\n                            <ListItem key={idx}>\r\n                                <Link underline='hover' component='button' variant='h6'\r\n                                onClick={e => handleRoomLink(e, room._id)}>{room.roomName}</Link>\r\n                            </ListItem>\r\n                        )\r\n                    }\r\n                })}\r\n            </List>\r\n        </Drawer>\r\n    );\r\n};\r\n\r\nexport default NavDrawer;","import React, { useState } from 'react';\r\nimport Button from '@mui/material/Button';\r\nimport TextField from '@mui/material/TextField';\r\nimport Dialog from '@mui/material/Dialog';\r\nimport DialogActions from '@mui/material/DialogActions';\r\nimport DialogContent from '@mui/material/DialogContent';\r\nimport DialogContentText from '@mui/material/DialogContentText';\r\nimport DialogTitle from '@mui/material/DialogTitle';\r\nimport axios from 'axios';\r\n\r\nconst LoginDialog = (props) => {\r\n\r\n    const [info, setInfo] = useState({ email: '', password: '' });\r\n    const [error, setError] = useState('');\r\n\r\n    const close = () => {\r\n        setInfo({ email: '', password: '' });\r\n        props.setLoginOpen(false);\r\n    };\r\n\r\n    const handleSubmit = (e) => {\r\n        e.preventDefault();\r\n        axios.post('http://localhost:8000/api/user/login', info, { withCredentials: true })\r\n            .then(res => {\r\n                props.setCount(props.count + 1);\r\n                props.setLoginOpen(false);\r\n                console.log(res);\r\n            })\r\n            .catch(err => {\r\n                setError(err.response.data);\r\n            })\r\n    }\r\n\r\n    return (\r\n        <Dialog open={props.loginOpen} onClose={close}>\r\n            <DialogContent>\r\n                <DialogTitle>Login</DialogTitle>\r\n                <DialogContentText>\r\n                    Login with your email and password to begin.<br></br>\r\n                    <small style={{color: 'red'}}>{error}</small>\r\n                </DialogContentText>\r\n                <TextField\r\n                    autoFocus\r\n                    margin='dense'\r\n                    id='email'\r\n                    label='Email Address'\r\n                    type='email'\r\n                    variant='standard'\r\n                    value={info.email}\r\n                    onChange={e => setInfo({ ...info, email: e.target.value })}\r\n                />\r\n                <TextField\r\n                    margin='dense'\r\n                    id='password'\r\n                    label='Password'\r\n                    type='password'\r\n                    variant='standard'\r\n                    value={info.password}\r\n                    onChange={e => setInfo({ ...info, password: e.target.value })}\r\n                    style={{marginLeft: '10px'}}\r\n                />\r\n            </DialogContent>\r\n            <DialogActions>\r\n                <Button onClick={close}>Cancel</Button>\r\n                <Button onClick={e => handleSubmit(e)} variant='contained'>Submit</Button>\r\n            </DialogActions>\r\n        </Dialog>\r\n    );\r\n};\r\n\r\nexport default LoginDialog;","import React, { useState } from 'react';\r\nimport TextField from '@mui/material/TextField';\r\nimport { Button } from '@mui/material';\r\nimport { useHistory } from 'react-router';\r\nimport axios from 'axios';\r\nimport Cookies from 'js-cookie';\r\nimport { Snackbar } from '@mui/material';\r\n\r\nconst Greeting = () => {\r\n\r\n    const [roomCode, setRoomCode] = useState('');\r\n    const [noRoom, setNoRoom] = useState(false);\r\n    const [error, setError] = useState('');\r\n    const history = useHistory();\r\n\r\n    const onSubmit = (e) => {\r\n        e.preventDefault();\r\n        axios.get('http://localhost:8000/room/name/' + roomCode)\r\n            .then(room => {\r\n                room = room.data.room;\r\n                const payload = { room: room, userName: Cookies.get('userName') };\r\n                axios.put('http://localhost:8000/api/user/addroom', payload, { withCredentials: true })\r\n                    .then(() => history.push('/chatroom/' + room._id))\r\n                    .catch(err => {\r\n                        if (err.response.data.error === undefined) {\r\n                            setError('You have to be logged in to do that!');\r\n                        } else {\r\n                            setError(err.response.data.error);\r\n                        }\r\n                        setRoomCode('');\r\n                        setNoRoom(true);\r\n                    });\r\n            })\r\n            .catch(error => console.log(error));\r\n    };\r\n\r\n    const handleSnackClose = () => {\r\n        setError('');\r\n        setNoRoom(false);\r\n    }\r\n\r\n    return (\r\n        <div>\r\n            <h1 style={{marginTop: '150px'}}>Sign Up Then Enter a Room Code to Get Started</h1>\r\n            <TextField \r\n                style={{minWidth: '400px'}}\r\n                type='text'\r\n                value={roomCode}\r\n                onChange={e => setRoomCode(e.target.value)}\r\n            />\r\n            <Button\r\n                onClick={e => onSubmit(e)}\r\n                variant='contained'\r\n                style={{marginLeft: '15px', height: '53px', marginTop: '1px'}}\r\n            >Enter</Button>\r\n            <Snackbar message='You are already in this room!' \r\n                open={noRoom}\r\n                onClose={handleSnackClose} />\r\n            <Snackbar message={error}\r\n                open={noRoom}\r\n                onClose={handleSnackClose} />\r\n        </div>\r\n    );\r\n};\r\n\r\nexport default Greeting;","import React, { useState } from 'react';\r\nimport Button from '@mui/material/Button';\r\nimport TextField from '@mui/material/TextField';\r\nimport Dialog from '@mui/material/Dialog';\r\nimport DialogActions from '@mui/material/DialogActions';\r\nimport DialogContent from '@mui/material/DialogContent';\r\nimport DialogContentText from '@mui/material/DialogContentText';\r\nimport DialogTitle from '@mui/material/DialogTitle';\r\nimport axios from 'axios';\r\n\r\nconst RegisterDialog = (props) => {\r\n\r\n    const [user, setUser] = useState({\r\n        userName: '',\r\n        email: '', \r\n        password: '',\r\n        confirmPassword: '',\r\n    });\r\n    const [errors, setErrors] = useState({\r\n        email: '',\r\n        password: '',\r\n        userName: '',\r\n        confirmPassword: '',\r\n    });\r\n\r\n    const close = () => {\r\n        props.setRegisterOpen(false);\r\n        setUser({\r\n            userName: '',\r\n            email: '', \r\n            password: '',\r\n            confirmPassword: '',\r\n        });\r\n    }\r\n\r\n    const handleClose = (e) => {\r\n        e.preventDefault();\r\n        props.setRegisterOpen(false);\r\n    };\r\n\r\n    const handleRegister = (e) => {\r\n        e.preventDefault();\r\n        axios.post('http://localhost:8000/api/user/register', user, { withCredentials: true })\r\n            .then(res => {\r\n                props.setCount(props.count + 1);\r\n                close();\r\n            })\r\n            .catch(err => {\r\n                var errorObj = {};\r\n                var defaultErrors = {\r\n                    email: '',\r\n                    password: '',\r\n                    userName: '',\r\n                    confirmPassword: '',\r\n                };\r\n                for (const [error, message] of Object.entries(err.response.data.error.errors)) {\r\n                    errorObj[error] = message.message;\r\n                };\r\n                setErrors({...defaultErrors, ...errorObj});\r\n            });\r\n    };\r\n\r\n    return (\r\n        <Dialog open={props.registerOpen} onClose={close}>\r\n            <DialogContent>\r\n                <DialogTitle>Get Registered</DialogTitle>\r\n                    <DialogContentText>\r\n                        Register below to get started and create your own rooms!\r\n                    </DialogContentText>\r\n                    <div style={{display: 'flex', flexFlow: 'row nowrap', justifyContent: 'space-evenly'}}>\r\n                        <TextField\r\n                            error={errors.userName === '' ? false : true}\r\n                            helperText={errors.userName === '' ? '' : errors.userName}\r\n                            autoFocus\r\n                            margin='dense'\r\n                            id='userName'\r\n                            label='User Name'\r\n                            type='text'\r\n                            variant='standard'\r\n                            value={user.userName}\r\n                            onChange={e => setUser({ ...user, userName: e.target.value })}\r\n                        />\r\n                        <TextField\r\n                            error={errors.email === '' ? false : true}\r\n                            helperText={errors.email === '' ? '' : errors.email}\r\n                            margin='dense'\r\n                            id='email'\r\n                            label='Email'\r\n                            type='email'\r\n                            variant='standard'\r\n                            value={user.email}\r\n                            onChange={e => setUser({...user, email: e.target.value})}\r\n                        />\r\n                    </div>\r\n                    <div style={{display: 'flex', flexFlow: 'row nowrap', justifyContent: 'space-evenly'}}>\r\n                        <TextField\r\n                            error={errors.password === '' ? false : true}\r\n                            helperText={errors.password === '' ? '' : errors.password}\r\n                            margin='dense'\r\n                            id='password'\r\n                            label='Password'\r\n                            type='password'\r\n                            variant='standard'\r\n                            value={user.password}\r\n                            onChange={e => setUser({...user, password: e.target.value})}\r\n                            style={{maxWidth: '200px'}}\r\n                        />\r\n                        <TextField\r\n                            error={errors.confirmPassword === '' ? false : true}\r\n                            helperText={errors.confirmPassword === '' ? '' : errors.confirmPassword}\r\n                            margin='dense'\r\n                            id='confirmPassword'\r\n                            label='Confirm Password'\r\n                            type='password'\r\n                            variant='standard'\r\n                            value={user.confirmPassword}\r\n                            onChange={e => setUser({...user, confirmPassword: e.target.value})}\r\n                        />\r\n                    </div>\r\n            </DialogContent>\r\n            <DialogActions>\r\n                <Button onClick={e => handleClose(e)}>Cancel</Button>\r\n                <Button variant='contained' onClick={e => handleRegister(e)}>Register</Button>\r\n            </DialogActions>\r\n        </Dialog>\r\n    );\r\n};\r\n\r\nexport default RegisterDialog;","import React, { useState } from 'react';\r\nimport Button from '@mui/material/Button';\r\nimport TextField from '@mui/material/TextField';\r\nimport Dialog from '@mui/material/Dialog';\r\nimport DialogActions from '@mui/material/DialogActions';\r\nimport DialogContent from '@mui/material/DialogContent';\r\nimport DialogContentText from '@mui/material/DialogContentText';\r\nimport DialogTitle from '@mui/material/DialogTitle';\r\nimport axios from 'axios';\r\nimport Cookies from 'js-cookie';\r\nimport { useHistory } from 'react-router';\r\n\r\nconst CreateRoom = (props) => {\r\n\r\n    const [roomName, setRoomName] = useState('');\r\n    const history = useHistory();\r\n\r\n    const close = () => {\r\n        props.setNewRoomOpen(false);\r\n    }\r\n\r\n    const handleSubmit = (e) => {\r\n        e.preventDefault();\r\n        axios.post('http://localhost:8000/room/create', { roomName: roomName, users: [Cookies.get('userName')], isDm: false, host: Cookies.get('userName')}, { withCredentials: true })\r\n            .then(room => {\r\n                axios.put('http://localhost:8000/api/user/addroom/', { room: room.data.room, userName: Cookies.get('userName') }, { withCredentials: true })\r\n                    .then(rooms => console.log(rooms))\r\n                    .catch(err => console.log(err.response));\r\n                history.push('/chatroom/'+room.data.room._id);\r\n                close();\r\n                setRoomName('');\r\n                props.setOpen(false);\r\n            })\r\n            .catch(err => console.log(err.response));\r\n    };\r\n\r\n    return (\r\n        <Dialog open={props.newRoomOpen} onClose={close}>\r\n            <DialogContent>\r\n                <DialogTitle>Create a Room</DialogTitle>\r\n                <DialogContentText>\r\n                    Create a new chatroom to talk with your pals!<br></br>\r\n                    <small style={{color: 'red'}}></small>\r\n                </DialogContentText>\r\n                <TextField\r\n                    fullWidth\r\n                    autoFocus\r\n                    margin='dense'\r\n                    id='roomName'\r\n                    label='Room Name'\r\n                    type='text'\r\n                    variant='standard'\r\n                    value={roomName}\r\n                    onChange={e => setRoomName(e.target.value)}\r\n                />\r\n            </DialogContent>\r\n            <DialogActions>\r\n                <Button onClick={close}>Cancel</Button>\r\n                <Button variant='contained' onClick={e => handleSubmit(e)}>Submit</Button>\r\n            </DialogActions>\r\n        </Dialog>\r\n    );\r\n};\r\n\r\nexport default CreateRoom;","import React, { useState, useEffect } from 'react';\r\nimport NavBar from '../components/NavBar';\r\nimport NavDrawer from '../components/NavDrawer';\r\nimport LoginDialog from '../components/LoginDialog';\r\nimport Greeting from '../components/Greeting';\r\nimport RegisterDialog from '../components/RegisterDialog';\r\nimport axios from 'axios';\r\nimport CreateRoom from '../components/CreateRoom';\r\n\r\nconst Dashboard = (props) => {\r\n\r\n    const [open, setOpen] = useState(false);\r\n    const [loginOpen, setLoginOpen] = useState(false);\r\n    const [registerOpen, setRegisterOpen] = useState(false);\r\n    const [isLoggedIn, setIsLoggedIn] = useState(false);\r\n    const [count, setCount] = useState(0);\r\n    const [userRooms, setUserRooms] = useState([]);\r\n\r\n    const whatLinks = () => {\r\n        axios.get('http://localhost:8000/api/user/isloggedin', { withCredentials : true })\r\n            .then(() => {\r\n                setIsLoggedIn(true);\r\n            })\r\n            .catch(setIsLoggedIn(false));\r\n    }\r\n\r\n    useEffect(() => {\r\n        whatLinks();\r\n    }, [count]);\r\n\r\n    return (\r\n        <>\r\n            <NavBar pageHeader={''} setOpen={setOpen} open={open} setLoginOpen={setLoginOpen} loginOpen={loginOpen} \r\n                registerOpen={registerOpen} setRegisterOpen={setRegisterOpen} isLoggedIn={isLoggedIn}\r\n                count={count} setCount={setCount} userRooms={userRooms} setUserRooms={setUserRooms} \r\n                dashboard={true} />\r\n            <NavDrawer open={open} setOpen={setOpen} isLoggedIn={isLoggedIn} \r\n                newRoomOpen={props.newRoomOpen} setNewRoomOpen={props.setNewRoomOpen}\r\n                userRooms={userRooms} setUserRooms={setUserRooms} />\r\n            <CreateRoom newRoomOpen={props.newRoomOpen} setNewRoomOpen={props.setNewRoomOpen} />\r\n            <LoginDialog loginOpen={loginOpen} setLoginOpen={setLoginOpen} count={count} setCount={setCount}\r\n                setUserName={props.setUserName} />\r\n            <RegisterDialog registerOpen={registerOpen} setRegisterOpen={setRegisterOpen}\r\n                count={count} setCount={setCount} />\r\n            <Greeting />\r\n        </>\r\n        \r\n    );\r\n};\r\n\r\nexport default Dashboard;","import React, { useState } from 'react';\r\nimport Chip from '@mui/material/Chip';\r\nimport Menu from '@mui/material/Menu';\r\nimport MenuItem from '@mui/material/MenuItem';\r\nimport axios from 'axios';\r\nimport Cookies from 'js-cookie';\r\nimport { useHistory } from 'react-router';\r\nimport { Snackbar } from '@mui/material';\r\nimport io from 'socket.io-client';\r\n\r\nconst NameMenu = (props) => {\r\n\r\n    const [anchorEl, setAnchorEl] = useState(null);\r\n    const [snack, setSnack] = useState(false);\r\n    const [socket] = useState(() => io(':8000'));\r\n    const open = Boolean(anchorEl);\r\n    const history = useHistory();\r\n\r\n    const handleClick = (event) => {\r\n      setAnchorEl(event.currentTarget);\r\n    };\r\n\r\n    const handleClose = () => {\r\n      setAnchorEl(null);\r\n    };\r\n\r\n    const handleSnackClose = () => {\r\n        setSnack(false);\r\n    };\r\n\r\n    const handleDm = (targetUser) => {\r\n        axios.get('http://localhost:8000/room/' + Cookies.get('userName') + '/' + targetUser)\r\n            .then(rooms => {\r\n                if (rooms.data.room.length === 0) {\r\n                axios.post('http://localhost:8000/room/create', { \r\n                    roomName: Math.random().toString(36).slice(2), \r\n                    users: [Cookies.get('userName'), targetUser], \r\n                    isDm: true,\r\n                    host: Cookies.get('userName'),\r\n                    })\r\n                    .then(room => {\r\n                        console.log();\r\n                        axios.put('http://localhost:8000/api/user/addroom/', { room: room.data.room, userName: Cookies.get('userName') }, { withCredentials: true })\r\n                            .then(rooms => console.log(rooms))\r\n                            .catch(err => console.log(err.response));\r\n\r\n                        axios.put('http://localhost:8000/api/user/addroom/', { room: room.data.room, userName: targetUser }, { withCredentials: true })\r\n                            .then(rooms => console.log(rooms))\r\n                            .catch(err => console.log(err.response));\r\n\r\n                        history.push('/chatroom/' + room.data.room._id);\r\n                    })\r\n                    .catch(err => console.log(err.response));\r\n\r\n                socket.emit('sendDm', targetUser)\r\n                } else {\r\n                    setSnack(true);\r\n                    handleClose();\r\n                    history.push('/chatroom/' + rooms.data.room._id);\r\n                }\r\n            })\r\n            .catch(err => console.log(err));\r\n    };\r\n\r\n    const handleCall = (targetUser) => {\r\n        handleDm(targetUser);\r\n        axios.get('http://localhost:8000/api/user/name/' + targetUser, { withCredentials: true })\r\n            .then(user => {\r\n                const userInfo = user.data.user;\r\n                socket.emit('start_call', { userInfo: userInfo, caller: Cookies.get('userName') });\r\n\r\n            })\r\n            .catch(err => console.log(err));\r\n    }\r\n\r\n    return (\r\n        <div>\r\n            <Chip label={props.userName} \r\n                component=\"a\" \r\n                aria-controls=\"basic-menu\"\r\n                aria-haspopup=\"true\"\r\n                aria-expanded={open ? 'true' : undefined}\r\n                clickable \r\n                onClick={handleClick} />\r\n            <Menu\r\n                id=\"basic-menu\"\r\n                anchorEl={anchorEl}\r\n                open={open}\r\n                onClose={handleClose}\r\n                MenuListProps={{\r\n                'aria-labelledby': 'basic-button',\r\n                }}\r\n            >\r\n                <MenuItem onClick={() => handleDm(props.userName)}>Direct message</MenuItem>\r\n                <MenuItem onClick={() => handleCall(props.userName)}>Call</MenuItem>\r\n                <MenuItem onClick={handleClose}>Profile</MenuItem>\r\n            </Menu>\r\n            <Snackbar message='You already have a DM with this person!' \r\n                open={snack}\r\n                onClose={handleSnackClose} />\r\n        </div>\r\n    );\r\n};\r\n\r\nexport default NameMenu;","import Cookies from 'js-cookie';\r\nimport React, { useState, useEffect } from 'react';\r\nimport io from 'socket.io-client';\r\n\r\nconst VideoSquare = (props) => {\r\n\r\n    const constraints = {\r\n        video: {width: {exact: 480}, height: {exact: 320}},\r\n        audio: true,\r\n    }\r\n    const configuration = { iceServers: [\r\n        { urls: 'stun:stun.l.google.com:19302' },\r\n        { urls: 'stun:stun1.l.google.com:19302' },\r\n        { urls: 'stun:stun2.l.google.com:19302' },\r\n        { urls: 'stun:stun3.l.google.com:19302' },\r\n        { urls: 'stun:stun4.l.google.com:19302' },\r\n    ]};\r\n    const [socket] = useState(() => io(':8000'));\r\n\r\n    useEffect(() => {\r\n        let rtcPeerConnection;\r\n        let localStream;\r\n        let remoteStream;\r\n        let callHost = props.roomInfo.host;\r\n        let roomId = props.roomInfo._id;\r\n\r\n        setLocalStream(constraints);\r\n\r\n        socket.on('call', async () => {\r\n            if (callHost === Cookies.get('userName')) {\r\n                console.log('client call');\r\n                rtcPeerConnection = new RTCPeerConnection(configuration);\r\n                addLocalTracks(rtcPeerConnection);\r\n                rtcPeerConnection.ontrack = setRemoteStream;\r\n                rtcPeerConnection.onicecandidate = sendIceCandidate;\r\n                \r\n                await createOffer(rtcPeerConnection);\r\n            };\r\n        });\r\n\r\n        socket.on('offer', async (event) => {\r\n            if(callHost !== Cookies.get('userName')) {\r\n                rtcPeerConnection = new RTCPeerConnection(configuration);\r\n                addLocalTracks(rtcPeerConnection);\r\n                rtcPeerConnection.ontrack = setRemoteStream;\r\n                rtcPeerConnection.onicecandidate = sendIceCandidate;\r\n                rtcPeerConnection.setRemoteDescription(new RTCSessionDescription(event));\r\n                await createAnswer(rtcPeerConnection);\r\n                console.log('client offer')\r\n            };\r\n        });\r\n\r\n        socket.on('answer', (event) => {\r\n            rtcPeerConnection.setRemoteDescription(new RTCSessionDescription(event));\r\n        });\r\n\r\n        socket.on('ice_candidate', (event) => {\r\n            var candidate = new RTCIceCandidate({\r\n                sdpMLineIndex: event.label,\r\n                candidate: event.candidate,\r\n            });\r\n        });\r\n\r\n        // FUNCTIONS BELOW\r\n\r\n        async function setLocalStream(constraints) {\r\n            try {\r\n                let stream = await navigator.mediaDevices.getUserMedia(constraints);\r\n                let localVid = document.getElementById('localVid');\r\n                localVid.srcObject = stream;\r\n            } catch (err) {\r\n                console.log('Error getting local media.', err);\r\n            };\r\n        };\r\n\r\n        function addLocalTracks(rtcPeerConnection) {\r\n            localStream.getTracks().forEach((track) => {\r\n                rtcPeerConnection.addTrack(track, localStream);\r\n            });\r\n        };\r\n          \r\n        async function createOffer(rtcPeerConnection) {\r\n            let sessionDescription;\r\n            try {\r\n                sessionDescription = await rtcPeerConnection.createOffer();\r\n                rtcPeerConnection.setLocalDescription(sessionDescription);\r\n            } catch (error) {\r\n                console.error(error);\r\n            };\r\n          \r\n            socket.emit('offer', {\r\n                type: 'offer',\r\n                sdp: sessionDescription,\r\n                roomId,\r\n            });\r\n        };\r\n          \r\n        async function createAnswer(rtcPeerConnection) {\r\n            let sessionDescription;\r\n            try {\r\n                sessionDescription = await rtcPeerConnection.createAnswer();\r\n                rtcPeerConnection.setLocalDescription(sessionDescription);\r\n            } catch (error) {\r\n                console.error(error);\r\n            };\r\n          \r\n            socket.emit('answer', {\r\n                type: 'answer',\r\n                sdp: sessionDescription,\r\n                roomId,\r\n            });\r\n        };\r\n          \r\n        function setRemoteStream(event) {\r\n            document.getElementById('remoteVid').srcObject = event.streams[0];\r\n            remoteStream = event.stream;\r\n        };\r\n          \r\n        function sendIceCandidate(event) {\r\n            if (event.candidate) {\r\n                socket.emit('ice_candidate', {\r\n                    roomId,\r\n                    label: event.candidate.sdpMLineIndex,\r\n                    candidate: event.candidate.candidate,\r\n              });\r\n            };\r\n        };\r\n\r\n        // Finally we emit the call event.\r\n        socket.emit('call', roomId);\r\n\r\n    }, []);\r\n\r\n    return (\r\n        <>\r\n            <video id='remoteVid' autoPlay>\r\n\r\n            </video>\r\n\r\n            <video id='localVid' autoPlay>\r\n\r\n            </video>\r\n        </>\r\n    );\r\n};\r\n\r\nexport default VideoSquare;","import React, { useState } from 'react';\r\nimport Button from '@mui/material/Button';\r\nimport Dialog from '@mui/material/Dialog';\r\nimport DialogActions from '@mui/material/DialogActions';\r\nimport DialogContent from '@mui/material/DialogContent';\r\nimport DialogContentText from '@mui/material/DialogContentText';\r\nimport DialogTitle from '@mui/material/DialogTitle';\r\nimport axios from 'axios';\r\nimport { useHistory } from 'react-router';\r\nimport Cookies from 'js-cookie';\r\nimport io from 'socket.io-client';\r\n\r\nconst CallDialog = (props) => {\r\n\r\n    const history = useHistory();\r\n    const [socket] = useState(() => io(':8000'));\r\n\r\n    const handleClose = (e) => {\r\n        e.preventDefault();\r\n        props.setCallOpen(false);\r\n    };\r\n\r\n    const handleAccept = (e) => {\r\n        e.preventDefault();\r\n        axios.get('http://localhost:8000/room/' + props.caller + '/' + Cookies.get('userName'), { withCredentials: true })\r\n            .then(room => {\r\n                history.push('/chatroom/' + room.data.room[0]._id);\r\n                socket.emit('call', room.data.room[0]._id);\r\n            })\r\n            .catch(err => console.log(err));\r\n        props.setCallOpen(false);\r\n    };\r\n    \r\n    return (\r\n        <Dialog open={props.open} onClose={e => handleClose(e)}>\r\n            <DialogTitle>You're recieving a call from {props.caller}!</DialogTitle>\r\n            <DialogContent>\r\n                <DialogContentText>\r\n                    Answer it or decline it, the choice is yours.\r\n                </DialogContentText>\r\n            </DialogContent>\r\n            <DialogActions style={{margin: '0 auto'}}>\r\n                <Button onClick={e => handleClose(e)} style={{marginRight: '15px'}}>Decline</Button>\r\n                <Button variant='contained' onClick={e => handleAccept(e)}>Accept</Button>\r\n            </DialogActions>\r\n        </Dialog>\r\n    );\r\n};\r\n\r\nexport default CallDialog;","import { Button, Container, Grid, Stack } from '@mui/material';\r\nimport { Box } from '@mui/system';\r\nimport { TextField } from '@mui/material';\r\nimport { Paper } from '@mui/material';\r\nimport { styled } from '@mui/material/styles';\r\nimport { InputAdornment } from '@mui/material';\r\nimport React, { useState, useEffect } from 'react';\r\nimport NavBar from '../components/NavBar';\r\nimport NavDrawer from '../components/NavDrawer';\r\nimport axios from 'axios';\r\nimport io from 'socket.io-client';\r\nimport CreateRoom from '../components/CreateRoom';\r\nimport Cookies from 'js-cookie';\r\nimport { useParams } from 'react-router';\r\nimport NameMenu from '../components/NameMenu';\r\nimport VideoSquare from '../components/VideoSquare';\r\nimport CallDialog from '../components/CallDialog';\r\n\r\nconst Chatroom = (props) => {\r\n\r\n    const Item = styled(Paper)(({ theme }) => ({\r\n        ...theme.typography.body2,\r\n        padding: theme.spacing(1),\r\n        textAlign: 'left',\r\n        color: theme.palette.text.secondary,\r\n    }));\r\n\r\n    const [socket] = useState(() => io(':8000'));\r\n    const [message, setMessage] = useState('');\r\n    const [allMessages, setAllMessages] = useState([]);\r\n    const [open, setOpen] = useState(false);\r\n    const [loginOpen, setLoginOpen] = useState(false);\r\n    const [registerOpen, setRegisterOpen] = useState(false);\r\n    const [isLoggedIn, setIsLoggedIn] = useState(true);\r\n    const [count, setCount] = useState(0);\r\n    const [userRooms, setUserRooms] = useState([]);\r\n    const [roomInfo, setRoomInfo] = useState({});\r\n    const [caller, setCaller] = useState('');\r\n    const [callOpen, setCallOpen] = useState(false);\r\n    const { id } = useParams();\r\n\r\n    const handleSubmit = (e) => {\r\n        const messageObj = { userName: Cookies.get('userName'), message: message, roomId: id };\r\n        e.preventDefault();\r\n        socket.emit('sendMessage', messageObj);\r\n        setAllMessages([messageObj, ...allMessages]);\r\n        setMessage('');\r\n        axios.post('http://localhost:8000/message/create', messageObj, { withCredentials: true })\r\n            .then(res => res)\r\n            .catch(err => console.log(err.response));\r\n    };\r\n\r\n    useEffect(() => {\r\n        axios.get('http://localhost:8000/room/' + id, { withCredentials: true })\r\n            .then(room => {\r\n                setRoomInfo(room.data.room);\r\n                console.log(room.data.room);\r\n            })\r\n            .catch(err => console.log(err));\r\n\r\n        axios.get('http://localhost:8000/message/getmessages/' + id, { withCredentials: true })\r\n            .then(messages => {\r\n                setAllMessages(messages.data.messages.reverse())\r\n            })\r\n            .catch(err => console.log(err.response));\r\n\r\n        socket.disconnect(true);\r\n        socket.connect();\r\n        socket.on('connect', () => {\r\n            console.log(socket.id);\r\n            axios.put('http://localhost:8000/api/user/updatesocket', { userName: Cookies.get('userName'), socket: socket.id }, { withCredentials: true })\r\n                .then(user => user)\r\n                .catch(err => console.log(err));\r\n        })\r\n\r\n        socket.on('recieveMessage', (data) => {\r\n            console.log(data);\r\n            axios.get('http://localhost:8000/message/getmessages/' + data, { withCredentials: true })\r\n                .then(messages => {\r\n                    setAllMessages([...messages.data.messages.reverse()])\r\n                })\r\n                .catch(err => console.log(err.response));\r\n        });\r\n\r\n        socket.on('recieving_call', (caller) => {\r\n            setCaller(caller);\r\n            setCallOpen(true);\r\n        })\r\n\r\n        socket.on('recieveDm', (data) => {\r\n            console.log(data);\r\n        });\r\n        socket.emit('join', id);\r\n        \r\n        return () => socket.disconnect(true);\r\n    }, [id, socket]);\r\n\r\n    return (\r\n        <>\r\n            <NavBar pageHeader={''} setOpen={setOpen} open={open} setLoginOpen={setLoginOpen} loginOpen={loginOpen} \r\n            registerOpen={registerOpen} setRegisterOpen={setRegisterOpen} isLoggedIn={isLoggedIn}\r\n            count={count} setCount={setCount} userRooms={userRooms} setUserRooms={setUserRooms}\r\n            pageHeader={roomInfo.isDm ? (roomInfo.host === Cookies.get('userName') ? roomInfo.users[1] : roomInfo.host) : roomInfo.roomName} />\r\n            <CreateRoom newRoomOpen={props.newRoomOpen} setNewRoomOpen={props.setNewRoomOpen} setOpen={setOpen} />\r\n            <NavDrawer open={open} setOpen={setOpen} userRooms={userRooms} setUserRooms={setUserRooms}\r\n                isLoggedIn={isLoggedIn} newRoomOpen={props.newRoomOpen} setNewRoomOpen={props.setNewRoomOpen} />\r\n            <Container maxWidth='xlg'>\r\n                <Grid container spacing={3}>\r\n                    {roomInfo.isDm ? (<Grid item xlg={2} lg={4} md={6} sm={8} xs={8}><VideoSquare style={{marginRight: '30px'}} roomInfo={roomInfo} /></Grid>) : ''}\r\n                    <Grid item xlg={roomInfo.isDm ? 12 : 10} lg={roomInfo.isDm ? 8 : 12} md={roomInfo.isDm ? 6 : 12} sm={roomInfo.isDm ? 4 : 12} xs={roomInfo.isDm ? 4 : 12}>\r\n                    <Box \r\n                        style={{minHeight: '600px', minWidth: '300px',\r\n                        backgroundColor: '#dce7e8', maxHeight: '600px',\r\n                        marginTop: '40px', overflowY: 'auto',\r\n                        borderRadius: '10px', padding: '30px', display: 'flex',\r\n                        flexDirection: 'column-reverse'}}>\r\n                            <Stack\r\n                                direction='column-reverse'\r\n                                justifyContent='space-evenly'\r\n                                alignItems='stretch'\r\n                                spacing={2}\r\n                            >\r\n                                    {allMessages.slice(0,40).map((message, index) => {\r\n                                        return (<Item key={index}>\r\n                                            <h4 style={{marginLeft: '5px', display: 'flex', flexFlow: 'row nowrap', alignItems: 'center'}}>\r\n                                                <NameMenu userName={message.userName} socket={socket} />  \r\n                                                <small> - {message.createdAt ? new Date(message.createdAt).toLocaleString() : new Date().toLocaleString()}</small>\r\n                                            </h4>\r\n                                            <p style={{marginLeft: '15px', color: 'black'}}>{message.message}</p>\r\n                                        </Item>)\r\n                                    })}\r\n\r\n                            </Stack>\r\n                        </Box>\r\n                        <TextField\r\n                            focused\r\n                            fullWidth\r\n                            id=\"outlined-multiline-flexible\"\r\n                            multiline\r\n                            maxRows={4}\r\n                            value={message}\r\n                            onChange={e => setMessage(e.target.value)}\r\n                            InputProps={{\r\n                                endAdornment: <InputAdornment position=\"end\">\r\n                                    <Button variant='contained' onClick={e => handleSubmit(e)}>Submit</Button>\r\n                                    </InputAdornment>,\r\n                            }}\r\n                        />   \r\n                        </Grid>        \r\n                </Grid>\r\n            </Container>\r\n            <CallDialog\r\n                open={callOpen}\r\n                caller={caller}\r\n                setCallOpen={setCallOpen}\r\n            />\r\n        </>\r\n    );\r\n};\r\n\r\nexport default Chatroom;","import './App.css';\nimport Dashboard from './views/Dashboard';\nimport { BrowserRouter as Router, Route, Switch } from 'react-router-dom';\nimport Chatroom from './views/Chatroom';\nimport React, { useState } from 'react';\n\nfunction App() {\n\n  const [userName, setUserName] = useState('Guest-' + Math.random().toString(36).slice(2));\n  const [newRoomOpen, setNewRoomOpen] = useState(false);\n\n  return (\n    <div className=\"App\">\n      <Router>\n        <Switch>\n          <Route path='/chatroom/:id'>\n            <Chatroom newRoomOpen={newRoomOpen} setNewRoomOpen={setNewRoomOpen} />\n          </Route>\n          <Route path='/'>\n            <Dashboard setUserName={setUserName} newRoomOpen={newRoomOpen} setNewRoomOpen={setNewRoomOpen} />\n          </Route>\n        </Switch>\n      </Router>\n    </div>\n  );\n};\n\nexport default App;\n","const reportWebVitals = onPerfEntry => {\n  if (onPerfEntry && onPerfEntry instanceof Function) {\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\n      getCLS(onPerfEntry);\n      getFID(onPerfEntry);\n      getFCP(onPerfEntry);\n      getLCP(onPerfEntry);\n      getTTFB(onPerfEntry);\n    });\n  }\n};\n\nexport default reportWebVitals;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\nimport reportWebVitals from './reportWebVitals';\n\nReactDOM.render(\n    <App />,\n  document.getElementById('root')\n);\n\n// If you want to start measuring performance in your app, pass a function\n// to log results (for example: reportWebVitals(console.log))\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\nreportWebVitals();\n"],"sourceRoot":""}